

VIDEO STopped at 2:44 , i bliv thats wher he start with adhoc commands 
so i had to start with profs video Ansible1, for class 34 )  
******** But this video started again so i continued with it, although i had already gone tru with vide01&2 class34





USING SCRIPT TO AUTOMATE THE CONFIGURATION OF REMOTE DEVELOPMENT, 
EXPLAINING THE CONFIGURATION THAT IS ENABLED/INPUTTED INSIDE THE CONFIGURATION FILE IN VSCODE FOR REMOTE DEVELOPMENT DURING THE AUTOMATED INSTALLATION,
INSTALLING VSCODE & CONFIGURING VSCODE FOR REMOTE DEVELOPMENT, APPLYING OUR CODE/SCRIPT, OUR KEY IS REFERENCED IN THE NULL FILE, TERRARY OPERATOR, 
DUE TO THE INSTALLATION AUTOMATION WE DYNAMICALLY ADDED THE ANSIBLE HOST(CONTROL)IN VSCODE & SSH INTO THE CONTROL SERVER WHERE WE CAN WRITE
&EXECUTE THE PLAYBKS, CREATING PLAYBOOK IN THE CONTROL SERVER IN VSCODE, HOST KEY CHECKING,NDEFAULT ANASIBLE.cfg or ANSIBLE CONFIGURATION FILE LOCATION, CONFIGURING OUR MANAGED
NODES, CREATING THE HOST LIST/GROUPS, WE CAN CREATE SSH CONNECTION IN 2WAYS;password & PSSWDLess authentication ie using ssh keys,  LOCAL HOST IS THE SERVER THAT IS RUNNING
ANSIBLE 
a)ESTABLISHING AN SSH CONNECTION TO ALL THE SERVERS USING PW AUTHENTICATION, CONNECTING TO A PARTICULAR GROUP OF SERVERS, CREATING ANOTHER USER(mark), HOW TO VERIFY IF YOU
ARE IN THE CONTROL NODE .. RUN : anisble, COMMUNICATING WITH THE USER mark, HOST AND GROUP VARIABLE, CREATING PW FOR THE HOST FILE VARIABLE, ANSIBLE FACT (pingpong, meaning
success), CREATING A USER VARIABLE AT THE HOST LEVEL TO CONNECT TO, GROUP VARIABLES, HOST LEVEL PRECEDENCE, ITEM POTENCY, TROUBLESHOOTING NUL RESOURCE NOT CREATING,
b) Password-less Authentication (Using SSH_Keys),TRANSFER THE PUBLIC/SSH KEY TO THE REMOTE HOST SSH COPY ID, LOGIN WITHOUT PASSWD, USING SSH & IP aDdress, TRANSFERS KEY TO 
2ND UBNUtu USER, TRANSFERS KEY TO REDHAT USER, COPYING THE KEY TO A SPECIFIC USER, ADHOC COMMANDS, WHAT IS ADHOC COMMAND, MODULES, TYPES OF MODULES;command,shell,file,copy,
fetch,apt,service,user module,setup module, debug module.
copy: a)From ansible control node to remote node/ b) From one location in remote node to another location in remote node
Fetch: a)Will copy the files with a directory structure; ansible all -m fetch -a "src=./hosts dest=./"  b)To fetch the file without a directory structure, use the flat=yes option



REMIND Myself what is dynamond  ???????


SIMPLIFIED SUMMARY/steps of video2

1)  EXPLAINING THE SCRIPT HE USED FOR AUTOMATION
AUTOMATED REMOTE DEVELOPMENT TO DYNAMICALLY ADD THE HOST (ie ansible control server) IN VSCODE & SSH INTO THE ANSIBLE CONTROL SERVER TO WRITE PLAYBOOKS 
using script, we automated ansible installation, vscode installation & vscode was configured for remote development
this configuration will dynamically add the host server ie ansible control server & input the 'host ansible info' in vscode, which helps us dynamically ssh into ansible server
after which we can connect to host (an optin in vscode ie to connect to an instance 52.55) & write playbooks instead of the using vscode to ONLY write playbooks then using
gitbash to ssh into the ansible control server to create a vi, paste & execute 
BUT
if the automation doesnt work, we also have the option of manually configuring vscode to ssh into the ansible server which will reQ manually inputing the 'host ansible info'
in the configuration file in vscode & other steps needed to make ansible own the home as stated in video3

We also automated host key checking so that we are not prompted to confirm yes everytime 
to find the users that hv been created i can check on the  etc passwd file. cat /etc/passwd

  
                  
2)Once ansible have been installed in the control server and the host/remote nodes created,we have to configure the managed nodes
To check if ansible has been installed we run; ansible & to verify if you are in the control node by running ; ansible
Ansible works by connecting to remote nodes (hosts) and pushing out small programs, called “Ansible modules” to them.
ie from the controller node server/ec2 instance where you hv installed your ansible software & after that, i also have multiple host/remote nodes, i can hv other ec2 
instances/servers am able to control this multiple servers frm my control node thru ssh connection once its connected
it pushes your ansible modules inside of the servers that its controling, once that is done, the module wil perfrom a task, lets say i want to create a file inside 
of this so i can use ansible to go inside of this ec2 istance n create a file so its goin to use a file module, it wil push the file module over ssh , once its moved ,ansible 
wil use the file module to create that file according to the specifictaion, once it creates the file and once it accomplishes that task ,it marks that task a complete and then
it deletes the module   . 
ansible modules are python scripts that can be invoked in a playbook


3)we used the diff modules eg the ping module  we pass the -M option to pass a module, 
4)we created a host list/file where we added the ip addresses of the  hosts/remote nodes we created during the installation
5)we eatablished an ssh connection to the host/remote servers using both;
a)password authentication & passing the -k option which prompts to input a PW, if we dnt pass -k option, it wil by default try to connect using the ssh keys
b)and ALSO USED passwordless authentication ie using ssh keys

6)WE also created another user (Mark & his paswd) was created in the db grp & we connected to him using the password, we specified the user by using the -U option
 ansible db -m ping -u mark -k   ... -K, to be prompted for a password

7)we also established ssh connection withour passowrd ie using ssh keys (**meeee, exchanging the public key with the private key)

8)we created host variable & group variable & illustrated host variable precedence by using the file module to create a file & saw that although the command was at grp level
the file was created in the home of both the host variable user & the home of the grp variable user which was ansible
we also introduced other ansible modules

WHAT IS ADHOC COMMAND 
An Ad-Hoc command is a one-liner ansible command that performs one task on the target host(s)/group(s).
ad hoc commands are tasks that you don’t perform frequently, such as restarting a service or retrieving information about the remote systems that Ansible manages.



  
     
      video 2 is in cont.. frm video1;

 summary,
1) 53.00..  EXPLAINING THE SCRIPT HE USED FOR AUTOMATION
AUTOMATED REMOTE DEVELOPMENT TO DYNAMICALLY ADD THE HOST (ie ansible control server) IN VSCODE & SSH INTO THE ANSIBLE CONTROL SERVER TO WRITE PLAYBOOKS 
using script, we automated ansible installation, vscode installation & vscode was configured for remote development
this configuration will dynamically add the host server ie ansible control server & input the 'host ansible info' in vscode, which helps us dynamically ssh into ansible server
after which we can connect to host (an optin in vscode  ie to connect to an instance 52.55) & write playbooks instead of the using vscode to ONLY write playbooks then using
gitbash to ssh into the ansible control server to create a vi, paste & execute 
BUT
if the automation doesnt work, we also have the option of manually configuring vscode to ssh into the ansible server which will reQ manually inputing the 'host ansible info'
in the configuration file in vscode & other steps needed to make ansible own the ssh key as stated in video3


MANUALLY CONFIGURING VSCODE FOR REMOTE DEVELOPMENT  ... vidoe3
https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/02-Configuring%20managed%20nodes/remote-config.md
Inside the vscode:    this is done after the vscode installation 
You pass the 'host ansible info', inside of your ssh config file(this file is in vscode) & other steps needed to make ansible own the home as stated in video3
then you are able to directly use your vscode code to do remote host, to ssh into the
control server and write your code, create your files , write your play book and run them on your termiinal, so this is what we call remote development

 

                            2SCRIPTS USED FOR VSCODE INSTALLATION & CONFIGURATION/REMOTE DEVELOPMENT
2 scripts were were used for vscode (script.sh to configure & vscode-install.sh to install) 
this script 'script.sh" does remote development, whereby you need to bc our ansible is on ubuntu, we need to ssh into the ubuntu ansible server then vi into
the ubutu server to create our playbk they run the playbk, so instead of using that we can use our vscode **mee, for remote development ie automating the whole sshing process 



2) "template_cloudinit_config" referred to in the ec2 instance block 
 59:18********* my summary from  NO.2 to  NO.4
we are passing 2scripts(userdata) in the resource blk for our instance (ec2.tf) so we using :"template_cloudinit_config" "user-data to pass the 2scripts;
a)to install ubuntu using ansible-install-ubuntu.sh 
b)to install vscode using vscode-install.sh

3)NULL RESOURCE
WE referred to script.sh which will configure the vscode
this script configures the vscode eg it needs to mk a dir in the home of ansible and so on,  so with the configuration
we did in the vscode in configuration file which is inside vscode, we can directly use your vscode code to do remote host, to login to 
the ec2instance and write your code, create your files , write your play book and run them on your termiinal, & thats what we call remote development


4)TERRARY OPERATOR :  its what always evaluates the condition based on what we select as our 'OS' 
in the variables file; we passed a variable that enables us select the 'os' we want to configure 
if i select linux in d variable (NO.3) then in the null resource, using local exec provisoner d template for var.os becomes templatefile("${ var.os == linux and therfore the
? itineray  indicates it as false & so the interpreter wil be bash then it will run d linux scripts (the templates for linux or windows will be used dynamically based on
our selection in the variable)


   5)                THINGS TO DO AFTER ANSIBLE HAS BEEN INSTALLED IN THE CONTROL SERVER & THE REMOTE/HOST SERVERS CREATED

Configuring managed nodes.
 https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/02-Configuring%20managed%20nodes/Managed-nodes_configuration.md

Launch/select required no of servers (managed nodes)
Use a key-pair to associate with your servers.
Log into your ansible control node using the key.pem that was downloaded
Make sure that you change the key permissions to 400
   $ chmod 400 ansible-key.pem
   $ ssh -i "ansible-key.pem" ubuntu@ec2-54-151-14-195.us-west-1.compute.amazonaws.com
   $ sudo su - ansible
   $ ansible

A) AFTER RUNNING ALL THE CODES/SCRIPTS,WE CONFIRM ANSIBLE HAS BEEN INSTALLED/WE ARE IN THE CONTROL SERVER BY RUNNING THE COMMAND ; ansible' , change the key permission,
ping the local host ie ansible

CLASS34 .... ansible can manage itselt, we can run any task in this server
              *********LOCAL HOST IS THE SERVER THAT IS RUNNING ANSIBLE        
so ansible has been able to ping the local host, its been able to ping itself, so this means that ansible is able to 
configure the server that its installed on/running on, this shows hw powerful ansible is, cos it can configure other servers n also the 
server that its running on bc local host is the server that is running ansible


i)THE CREATED USERS we created during the automated installation
in the instance resource blk/ec2.tf file, we passed a script to "create users"
  /etc/passwd file 
to find the users that hv been created i can check on the  etc passwd file.
cat /etc/passwd
we see one of the users called ansible


ii)  -M  option    (passing a ping module)
-m is an option  you pass when you want to pass a module 
then the module we wnat to pass is a ping module , this is what we use to test for connectivity 
so we hv used ping to test our connection, we are using -m option whenever we wnt to specify a module 
   ALSO; - a module, to create a file


      B) CONFIGURING OUR MANAGED NODES 

After the installaion of the servers 

Ansible Engine uses SSH Connection to connect and work with Manage nodes.
We can create SSH Connection in two ways:
a) Password Authentication 
(-K Option)  if i dnt pass the -k option it wil by default try to connect using the ssh keys
b) Password-less Authentication(This is with SSH Keys)
Provide the managed Nodes IP/FQDN in inventory file on Ansible Engine.
Test the connectivity by running:
$ ansible all -m ping


Class34
2:0946
there are 3 ways you can connect to a server for ansible to manage
1) private key
2) password 
3) the default option which is the default user with ansible with the public key exported ie you can access ansible without the key and that access is goin to be automated



 C)    CREATING THE HOST LIST/GROUPS (eg; web & db) & PING THE REMOTE/HOST/SERVERS
we created a host list & est an ssh connection
in the host file, we created 2 groups (DB for the 2ubuntu servers & web for the redhat server) we entered the particulars of the hosts ie the private ip of the host servers
we created in video 1
we used the private ips so that whenevr he shuts down his instances  he doesnt have to come in here to change the ips bc the ips changed
TO ping the servers: 
ansible@ip-172-31-27-28:  $ ansible all -m ping , This wil work to connect with ssh key  bt with PW we used; ansible all -k ping    
i hv just typed yes for the first server, i need to type yes 3times
 bt as i do that bc i hv 3severs in my inventory its trying to reach my inventory but its failing 

class34... 2:10:00
************** 
ansible needs to make a record of all the servers that its managing , which is in the ansible host file and the host file can be custom or default
using a default , passing a -i is optional  but for custom ts mandatory 



D) BY DEFAULT ANSIBLE TRIES TO COMMUNICATE USING SSH KEYS
so we see that while am trying to reach my instances its denying me bc by default ansible wil alwasy try to commusing ssh keys bt we havnt exchanged any sssh key 
so hw then can we connect to this user
we knw that we created a user and we gave the usr a PW, so for us to comm to this ansible  one of the things is that we ll hv to run ping command bt for us to comm we v to
 Pass the -k option

                                                          
 6a) pass a (-k option) (small k) FOR PW SSH CONNECTION/AUTHENTICATION  ...  we also need the PW to be able to transfer the ssh key/public key

      we pass this bc it prompts us for an ssh PW
   ***   In the resource blk; for user data we passed the script to "create ansible user, which will also pass the user passwd & enable PW authentication.
                          
Remeber i created a user in my script , created on this instances, the script that i ran had a user called ansible that was created in the servers
so bc the user has a pw therfr i can mak a ssh connection using a PW 
we had enabled PW authentication, we had changed it to yes frm our script.


  6ai)  -u  option  (user)
WE ALSO CREATED A USER in the db grp & COMMUNICATED WITH THE USER mark   
ansible@ip-172-31-27-28   ansible db -m ping -u mark -k 
 hv nt exchange any key with mark so i hv to pass a - k option 
we also established ssh connection withour passowrd ie using ssh keys


class34, video3
Variables:
  1. runtime variables 
  2. playbook variables 
  3. host_vars variables 
  4. group_vars variables


6aii)   CREATING VARIABLES IN THE HOST FILE
when we use variable in the host file, it helps us pass the ssh PW inside the host file then we run the ping all command on the cl
Also inside the host file, we can define the specific user we want to connect to

DIFF BTW HOST VARIABLE & GRP VARIABLE
     ***meeee, the host variable  is created with the server ip adress, then the user name  & the ssh password BUT for grop var we use only the user name & the ssh password



 HOST  VARIABLE
For Automation which is convenient, instead of me passing these options on the command line,i can pass the ssh PW within the host file ie a host variable 
 am passing the This on the host level, am passing host variable within the host file so that i dnt hv to keep pasiing them on the cl

[db]  ****host variable 
 172.31.27.37  ansible_ssh_pass=ansible  ... so we pass this inside the host file
172.31.19.131   ansible_ssh_pass=ansible

then on the command line we can run: ansible db -m ping

we can also specify the user to connect to in the host file/CREATING A USER VARIABLE AT THE HOST LEVEL TO CONNECT TO
You can also connect using a different user by specifying the user & the user PW in the hosts file.
[db]
 172.31.27.37  ansible_ssh_pass=ansible
172.31.19.131   ansible_ssh_pass=mark ansible_ssh_user=mark          * so now we are specifying that anytime we want to mk a conection to this instance the user needs to be 
                                                                      mark and we passing marks PW , bc otherwise it wil use the default user


1.53.0 ##########  we knw that host variable has the hightest priority
if variables are defined at host level, it takes precedence over varaibles defined at group level
meee, ie the servers on the host var will run with the conditions/passwd associated with the host var 


6aiii)
 HOST LEVEL PRECEDENCE
 **meeeeeee, This is a situation where we have both host var & group var defined in the host file, the var defined at the host level takes precedence
bc both the hostt var & the group var are defined inside the same host file, & its the same ping all command (ansible db -m ping) that will be used on the cl, the var at the 
host level connects first/ takes precedence eg even if the ansible user which is the default user belongs to the grp var, we will see that the servers at the host level will
have the same privelleges like the ansible user like the illustration below where we craeted a file.



CREATING A FILE TO CONFIRM THE HOST LEVEL PRIORITY
we will see a file was created in the home of ansible user (ansible) whose var was defined at the grp level & also in the home of Mark whose var was defined at the host var 
***i bliv it also created it in the home of Mark bc we defined mark at the host level if not the file will be created only in the home of ansible user
  ill practice this ie ill create group variable then create a file & see if the file is created in the home of mark & the ansible user or only in the home of ansible user



6aiv)   WE CAN ALSO CREATE GROUP VARIABLES
but also ansible gives us what is called group variables 
so instaed of duplicating this and writing this on evry host file,     ; 172.31.27.37  ansible_ssh_pass=ansible
we can create a group variable    ***meeee using only the username & ssh PW

Example
    [db:vars]
    ansible_ssh_user=sammy
    ansible_ssh_pass=abc123       


db            ***so we can delete this (host var) bc we are using the grp level var
172.31.27.37 
172.31.19.131  

[db:vars]                 *** this is the group var we want to use
    ansible_ssh_user=ansible               ********** so we are saying for this grp of servers (in the db group)the ssh PW is this 

 ansible db -m ping
its will use the grp level variable, bc we pased the var inside the host file

 ******** now i can delete the host variable 7Avii) bc we ar ultilizing the grp variable 
   


6b) Password-less Authentication(This is with SSH Keys)
 1st you need to generate an ssh ,it needs to be generated in the home of ansible, eneure you are in the home of ansible and your generating it on your ansible 
control server then transfer the key to the remote host ie the 3 host servers we created, We can also copy the key to a specific user
bc ansible is the default user, i can ssh-copy-id then the private ip of the remote server
we also need the PW to be able to transfer the ssh key/public key


7)ANSIBLE FACT       (pingpong, meaning success)

this hostfile is still the password for ansible and when ansible goes ther its looking to see if ansible has been installed in those servers
   'discovered_interpreter_python": /usr/binpython3
it uses what is called a module called anible fact, it goes and FINDS the interpreter there, it discovers python is availabeland thefroe it says ping pong meaning it is a 
success

  ITEM POTENCY
Item potency of ansible, ansible will not recreate what it has already created

8)  HOW TO VERIFY IF YOU ARE IN THE CONTROL NODE .. RUN : anisble
   lets say i want to comm with anoda user oda than the anisble default user 

9) WHAT IS ADHOC COMMAND 
https://github.com/LandmakTechnology/Ansible-mc-series/tree/main/03-adhoc-commands
An Ad-Hoc command is a one-liner ansible command that performs one task on the target host(s)/group(s).
Unlike playbooks — which consist of collections of tasks that can be reused — ad hoc commands are tasks that you don’t perform frequently,
such as restarting a service or retrieving information about the remote systems that Ansible manages 

This command will only have two parameters,
the group / target of a host that you want to perform the task and
the Ansible module to run.
eg:
ansible 172.19.16.16    -    ** i could pass an ip addresss , that becomes my target 
ansible 172.19.16.16    -m ping                   *********** i can  passa amodule, mayb i wnat to ping that server 


10)The basic syntax of an Ad-hoc command is:
$ ansible [ -i inventory_file ] server1:server2:Group1:Group2 -m [-a arguments]
  bc now am nt using the default host , am using an inventory, a file that  has ip adresses of the server
or i can pass them like this, seperate them with semi colums  ; server1:server2:Group1:Group2 -m [-a arguments
-m  is for my module 

11)ARGUMENTS
- a is  for argument  , this just means if i passs a module like a file  what do i want to do, i can pass some commands 
so arguments are commands am passing on that particular module 

13)so the default ansible configuration file is found in this location, in which we can make various settings like locating of our inventory file or host key checking
so any type of configuration that we want to set for ansible we will do it in the ansible config file , ansible.cfg 
but this configuration file we can put it any where as long as we reference it bc when you run ansible, the first tin is ansible will read the configuration
 ***** 
1:21:00

   bc whenevre we run ansible, the 1st tin is ansible will read the configuration file , we can the define the configuartaion file in diff locations with the given priority
so whener we run ansile, it wil look for the config file based on the priorities


13)   MODULES
https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/04-Ansible%20modules/Type_module.md

They are the main building blocks of Ansible and are basically reusable scripts that are used by Ansible Ad-hoc and playbooks.
These are small programs that do some work on the server.
E.G  we hv a module called ping 
this is a small program, this is an ansible program that is written in ptyhon

Ansible comes with a number of reusable modules.
it is synonmous to modules on tefrm registry, u can all a vpc module, an ec2 module, u can reuse them as many times AS POSSIBLE
it has already been written, so you only need to referene them and it will be called frm the registry
so its the sam ething that hasppens here 

TYPES OF MODULES
command,shell,file,copy,fetch,apt,service,user module,setup module, debug module.
copy: a)From ansible control node to remote node/ b) From one location in remote node to another location in remote node
Fetch: a)Will copy the files with a directory structure; ansible all -m fetch -a "src=./hosts dest=./"  b)To fetch the file without a directory structure, use the flat=yes option

CLASS34:
https://docs.ansible.com/ansible/2.9/modules/list_of_all_modules.html
these are the doumetations about modules, so if you dnt want to use command line, you can use the console 

 ansible modules are python scripts that can be invoked in a playbook
when it comes to bash shell scripting, there are a lot of work that needs to be done but when it comes to ansible, those job has already been done and they hv been modulized
into what is called ansible module


WHAT IS ADHOC COMMAND 
An Ad-Hoc command is a one-liner ansible command that performs one task on the target host(s)/group(s).
ad hoc commands are tasks that you don’t perform frequently, such as restarting a service or retrieving information about the remote systems that Ansible manages.
This command will only have two parameters,
the group / target of a host that you want to perform the task and
the Ansible module to run.









start:

                      RECAP FROM ansible 1
continuation frm 1st video
********** 28:34
        

38:00 .. using mail delivery to xplain the pushing of programmes frm the controller to the home of the user in the host/remote nodes


                                      
 A)               USING SCRIPT TO AUTOMATE THE CONFIGURATION OF REMOTE DEVELOPMENT 
*****this script 'script.sh" does remote development, wherby you need to bc our ansible is on ubuntu, we need to ssh into the ubuntu server then vi into
the ubutu server to create our playbk they run the playbk, so instead of doing that we can use our vscode **mee, for remote development ie automating the whole sshing process



*********** 52:00   in data "template_cloudinit_config" "user-data" ,   we passed 2scripts (script.sh & vscode-install.sh)
 script.sh is to configure the vscode  
content      = file("${path.module}/vscode-install.sh")
i did dis automation so that when we start writing playbooks it wil be easier for you guys
this is a script that does remote development, wherby you need to bc our ansible is on ubuntu, we need to ssh into the ubuntu server then vi into the ubutu server to create
our playbk they run the playbk, so instead of using that we can use our vscode **mee, for remote development ie automating the whole sshing process 



B)      
EXPLAINING THE CONFIGURATION THAT IS ENABLED/INPUTTED INSIDE THE CONFIGURATION FILE IN VSCODE FOR REMOTE DEVELOPMENT DURING THE AUTOMATED INSTALLATION

#####    **mee,for the remote development,After the installation & configuration of vscode, we need to input the 'host ansible info' for the ssh congfiguration 
                            to be able to create files & write playbook as will be sen in video3
******52:23
opens the vscode to show us:  
if you opens the vscode, (if u watched the vscode configuration video i sent) in your vscode  if u look at the setting comand pallet thers a remote host, you can connect to
a remote host, you can connect to an ec2 instance but b4 you connect 
to that remote host, you need to configure it,you need to configure your ssh so that ... # ### your configuring smt like this:

Host ansible:
   HostName   35.07.199.239                           ******* ie is the ip address of the server that you are  creating 
   User ansible 
   IdentifyFile ~/Downloads/elk-instance.pem               ********** once you pass this inside of your ssh config file then you are able to directly use your vscode code 
                                                       to do remote host, to login to that ec2 instance and write your code, create your files , write your play book 
    and run them on your termiinal, so this is what we call remote development

******* for this to happen we passed the vscode installation script:
 vscode-install.sh
this the script thats goin to install and configure vscode   **i bliv he meant the script.sh will configure vscode
but apart frm that,we hv this (another) script:script.sh  this is the script that will configure vscode, this is d script that will install vscode and ill show you shortly
hw it works 


C)                                     INSTALLING VSCODE & CONFIGURING VSCODE FOR REMOTE DEVELOPMENT

  why do we hv 2diff scripts to install vscode (script.sh and vscode-install.sh )   ?????
i bliv vscode-install.sh will install vscode WHILE script.sh will configure the vscode for the remote development
and this configuration ENABLES/mee..inputs the configuration we did in the vscode in configuration file which is inside vscode & that way can directly use your vscode code
to do remote host, to login to the ec2instance and write your code, create your files , write your play book and run them on your termiinal, & thats what we call remote
development


NO.1)                         ####script.sh  ***meee, script to configure vscode & its referred to inside the null resource WHILE vscode-install.sh is referred in ec2 block
   #!/bin/bash

sudo mkdir /home/ansible/.ssh/                                      ***********  it needs to mk a dir in the home of ansible
sudo chown -R ansible:ansible /home/ansible/.ssh                       ********  ansible needs to own that dir
sudo cp /home/ubuntu/.ssh/authorized_keys /home/ansible/.ssh/          ******* copy the key frm the ubuntu home n copy it in the ansible server
sudo chown ansible:ansible /home/ansible/.ssh/authorized_keys        
sudo chown -R ansible:ansible /etc/ansible                              ********* basically, ansible needs to own that etc/ansible


NO.2)
*******55:51                  i also added 2scripts
            now if your running vscode on linux this is the script that ur goin to use , it is like template, it is goin to use a template to dynamically replace all that

      linux-ssh-script
 cat << EOF >> ~/.ssh/config

Host ${user}
   HostName ${hostname}
   User ${user}
   IdentityFile ${IdentityFile}
EOF

********** and if your running on windows: 

  NO.2ii)         windows-ssh-script.tpl
   
add-content -path c:/users/Ken/.ssh/config -value @'

Host ${user}
   HostName ${hostname}
   User ${user}
   IdentityFile ${IdentityFile}
'@

********* 57:05

NO.3)
*********in our variable file i pased a variable called "os"

  variable "os" {
  type    = string
  #default = "linux"            ****** this is where you need to make your selection
}

this os here, once you select it is using what is called a null resource provisoner 

NO.4)    
***********  Null resource.tf
     we have a local exec provisoner, it selects the script, hv passed a variable so if you choose linux then the template file (NO.2) thats going to run will be linux.ssh
script but if you choose windows, the template script (nO.2ii) that will run wil be windows-ssh-script.tpl

  
NO4i)                         TERRARY OPERATOR

how do you mk your script, your interpreter you hv to select it here, based on your selection, the ? is called itinerery,terrary operator, its what always evaluates the
condition,
so am saying , this  var.os == "windows" ? , is it equals to windows, if this is true then your interpreter will be powershell, then it is goin to run that windows scripts
then if it is nt then your interpreter wil be bash, 
so this ? is called a itenery operator, it always evaluates, its a bullion variable, it always evalustes either true or false



                                      null resource.tf  (local exec provisioner)
   
resource "null_resource" "vscode-config" {
  depends_on = [time_sleep.wait_for_instance]


  connection {
    type        = "ssh"
    host        = aws_instance.ubuntu.public_ip
    user        = "ubuntu"
    password    = ""
    private_key = file("~/Downloads/ansible-key.pem")
  }

  provisioner "file" {
    source      = "script.sh"
    destination = "/tmp/script.sh"
  }

  provisioner "remote-exec" {
    inline = [
      "chmod +x /tmp/script.sh",
      "sudo sed -i -e 's/\r$//' /tmp/script.sh", 
      "sudo /tmp/script.sh",
    ]
  }

  provisioner "local-exec" {                                          ******* a local exec provisoner, it selects the script, 
    command = templatefile("${var.os}-ssh-script.tpl", {
      hostname     = aws_instance.ubuntu.public_ip
      user         = "ansible",
      IdentityFile = "~/Downloads/ansible-key.pem"
    })
    interpreter = var.os == "windows" ? ["powershell", "-Command"] : ["bash", "-c"]    *****  your interpreter you hv to select it here
  }                                           ******** is it equals to windows, if this is true then your interpreter will be powershell
}

resource "time_sleep" "wait_for_instance" {
  create_duration = "180s"

  depends_on = [aws_instance.ubuntu]
}


                              OUR KEY IS REFERENCED IN THE NULL FILE
mk sure your key is available in your env , bc for e.g  we referenced our key in the null file, the resource blk for our instance ec2.tf 


  5)                        APPLYING OUR CODE/SCRIPTS   (to configure 1 to 4 above)
**********59:50

                                              
   terafrm files  ls 
i have all those files there so ill run 
   terraform files   terrafrom init
initializes the backend
terfrm plan
Enter value:linux          this variablw we made it rEQ so that you can choose what operating system your using , am using a mac computer, the os is linux so il enter linux
                           if your uisng select windows so its able to setup your vscode for you 



                               HE REMOVED THE SSH CONFIGURATION IN VSCODE ( he had probably ran the script before & thats why 'host ansible info' was in the vscode )
**meee, it was removed bc the installation script will dynamically add the host server ie ansible control server & input the 'host ansible info' in vscode, which helps us
dynamically ssh into ansible server after which we can connect to host (an optin in vscode) & write playbooks 
as seen in video3,

*********1:02:23
in vscode, he opened the config file and removed The vscode ssh configuration  in A) above 
he said he wants to configure the vscode so that he can directly ssh into in server .. 
 

   **** 
 terfrm plan
  Enter value:linux         ,, enter
it has ran the plan, now its goin to create for me host 
these are severs that ill use for demo to connevt to then its creating for me this ubuntu server wich ill instal ansible in am using a script to install ansible on this 
ubuntu server 
am also creating a redhat host but am not goin to use this but am passing that user data for the redhat on this 
bt ill us ethe ubnutu wher ill install ansible , then 
these are the 2sevrers ubuntu host that am gonna use for them to be anble to connect to them 

   terfrm apply -auto-approve
enter value: linux
now it wil run and start craeteing my ec2 instances and onceits done it is also goin to automaticlaly configure my vscode bc have automated the process so its goin to 
create my instances in AWS, so il log into my aws and show you
so all this tins if u went tru the last vidoe, i went tru that 
it is goin to bootsctrap, so i use this timeslip buy time b4 my ssh connects to it , before i start instakling my script to it 
right now the instance is bootstrapping 
my instance are initializing this is my ansible 
it is using the time slip

again you can jst run the script the same way as long as you hv the key passed, you hv that key in your local env and u hv passed it , it wil install ansible for you
or you can also choose to run it manually by running that particular script, 
creating an ec2 instance and run it manually on the ec2 instance ....( i bliv the manual way prof did it in class34 ansible2)
bt bc u guys are engr now , we can mk our work much easier  by automating the process
and bc we hv it in code, this is repeatable , so u can just create your instance and once you are done , you can run destroy so you dnt have to keep them running 
you use your ansible, do evrytin as code then you can run destroy 


1:07:32***************  hard time getting the link for the repository
showing deleted
so he pasted the in the class channel


 5i)    DUE TO THE INSTALLATION AUTOMATION WE DYNAMICALLY ADDED THE ANSIBLE HOST(CONTROL) IN VSCODE & SSH INTO THE CONTROL SERVER WHERE WE CAN WRITE & EXECUTE THE PLAYBKS 
    ****meee, 
 bc in the vscode we hv dynamically added the host ie ansible control sever, & ssh into the ansible control server, 
so we can write our playbooks & execute them in the vscode instead of using the vscode to ONLY write the play book then use gitbash to ssh into ansible control server,creat 
a vi & paste your code inside there inorder to excecute it
    
1:11:38   ***********************
ok so this is what i wanted us to see that because of the automation that  i had, it has dynamically add the ansible Host and we can see the ip adresses 54.218.139.205
(in the output)
the user is ansible and it has dynamically added the key , my key is in my downloads
so now my vscode has been configured am able to connect to that particular instance but we wont use it tonight , we will use it so i can easily connect 
click on connect in vscode and hes connected to ansible

                                    CREATING PLAYBOOK IN THE CONTROL SERVER IN VSCODE
 it has now log me inside the home of the home ansible control server and inside this home of ansible i can create a file
he created text.txt
  so we will use this when we are writing our playbk
we can just create our playbks here and be able to execute them frm here instead of you writing the playbk in vscode then using ur gitbash , u ssh into ansible, you create 
a vi, and paste your code in there      ...
 
so this is an automation that i added to this to help you configure, but we wil use this when we will be working with playbks 
so lets leave that for now



1:14:37
so we hv been able to install ansible software , 2 instances
in output it returned the private ip of the 2ubnuntu instances  and it aslo returned th public ips 
so far we hv covered our introduction


  INTERVIEW QUESTION
default home of ansible is /etc/ansible 

This directory will consist of:
a) ansible.cfg
b) hosts    and 
c) roles dir


1:16:18  **********************************
to connect to the ansible server 
he split his IDE terminal
ssh into the ansible srver am doin it maually
cd into downloads cos thats where his key is 
paste the ssh link

                                          HOST KEY CHECKING
host key checking : are you sure you want to continue connecting
anytime you want to connect to a linux server or instance you wil be asked if you wnat to continue checking
we dont wnat this in automation
if you are automating, and you are running a pipe line we dnt wnat the pipe line to stop and as you to automate thats why we are configuring key host checking and set it to
false so that asnible will nt ask us if we want to connect to our host or we want to stop connecting
thats a process that we will see what host key checking is 


host key checking : are you sure you want to continue connecting

yes 
we are now inside our ubuntu instance
inside of this instance, we knw that we ran our script, one of the script was to create for us a user called ansible


  5iii)         /etc/passwd file 

to find the users that hv been created i can check on the  etc passwd file.
cat /etc/passwd
we see one of the users called ansible 
so the ansible user has been configured and he has a home , the shell is bash 
sudo su - ansible          , now in the ansible home 
ansible@ip-172-31-27-28:
to check if ansible has been installed
bc i installed the ansible software as an ansible user i can run ansible
ansible 
yes ansible software has been installed 
the default ansible home dir is etc/ansible so i can cd into it
ansible@ip-172-31-27-28: $ cd /etc/ansible 
ansible@ip-172-31-27-28: $/etc/ansible$ ls     ,, am expected to these 2 files and roles
ansible.cfg hosts roles
so ansible.cfg  , this is your configuration
ansible needs to be configured  right

                                               DEFAULT ANASIBLE LOCATION
so the default ansible configuration file is found in this location '/etc/ansible/ansible.cfg., in which we can make various settings like locating of our inventory file or
host key checking so any type of configuration that we want to set for ansible we will do it in the ansible config file , ansible.cfg 
but this configuration file we can put it any where as long as we reference it bc when you run ansible, the first tin is ansible will read the configuration
 ***** 
1:21:00

   bc whenevre we run ansible, the 1st tin is ansible will read the configuration file , we can the define the configuartaion file in diff locations with the given priority
so whener we run ansile, it wil look for the config file based on the priorities, it wil check if we pass env variable/mee.reference it, if its nt there it wil check the pwd
so if i created a playbk where my ansible.cfg is , ansible wil use the file to read the configuration thats the priority, if it doest find it it wil go to the home of the
user and then the default 


****** so this is what the ansible configuration structure is

 
NO.6)                                CONFIGURING OUR MANAGED NODES

 #############  haven said that, lets go now to configure our remote node /managed nodes
for us to configure thses managed nodes:


 https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/02-Configuring%20managed%20nodes/Managed-nodes_configuration.md

  Configuring managed nodes.

Launch/select required no of servers (managed nodes)
Use a key-pair to associate with your servers.
Log into your ansible control node using the key.pem that was downloaded
Make sure that you change the key permissions to 400
   $ chmod 400 ansible-key.pem
   $ ssh -i "ansible-key.pem" ubuntu@ec2-54-151-14-195.us-west-1.compute.amazonaws.com
   $ sudo su - ansible
   $ ansible


***************  ie 
first we launched our servers which we are calling  managed nodes, we used a key pair to assosciate with our servers
we hv logged into our control node using a .pem key and making sure the permisson is chmod400 

****** we knw that when your connecting a linux server to a linuxserver the key permision needs to b 400 otherwise it says ur key is too open 
to ensure our key permissonis set to 400 w eare ableto ssh into that server and run anisible just like we did 
we are able to test to see if ansible has been created 
now ansible uses ssh , we can create ssh connection in 2 ways 

/etc/passwd file 

to find the users that hv been created i can check on the  etc passwd file.
cat /etc/passwd
we see one of the users called ansible
7)            Ansible Engine uses SSH Connection to connect and work with Manage nodes.



                        WE CAN CREATE SSH CONNECTION IN TWO WAYS:

a) Password Authentication
b) Password-less Authentication(This is with SSH Keys)
Provide the managed Nodes IP/FQDN in inventory file on Ansible Engine.

Test the connectivity by running:

$ ansible all -m ping

************  ie                  1:26:18

7A) we can use PW authentication 

for us to use those ssh keys, we will need to do some configuration 
but first when we are testing the connectivity for right now, we wnt to tast our connections 
   we ll run this command 
$ ansible all -m ping                ******** all  , is what is called your inventory, we ll go tru that

All ansible commands starts wth the keyword ansible , this is what invokes ansible software

******** all  , is what is called your inventory, we ll go tru that


 7Ai)  ***********       -M  option    (passing a ping module)

-m is an option  you pass when you want to pass a module 
then the module we wnat to pass is a ping module , this is what we use to test for connectivity 

  so right now i can cd baack

 ansible@ip-172-31-27-28: $ cd /etc/ansible
 ansible@ip-172-31-27-28:/etc/anisble$ ls
ansible.cfg hosts roles
ansible@ip-172-31-27-28:/etc/ansible$ cd -
/home/ansible                          am in the home of anisble now 
ansible@ip-172-31-27-28:  $ ansible all -m ping                    ******* testing for connectivity
  the provided list is empty , only localhost is available 
note that the implicit localhost does not match 'all'          **** bc i inside of my host, i havent passed any ip address for the servers i wnt to maintain/configure
                                                                       the list is empty, says only localhost is available so let me use it as my inventory 
so now ill pass local host 
ansible@ip-172-31-27-28:  $ ansible localhost -m ping
 success

                                                LOCAL HOST IS THE SERVER THAT IS RUNNING ANSIBLE
                                   ******* so ansible has been able to ping the local host, its been able to ping itself, so this means that ansible is able to 
                                     configure the server that its installed on/running on, this shows hw powerful ansible is, cos it can configure other servers n also the 
                                         server that its running on bc local host is the server that is running ansible


 7Aii)    CREATING THE HOST LIST

1:29:44
so we hv used ping to test our connection, we are using -m option whenever we wnt to specify a module 
our host list is empty now lets try and popuplate our host list 
when we look at our output 

splits his terminal  and on the 2nd terminal   we see 
outputs 
ansible_publicip = "54.218.138.205"
instance_private ip =[
(base) terrafrm files git :(main) terraform output

we see the public and private ips for our host servers

so lets go to our host file and try to enter these particular hosts into our host file 
we cd 

 ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28: $  vi host 
it will give you examples of hw u nid to mk your entries into this particular files                  ********* 1:31:30

                         PUTTING THE REMOTE SERVERS IN GROUPS IN THE HOST FILE
he scrolled down to create a grp called DB
he used his private ips do that whenevr he shuts down his instances  he doesnt have to come in here to change the ips bc the ips changed
he also created anoda grp called web
here he put the redhat  private instance ips 
then saved
now these are the remote host i want to manage 

ansible@ip-172-31-27-28:  $ ansible all -m ping       
ae u sure you wnat to add ...  yes
i hv just typed yes for the first server, i need to type yes 3times

************ bt as i do that bc i hv 3severs in my inventory its trying to reach my inventory but its failing 
host added, permission denied
so we see that while am trying to reach my instances it sdenying me bc by default ansible wil alwasy try to commusing ssh keys bt we havnt exchanged any sssh key 
so hw then can we connect to this user
we knw that we created a user and we gave the usr a PW, so for us to comm to this ansible  on eof the things i sthat we ll hv to run ping command bt for us to comm we v to



                                                           ESTABLISHING AN SSH CONNECTION TO ALL THE HOST SERVERS USING PW AUTHENTICATION
7Aiii)
                          (-k option)  **if i dnt pass the -k option it wil by default try to connect using the ssh keys


*********** pass a -k option (small k) 
we pass this bc it prompts us for an ssh PW

  ansible@ip-172-31-27-28:  $ ansible all -k ping 
ssh password  : ansible , you cant see it i typed it 
success
now it will connect bc remeber i created a user in my script , created on this instances, the script that i ran had a user called ansible that was created in the servers
so bc the user has a pw therfr i can mak a ssh connection using a PW 
we had enabled PW authentication, we had changed it to yes frm our script.

  **********  so you hv to pass a -k option so it prompts ypu for a PW 


     
    INTERVIEW QUESTION                                ****   1:37:27
why do we need a -k option when ruuning an ansible  adhod command

ANS:
 we use it when run ssh AND so that we will be prompted for an ssh PW 

     

  ************ 1:37:40                       CONNECTING TO A PARTICULAR GROUP OF SERVERS
wit this hv been able to pass my PW and v been able to connect to my server
if i need to coonect to the web, just to the web grp  so i can pass ansible and just pass web

     ansible@ip-172-31-27-28:  $ ansible web -m ping 
172-31-16-16    unreachable

 but bc i hv a user called ansible who has a PW, if i dnt pass the -k option it wil by default try to connect using the ssh keys

IN THE web i only hv 1host wich is the redhat bc i hv a user who  is called asnible i need to pass a -k option so that it prompts me for a PW 

         ansible@ip-172-31-27-28:  $ ansible web -m ping -k
172-31-16-16    successful

then ill enter my PW ansible  and then 
it ill mk my conncetion 
the process is the same if am connecting to the DB group and it wil mk a connection to the 2 instances in that grp 
172-31-19-131   successful
172-31-27-37    successful
                       

   ********** so here hv been able to est a ssh conection with my servers

but which user am i communicating with the default user, that user is the default user wich is ansible 
let say i want to comm with a diff user lets says called mac
let me ssh into this instance 172-31-19-131   

           ansible@ip-172-31-27-28:  $ ssh 172-31-19-131   
           ansible@ip172-31-19-131's password  :  ansible 

welcome to ubuntu 

so hv logged dinto this instance 
 ansible@ip172-31-19-131: $ cat /etc/passwd

i see i only hv a user called ansible


7Aiv)

1:40:54                                 CREATING ANOTHER USER   (mark)
****************
LETS create the user called mark

 ansible@ip172-31-19-131  $ sudo adduser mark
 new passwrd
retype password   : mark
   
ansible@ip172-31-19-131     $ cat /etc/passwd
now i hv a user called mark



                                     HOW TO VERIFY IF YOU ARE IN THE CONTROL NODE .. RUN : anisble
   lets say i want to comm with anoda user oda than the anisble default user 

illustration:
ansible@ip172-31-19-131     $ exit  .. ... we exit from the user mark


if i ssh  back to into mark
  ansible@ip-172-31-27-28:  ssh 172.31.19.131
password :ansible 
welcom to bnuntu

if i run ansible 
ansible@ip172-31-19-131  ansible
command nt found
bc  ansible is nt installed in this 
so i only hv one controll node 

ansible@ip172-31-19-131    exit

back to my control node
ansible@ip-172-31-27-28


7Av)
  *********1:43:00                        COMMUNICATING WITH THE USER mark

  ansible@ip-172-31-27-28   ansible db -m ping
it wil try to comm with the default ansible user using a ssh key but bc am nt using any key, hv nt passed any key, with that i hv to use a PW 
172-31-19-131   false
172-31-27-37    false
  ansible@ip-172-31-27-28   ansible db -m ping -K            ****i need to pass -k option but if i pass it , it wil stil be d default user that am comm with


7Avi)
************         -u  option  (user)

if i want to comm with a specific user, ill pass -u option , this just means user
i wnat to ping a usr called mark
  ansible@ip-172-31-27-28   ansible db -m ping -u mark
172-31-19-131   false
172-31-27-37    false

bt if i do that its goin to fail bc mark has a PW, hv nt exchange any key with mark so i hv to pass a - k option 
   ansible@ip-172-31-27-28   ansible db -m ping -u mark -k              ******* now am prompted for  a password 
ssh password :mark
172-31-19-131   success                     ********** bc it found a user called mark, who has a password 
172-31-27-37    false                       ********** here it failed bc i dnt v auser called mark in this server 
 
ansible@ip-172-31-27-28 

so i see ethat if i want to com with a specific user then i need to specify -u option
so am trying to use ssh to connect to my remote host 

  *********** so looking at managing remote host, we can use password authentictaion, pass a -u option but then i aLso eed to pass a -k option so that it prompts me for a PW 



    **meeeeeee      CREATING VARIABLES IN THE HOST FILE
when we use variable in the host file, it helps us pass the ssh PW inside the host file then we run the ping all command on the cl
Also inside the host file, we can define the specific user we want to connect to

DIFF BTW HOST VARIABLE & GRP VARIABLE
     ***meeee, the host variable  is created with the server ip adress, then the user name  & the ssh password BUT for grop var we use only the user name & the ssh password




   7Avii)                                    HOST AND GROUP VARIABLE

1:46:51   ***************
but what am doing right here is nt very convieneint especially when it comes automation so ansible give syou what is called either host or grp variables
so instaed of me passing these options on the command line,i can pass the ssh PW within the host file 


        Host variables
                                        CREATING PW FOR THE HOST FILE VARIABLE
If were run the ping command on all servers, we will get permission denied on the servers that need a password to authenticate.
Instead of that, we can provide the password in the host file
This is at a host level or host level variable.
Host level variables

    **Host variables**
    [db]
    172.31.13.31  ansible_ssh_pass=ansible

SO if i:

 ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28:cd/etc/ansible  vi host         i have my host listed here
so instead of passing the PW on the CLI evrtime, i can pass on the HOST file
[db]
 172.31.27.37  ansible_ssh_pass=ansible
172.31.19.131   ansible_ssh_pass=ansible

*********** am passing this on the host level, am passing host variable within the host file  so that i dnt hv to keep pasiing them on the cl
havin done this was i run the command ping, it wil mk the connection 
bc intead of me passing a -k to be prompted for  a PW, i hv created a host varaible , hv passed the password within th host file
this is what is called a host variable

   
 ansible@ip-172-31-27-28   ansible db -m ping 
success


     7Aviii)

******* 1:50:07            ANSIBLE FACT       (pingpong, meaning success)


this hostfile is still the password for ansible and when ansible goes ther its looking to see if ansible has been installed in those servers
   'discovered_interpreter_python": /usr/binpython3
it uses what is called a module called anible fact, it goes and FINDS the interpreter there, it discovers python is availabeland thefroe it says ping pong meaning it is a 
success

but for  

 ansible@ip-172-31-27-28   ansible web -m ping 
failed                                                  ** bc i havent passed a variable 


7Aix)
************
                                    CREATING A USER VARIABLE AT THE HOST LEVEL TO CONNECT TO/SPECIFYING A USER TO CONNECT TO AT THE HOST LEVEL

1:51:11  


what if we wnat to mk our default user anytime we connect with the server , our default user wil be mark
so we can also passs that as a host variable 

You can also connect using a different user by specifying the user in the hosts file.
    [db]
    172.31.13.31  ansible_ssh_user=sammy ansible_ssh_pass=abc123
  
       ie
[db]
 172.31.27.37  ansible_ssh_pass=ansible
172.31.19.131   ansible_ssh_pass=mark ansible_ssh_user=mark          * so now we are specifying that anytime we want to mk a conection to this instance the user needs to be 
                                                                      mark and we passing marks PW , bc otherwise it wil use the default user

then save 

  ansible@ip-172-31-27-28   ansible db -m ping 

 172.31.27.37  success            ********* the connection is been made by the ansible user who is the default user
172.31.19.131   sucesss        ******** the connection is been made to mark

   this is what is called a host variable 
but also ansible gives us what is called group variables 
so instaed of duplicating this and writing this on evry host file,     ; 172.31.27.37  ansible_ssh_pass=ansible
we can create a group variable   **meeeeee, using only the username & ssh PW


1;52:55

7Ax)
********                            GROUP VARIABLES

     **Group variables:**
    [db:vars]
    ansible_ssh_user=sammy
    ansible_ssh_pass=abc123
                                              CREATING GROUP VARIABLE

so ill vi 
ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28: $  vi host

   and in the file 

db            ***so we can delete this (host var) bc we are using the grp level var
172.31.27.37 
172.31.19.131  

[db:vars]                 *** this is the group var we want to use
    ansible_ssh_user=ansible               ********** so we are saying for this grp of servers (in the db group)the ssh PW is this 


 ******** now i can delete the host variable  (db) bc we ar ultilizing the grp variable 
   


if i ping 
ansible@ip-172-31-27-28   ansible db -m ping 

 172.31.27.37  success            ********* the group level varibale is successful
172.31.19.131   sucesss        ******** 

 
7Axi)                                         
                    HOST LEVEL PRECEDENCE
 **meeeeeee, This is a situation where we have both host var & group var defined in the host file, the var defined at the host level takes precedence
bc both the hostt var & the group var are defined inside the same host file, & its the same ping all command (ansible db -m ping) that will be used on the cl, the var at the 
host level connects first/ takes precedence eg even if the ansible user which is the default user belongs to the grp var, we will see that the servers at the host level will
have the same privelleges like the ansible user like the illustration below where we craeted a file.

 we knw that host variable has the hightest priority
if variables are defined at host level, it takes precedence over varaibles defined at group level
we will see that the server (172.31.19.131)specified at the host level connects first, but in the illustration for group var & host var 172.31.19.131, didnt connect first


7Axii)   for example 
     ***host variable
     172.31.27.37 
     172.31.19.131   ansible_ssh_pass=mark ansible_ssh_user=mark     *** variable defined at host level


*****grp variable
   [db:vars]
    ansible_ssh_user=ansible           ***var defined at group level

   if i ping 
ansible@ip-172-31-27-28   ansible db -m ping

we see the server (172.31.19.131)specified at the host level connects first, but in the illustration for group var & host var 172.31.19.131, didnt connect first
172.31.19.131   sucesss        ******** meee,   The specified user connection on the host level is successful
     172.31.27.37  success            ********* this is connected on the group level



     7Axii)              CREATING A FILE TO CONFIRM THE HOST LEVEL PRIORITY
we will see a file was created in the home of ansible user (ansible) whose var was defined at the grp level & also in the home of Mark whose var was defined at the host var 
***i bliv it also created it in the home of Mark bc we defined mark at the host level if not the file will be created only in the home of ansible user
  ill practice this ie ill create group variable then create a file & see if the file is created in the home of mark & the ansible user or only in the home of ansible user

****** we can test that by creating a file by using a file module

Create a file on the managed nodes to see which user its working with.

$ ansible all -m file -a "path=test.txt state=touch"

   ie am -m, am passing a module, -a , means what argument am i passing, i want to create a file, am using -m to specify its a file module then what are the arguments, ill
put the arguments in the quotation mark " ", where do i want to create the file, i can just give it a name or ican say the path, = i want to create a file called test.md
and the state is touch , when we are creating a file we always say , we touch the file, so the state is touch

******   1:59:41

   so ill cd out
ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28:/etc/ansible  cd
ansible@ip-172-31-27-28: 
ansible@ip-172-31-27-28: ansible db -m file -a "path=test.md state=touch"          ****** am creating a file called test n it will be in the pwd of DB group
 172.31.27.37 
   change = true                          ****** meaning that anisible went and created something
                                                     it created in the home of this particular user ansible user
172.31.19.131   
 change =true                    ****** it also created this file in the home of mark bc of our group variable ,
                          on this instance, the user we are comm with is mark, our ssh user is mark n thats why it created this file in his home

  
  7Axiii)                               ITEM POTENCY

ill run the command again 
ansible@ip-172-31-27-28: ansible db -m file -a "path=test.md state=touch"

   172.31.27.37 
   change = true                        ******* our result is still true and thats bc the file has no content in bt if it had content in it ansible wil nt recreate it
172.31.19.131                              and that is what is call item potency of ansible, ansible will not recreate what it has already created
 change =true   


  ***** so we hv seen that we can use grp variables to specify instaed of passing our variables on the command line, we can use group variables to specify the users we wnat to 
interact with, we can pass our PW and our users inside of our host file

 so with this, this  is how we use PW authenentication, we are doing ssh connection but we are using PW authentication 



NEXT:
 passwordless which is the preferred method especially when it comes to automation


                    TROUBLESHOOTING NUL RESOURCE NOT CREATING
1:32:15                      QUESTION

issues null resource not creating
2:10    share his sreen 


******** the windows script ill have to change it to my own ssh path 


ill tk my time off line to check the script


for now you can comment oout the null resource cos that is just used to provison your vscode 
if the script is not working you can run those commands one at a time 
you shud be able to still config your env


 2:23:49

********** class contd 

                        THE 2nd OPTION TO EST AN SSH CONNECTION:

7b) Password-less Authentication (Using SSH_Keys)

so ill vi  into my hostfile and remove the variables

ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28: $  vi host


to do it passwordless
 ******* 1st you need to generate an ssh ,it needs to be generated in the home of ansible, eneure you are in the home of ansible and your generating it on your ansible 
control server 

 ansible@ip-172-31-27-28: ssh-keygen
key is generated
your idetification has been saved in /home/ansible/.ssh/id_rsa           ******it shows us were the key is saved , thers a .ssh dir
  ansible@ip-172-31-27-28: $ ls
text.txt

ansible@ip-172-31-27-28: ls -a
ansible .bashrc .profile . ssh 
 
ansible@ip-172-31-27-28: cd .ssh 
ansible@ip-172-31-27-28: ls 
id_rsa  id_rsa.pub                           ***** the 2pair of keys that were just generated    (iprivate: d_rsa ,    public:  id_rsa.pub   )
                                             ***** you always want to share your public key , never share the private
 when u create an aws instance in aws and attach a key to it , the public key is transferred to the instance and you download the private key n thats why you are able to 
 authenticate with the private key you downloaded, it authenticates with d public key left inside your instance ,,thats how these keys work 


                             TRANSFER THE PUBLIC/SSH KEY TO THE REMOTE HOST
ansible@ip-172-31-27-28: ls 
id_rsa  id_rsa.pub                  ******* now we want to transfer this public key to the remote host 
  bc we are in the ansible home we wnat to copy ,we wnt to copy ssh ,  normally to  do a ssh ,if we are copying a key we use the copy id command ,  ssh-copy-id
normally if we want to ssh ,we wil do @ an ip address :     ssh-copy-id user@1234
but bc we hv an ansible user we are using here, so this ansible user will aslways look at the default ansible user to comm with 
so for me to copy this key, i can either ssh-copy-id ansible@ the ip address i want to transfer it    ...... OR 
bc ansible is the default user, i can ssh-copy-id then the private ip (172.31.27.37
ansible@ip-172-31-27-28: ssh-copy-id 172.31.27.37

7bi)
                                                    SSH COPY ID
  ********* splits his screen
2:29:42
bc i define output, i can run terfrm output and it will show my output
(copied one of the private ip of the ubuntu host servers) and pasted it above 

  ansible@ip-172-31-27-28: ssh-copy-id 172.31.27.37
password:ansible                                               **********  now it is trying to make a connection but bc ansible has a PW, i need to enter a PW 
                                 now it makes a ssh connect and transfers the key 



    7Bii)                                    LOGIN WITHOUT PASSWORD, USING SSH & IP address
now try logging into the machine 
now i can try logging in using ssh just with the ip 
ansible@ip-172-31-27-28: ssh 172.31.27.37                           ******* now am logged in without a password 
welcome to ubuntu
ansible@ip-172.31.27.37: $

    so frm here hv been able to login to the home of ansible using the ssh key
i used the pw above to be able to transfer the key  bc i needed to est an ssh connection for the key to be transferred

am using the ssh copy id to transfer the key frm my anisble home in the control to the home of the server i want to control, ie the remote host (private ip)
so hv been able to transfer the key 
ansible@ip-172.31.27.37: $    bc hv transferred the key to this serevr, let me exit
ansible@ip-172.31.27.37: $   exit
ansible@ip-172-31-27-28:            ********** am back into my ansible control node
ansible@ip-172-31-27-28:
ansible@ip-172-31-27-28:  ansible db -m ping

 172.31.27.37         failed                   ***** we have a connection with this ansible user 
  172.31.19.131       success                ******* i havent transferred my key to this user thefor no ssh connection established 


7Biii)                                      TRANSFERS KEY TO 2ND UBNUtu USER

**************** using the same process ,LETS transfer the key for user  172.31.19.131

once we try to copy the key we see we are asked for PW 
  INTERVIEW QUESTION
why do you need PW authentication enabled on your ansible remote node when your doing configuration

   ANS:
so that you are able to transfer the key , able to transfer your ssh key, public key, we wll need that PW 

   ******* once the transfer is successful, i can test the connection by loggin just using ansible
ansible@ip-172-31-27-28: 172.31.19.131  
ansible@ip172.31.19.131:                              ****** am logged in 

ansible@ip172.31.19.131:   ls -a
ansible .bashrc .profile . ssh 

ansible@ip172.31.19.131: cd .ssh
ansible@ip172.31.19.131: ls
authorized_keys
ansible@ip172.31.19.131:  cat authorized , i see the authorized key , the key coming frm ansible-172-31-27-28: , which is my control node
      the key was transferred and is now the authorized key, the public key that now lives inside of these remote host
          its the key ansible will use for authentication 
   bc the key ha sbeen transfered i can exit to my ansible control node 

ansible@ip172.31.19.131: $  exit
  ansible@ip172-31-27-28  : $  ansible db -m ping  

172.31.27.37  success            *********  connection established using ssh keys 
172.31.19.131   sucesss        ********        

   7biv)                                      
    ***********************                   PING ALL
2:37:13           
                               
    ansible@ip172-31-27-28  ansible all -m ping

172.31.16.16                  ******** Failed      havent transferred key to this , ican do the same process 


   172.31.27.37  success            *********  sucesss
172.31.19.131   sucesss        ********        success


          *******************        TRANSFERS KEY TO REDHAT USER 

ansible@ip172-31-16-16          ********** after transferring the key, now am in 

ansible@ip172-31-16-16  exit
 
 ansible@ip172-31-27-28         ansible all -m ping

    172.31.16.16                  ******** success


   172.31.27.37  success            *********  success
172.31.19.131   sucesss        ********      success


    ********* now hv been able to CONFIGURE MY SSH CONNECtion  passwordlessly 
       so am not using a password to login into my instnace because hv transferrd a key

2:39:46
7bv)
      *************   COPYING THE KEY TO A SPECIFIC USER 

 what if i want to make a connect on this server; 172.31.19.131 i have a user here called mark
i wnat to mk a connection using this user, that means i have to transfer a key to the home of mark 

 ansible@ip172-31-27-28 : $      ssh-copy-id mark 172.31.19.131                       ******* so am sending the key specifically to the user mark in that instance
                                                                       ****if i dnt specify it will go to the default user ansible as seen in (7biii)

password:  mark               ******* key transferred
 
ansible@ip172-31-27-28  ssh 172.31.19.131
  
mark@ip172-31-19-131                                             ************ now in the home of mark

7bvi)
                                TO PING MARK  (-u mark)

mark@ip172-31-19-131  exit

ansible@ip172-31-27-28      ansible all -m ping -u  mark 

 172.31.16.16                  ******** failed  bc i dnt hv mark here


   172.31.27.37  success            *********  failed   bc we dnt hv mark here
172.31.19.131   sucesss        ********      success           *********** found only one user mark bc i specifiy the user i wnt to ping


2:44:00          

so we hv configured our env , our env has been set up for automation, we hv exchanged our key

next thing we hv is adhoc commands 
let me just minimize this cos ill need to detsroy later


8)
     ************     ADHOC COMMANDS 

so we have our 3host thatw e are managing , w ehv our host file congigured, we hv exchange the key now we are ready for automation

we hv adhoc command 
the command that i hv beeen running like this :
ansible all -m ping -u  mark      ...*************** we are passing a module, the task that we hv just been pefrming here is just a ping, we are checking for connectivity
this is a one line command 
it is an ansible command that is just one line 
this command just performs one task on a target/specfic target host 
this is an adhoc command 

         WHAT IS ADHOC COMMAND 
An Ad-Hoc command is a one-liner ansible command that performs one task on the target host(s)/group(s).

Unlike playbooks — which consist of collections of tasks that can be reused — ad hoc commands are tasks that you don’t perform frequently, such as restarting a service or
retrieving information about the remote systems that Ansible manages.

********** This command will only have two parameters,
the group / target of a host that you want to perform the task and
the Ansible module to run.


this is default
********** ALL ansible command , for you to invoke wll start with the key word ansble
ansible all -m ping -u  
but the parameters thatu  are passing is your target which is your group (db, bc i hv a grp called db i  created in my host file), it could be an ip address or & the module (ping)
ansible 172.19.16.16    -    ** i could pass an ip addresss , that becomes my target 
ansible 172.19.16.16    -m ping                   *********** i can  passa amodule, mayb i wnat to ping that server 
ansible 172.19.16.16 -m  file     ***************   i can pass a file module
ansible 172.19.16.16  -m yum                  *********** mayb i want to install a package, i acn use a yum module
these are the 2parameters that an adhoc command expects 

all these are modules that we will see shortly, we will see what mosule sare 
but those are the 2 expected parameters


9)
***********************************      MODULES
Modules:

These are small programs that do some work on the server.
E.G  we hv a module called ping 
this is a small program
this is an ansible program that is written in ptyhon
so this mosule when you mk a connection, ansible will send this smal program into your host and that program wil go in there and do some task
once the task is done then ansible will remove it , it will remove the program out
so if i want to  create a file i can use a module/program that hv been created that is called a file module
that file module it has evrytin that it needs to go and create a file in the specific target that uv passed

They are the main building blocks of Ansible and are basically reusable scripts that are used by Ansible Ad-hoc and playbooks.

Ansible comes with a number of reusable modules.
it is synonmous to modules on tefrm registry, u can all a vpc module, an ec2 module, u can reuse them as many times AS POSSIBLE
it has already been written, so you only need to referene them and it will be called frm the registry
so its the sam ething that hasppens here 

The basic syntax of an Ad-hoc command is:

$ ansible [ -i inventory_file ] server1:server2:Group1:Group2 -m [-a arguments]

To list all available modules:

$ ansible-doc -l


******** so if u hv an invenetory file, right now we are using the host file which is the default, bt if i can config anoda file in my local env
like w ecalled a file called text.txt  (in vscode when we connected to ansible)
u can create that file if i want to use it as my inentory
i can use this as my inventory
inventory means i hv my ip address inside of that file , 
then i can do -i option to reference that file  [ -i inventory_file ]
bc now am nt using the default host , am using an inventory, a file that  has ip adresses of the server
or i can pass them like this, seperate them with semi colums  ; server1:server2:Group1:Group2 -m [-a arguments
-m  is for my module 
- a is  for argument  , this just means if i passs a module like a file  what do i want to do, i can pass some commands 
so arguments are commands am passing on that particular module 

To list all available modules:

$ ansible-doc -l

,, we can see all the modules you can use/reference inside of the doc
a lot of modules to do diff things


2:55:00
*********** you can go tru the file later on your own , tk time to HV a little bit of understanding of what ansible does
https://github.com/LandmakTechnology/Ansible-mc-series/tree/main/03-adhoc-commands

Testing Connection to Ansible Hosts

Adjusting Connection Options




*************

To set up a custom SSH key, include the ansible_ssh_private_key_file variable as follows:

~/ansible/inventory
server1 ansible_host=203.0.113.111 ansible_ssh_private_key_file=/home/sammy/.ssh/custom_id
server2 ansible_host=203.0.113.112


**********so we uve see all that, we hv seen how an ansible inventory can look like 
you can pass your servers, you can pass your ansible host, you acn pass your variables inside of your server
if you are connceting using a pirvate key, you can pass : ansible_ssh_private_key    ***** as a variable 
the only demo we did is we passed the user and we also passed the passwd
but we could hv passed the key  and therfeor this ansible will be able to connect that particular user using this particular key
but we automated the process just by transfering the keys


you can create variable sthat will be used by this grp of instances 

[group_a:vars]
ansible_user=sammy
ansible_ssh_private_key_file=/home/sammy/.ssh/custom_id


2:57:36
***********************************************




10)
   ************  TYPES OF MODULES
https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/04-Ansible%20modules/Type_module.md



####  1.) Command module
Used to execute binary commands    (its like a shell, a program that is used to execute some commands)

It is the default module    (menaing if u dnt pass any other module its this module that is goin to run)

With the Command module the command will be executed without being proceeded through a shell.

Consequently, some variables like $HOME and operations like <, >, | and & will not work. (ie it doesnt support special character, it is default bt its limited)
e.g 1     
$ ansible all -i inventory -a "uptime"

ansible@ip172-31-27-28   ansible all -a "uptime"             ******** i didnt pass any module
we still get an output (the uptime of my servers) 
so ansible has gone to my system and run a command called uptime, 
how did it run a command , i didnt pass any module/program
so bc i didnt pass any module the default module will run, the default module is called command module 
-The command module is more secure, because it will not be affected by the user’s environment

e.g2
ansible@ip172-31-27-28 $ ansible db -a "cat /etc/hosts && pwd"            **********************still using the default module bc i havent specified any module
 in this case the command failed and it is bc of the && , it is a special character
command module is limited even though its the default module 
we hv a more superior module, the shell module

********** but when i run it again without the && , we will get a response 
$ ansible db -a "cat /etc/hosts"
change true       **********  we get a response 




##### 2.) Shell Module
Used to execute binary commands

It is more superior than the command module

Command will be executed being proceeded through a shell.
$ ansible db -a "cat /etc/hosts && pwd"

$ ansible db –m shell –a "cat /etc/passwd && pwd"

e.g
ansible@ip172-31-27-28 $ ansible all –m shell –a "cat /etc/host && pwd"
 we get a response

so we are able to use the shell module as a more superior module, whenwevr we want to run a commands
so for commands that hv special character use the shell command 


###########  3.) File Module
Used to create files and directories
a) Create a file named file25 
$ ansible group1 -m file -a "path=file26.txt state=touch"

e.g
if we want to create a file for in all our instances, but we need to give it a path, basiciclaly the name of the file, so we nid to reference a path & the state is touch
e.g to create a file in all instances:
ansible all -m file -a "path=class33.txt state=touch"
it will be created in the home of ansible bc its uisng the default user
************* if i want to create it in the home of mark then i can specify that 
ansible all -m file -u mark -a "path=class33.txt state=touch"
if i ssh in  .......... 
ssh mark@172.31.19.131  and ls
i can see the file created by asnisble
so we use ansible for configuration

b) Create a directory file25
$ ansible db -m file -a "path=/home/ansible/file26 state=directory mode=777 owner=root group=root" --become

************ creating a dir , u will use the -m file , module , you will give it a path, it could be a relative or absolute path but the state is directory
then yu can change the permission ie if i wnat the dir to hv a specific permission, the ill use the mode, i can change the owner of the dir 
e.g
ansible all -m file -a "path=clas33 state=directory"
it has created a dir n the homes of ansible
we see the mode is 0775
but if i wnated to cahnge the permission, i can pass mode as permission
so ansible has been able to create the dir using a file module

**************If state=absent, the file or directory will be deleted
if i want to remove the dir or file the state will be absent
e.g
ansible all -m file -a "path=class33.txt state=touch"

it will say 
changed: true
path: class33             ********          
state: absent                  *****************  so it has gone inside of my instance and deleted the dir

so ansible is helping me mange my configuration just by passing a command 


########## 4) Copy Module
Used to copy files from the ansible control node to the remote node or copy files from one location to another in the remote node.
******* copy module will need to have a source and a destination
a) From ansible control node to remote node
$ ansible group1 -m copy -a "src=/source/file/path dest=/dest/location"
$ ansible group1 -m copy -a "src=/etc/hosts dest=/home/ansible"
eg
ansible@ip-172-01-19-131 $ touch auto.txt
ansible@ip-172-01-19-131 $  echo "hello team" > auto.txt
ansible@ip-172-01-19-131 $  cat auto.txt
hello team
so i have the file text.txt in my ansible control node   and i wnat to copy it to my remeote node 
so  need to give it a source and a destination
ansible@ip-172-01-19-131 $ ansible all -m copy -a "src=auto.txt dest=."
bc its goin to the home of the default user, dest can be pwd or (.) bc its destination that its going 

************* bt we got command ansible not found
bc he created the file in the wrong place so he exited  and decided to copy to etc/host

*********** 3:21:00
exit
let me copy etc host and send it to that 
ansible@ip-172-31-27-28: $  ansible all -m copy -a "src=/etc/hosts dest=."
so we see change=true                                                               ****** 3:20:50
src:/home/ansible/.ansible/tmp/                ***** so it sent a file to(frm) the source of this and it sent it to the home of ansible 

so if i ssh 
ssh 172.31.19.131  and ls
auto.txt class33.txt hosts
ansible@ip-172-31-19-131: cat host                                   ******* dnt unerstand wht he did here)
ill see the host file , it was copied frm my ansible control to all the remote node, so all the remote node now has this file

******* so hve use the copy module to transfer a file frm one location on my control node to another


b) From one location in remote node to another location in remote node
$ ansible db -m copy -a “src=/source/file/path dest=/dest/location remote_src=yes"
src=yes   ..... means all the operation are happening in the remote node ,  a file is not being copied frm your local 
so i can copy frm the home of ubuntu and trasnfer to the home of ansible , bt ervytin is in the remote node am nt copying it frm the control node

$ ansible group1 -m copy -a "src=/etc/hosts dest=/home/ansible remote_src=yes"

c) Change permission of a file in a remote node
$ ansible db -m file -a "dest=/home/ansible/hosts mode=0664"


#### 5) Fetch Module
Used to download files from a remote node to the control machine.   (its getting them frm d remote &bringing them to your local env, frm ur remote host to your ansible host
$ ansible db -m fetch -a “src=/source/file/path dest=/dest/location"
                  ************* the path can be relative or absolute) just give it a path where you want it to copy thefile frm and the destination wher its sending to
a)
Will copy the files with a directory structure.
$ ansible all -m fetch -a "src=./hosts dest=./"

eg                                                its the pwd bt its called host 
ansible@ip-172-31-27-28: ansible all -m fetch -a "src=./hosts dset=./"
change:true

so if i ls , ill see these directories, these are the dir that came frm each of the instances (id below)
ansible@ip-172-31-27-28: ls
172.31.16.16, 172.31.19.131 , 172.31.27.37  text.txt
ansible@ip-172-31-27-28: 172.31.16.16 ls
host                                               ****** i can see the host file 

so when i pass the command to faetch, it actuallly downloaded it with a dir structure from each server/host, so it downloaded the file bt with a dir structure
but if i dnt want the dir structure 


b)
To fetch the file without a directory structure, use the flat=yes option
$ ansible all -m fetch -a "src=./hosts dest=./ flat=yes"

eg                **** 3:28:40,   dnt understand what he said 
ansible@ip-172-31-27-28: ansible all -m fetch -a "src=./hosts dset=./ flat=yes"
172.31.16.16, 172.31.19.131 , 172.31.27.37  host text.txt
*** so this is hw we can use ansible to manage our diff env 


******* read tru the remaining modules then when we meet next, we will go over the modules then start on seeing hw we can write playbks 
in the mean time just mk sure you hv installed ansible , confiure it , trying runing ansible using paswd, configure ssh key , try the modules we hv coverered so far
bt we will pick up frm herer on monday 


##### 6). Apt Module
Used to install a package in the ansible client.
$ ansible db -m apt -a "name=apache2 state=present" --become

$ ansible db -m service -a "name=apache2 state=started" --become

$ ansible db -m apt -a "name=nginx state=present" -b

###### 7) Service Module
You can use the service module to manage services running on the remote nodes managed by Ansible. This will require extended system privileges, so make sure your remote user has sudo permissions and you include the --become option to use Ansible’s privilege escalation system. Using -K will prompt you to provide the sudo password for the connecting user.

$ ansible all -i inventory -m service -a "name=nginx state=restarted" --become -K

$ ansible all -m service -a "name=nginx state=stopped" --become -K

8. User Module
Used to create user accounts.
Create a password encryption
Generate the password from your local environment
$ openssl passwd -crypt <desired_password>

$ ansible db -m user -a "name=Peter password=wiyiMQbLhCRUY shell=/bin/bash" -b

9. Setup module
This is a default module and is used to gather facts about the hosts.

The setup module returns detailed information about the remote systems managed by Ansible, also known as system facts.

To obtain the system facts for group1, run:

$ ansible group1 -m setup

This will print a large amount of JSON data containing details about the remote server environment.

To print only the most relevant information, include the "gather_subset=min" argument as follows:

$ ansible group1 -m setup -a "gather_subset=min"

To print only specific items of the JSON, you can use the filter argument. This will accept a wildcard pattern used to match strings. For example, to obtain information about both the ipv4 and ipv6 network interfaces, you can use ipv as filter:

$ ansible group1 -m setup -a "filter=ipv"

10. Debug module
Executes only on the local host to display some information- message or variable value.

We do not need ssh connectivity or password for a debug module. When using the debug module, the arguments will either be
- msg = to display a message
- var = to display a variable

**Default variables**
    - inventory_hostname
    - inventory_hostname_short
    - groups/ groups.keys()
$ ansible all -m debug -a "var='This is a debug module'"
$ ansible all -m debug -a "msg={{}}"

inventory_hostname

You can use debug to display variables.
$ ansible all -m debug -a "var='inventory_hostname'"
$ ansible all -m debug -a "msg={{inventory_hostname}}"

If you have an inventory with entries like 'server1.cloud.production.host' then the command below will return server1.
$ ansible all -m debug -a "msg={{inventory_hostname_short}}"

You can also use debug module to display groups or groups keys in your inventory.
$ ansible all -m debug -a "var='groups'"
$ ansib




   




you guys hv a great weekend
ill try and correct the code , if ders anyting ill try it out
as i did mention jsut comment out the null rsource bc thats just configuring the vscode  so just bypass that so ur able to install ansible then run it up mk sure uve 
worked ur way to atleats module4 where ur looking at the diff modules , and we ll pickup on monday
but most of this things once u go tru ur bootcamp 
the reason why i use trfrm is bc u wil be using trfrm a lot in your env 
and going forth we ill try as much as possible to write it in code format 
and thats bc you can easily reuse it, u can easily knw the satte of what u hv 
you can easily mange it bc its resueable then it just becomes easier to manage it 























