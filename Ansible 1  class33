
######### i followed tru with all the class33 ansible videos, so i can ignore that of class34


17.30  .... for maco os, the operating system is linux , if you have mac then you can run ansible directly frm your mac bc thats a linux env

48.22.. i bliv this is one of the reasons we cant use windows
cd into downloads bc thats wher my key was downloaded   ***I bliv theis download dir is the download folder we hv on our computer, i guess using ubuntu or mac we can access it bc 
then il paste the ssh command                                                                                                         the operating system is linux     




****i bliv bc ansible is a configuration mgt tool, then it has to use the same file format that was used to create/provision the infastructure
eg if its managing a terrfm provisoned infastructure then you'll see .tf files bc terfrm files are .tf files



LINUX, SCRIPTING, GIT , MAVEN, TOMCAT/NGNIX TOMCAT, SONAR, NEXUS, JENKINS, AWS, DOCKER for docker images/containers, K8 for clusters/container ochestration, K8/HELM, TERAFORM,
ANSIBLE; agentless,it uses ssh, bt (puppet or chef; uses agent)this two uses agent on the remote host while ansible uses a push mechanism and thats why ansible stands out 

In our env, we use LINUX OS for file,process,package,security mgt, GIT FOR VERSIONING, MAVEN FOR BUILD, jenkins for integration;automates the end to end process, AWS our 
cloud resources/provider, DOCKER for Containerization, KUBERNETES FOR CONTAINER OCHESTRATION MGT; for managing & scaling containerized appl, TERRAFORM Iac for provisioning 
infastructure using code, ANSIBLE (written in python)for Configuration mgt & provisioning tool for infastructure.
eg: U already hv an instance running bt ur suppose to instal some software inside of it, that process of instaling that paticular software is what is called configuration mgt
Ansible will be helpful to perform:
Configuration Management
Application Deployment  e.g we can use it to deploy in k8, we can write a playbook that we can use to deploy in k8
Task Automation  , we can automate task just by using ansible 
IT Orchestration






******Online....

DOES TEFRM REPLACE ANSIBLE
Use Terraform when you need to provision, manage, or version cloud infrastructure resources, and Ansible when you need to configure servers, deploy applications, or enforce 
system state. Use both when your automation spans both infrastructure creation and system configuration.


DIFF BTW terrafrom & kubernetes and ansible
Think of Ansible as building the house (servers/VMs) and Kubernetes as managing the inhabitants (containers) within that house.
Kubernetes orchestrates containerized applications (deployment, scaling), while Ansible automates infrastructure tasks (configuration management, provisioning, general IT
processes) across servers, often used together to set up and manage the underlying nodes that Kubernetes runs on, with Ansible handling setup and Kubernetes managing the apps
inside.  

https://www.google.com/search?q=difference+between+ansible+and+terraform&oq=diff+btw+ansible+and+&gs_lcrp=EgZjaHJvbWUqCQgBEAAYDRiABDIGCAAQRRg5MgkIARAAGA0YgAQyCQgCEAAYDRiABDIJCAMQABgNGIAEMgkIBBAAGA0YgAQyCQgFEAAYDRiABDIJCAYQABgNGIAEMgkIBxAAGA0YgAQyCQgIEAAYDRiABDIJCAkQABgNGIAE0gEIODU1MmowajeoAgiwAgHxBQrNjYhtP4O3&sourceid=chrome&ie=UTF-8
Key Use Cases
Use Terraform for:
Building, changing, and versioning cloud infrastructure across multiple cloud providers (AWS, Azure, GCP, etc.).
Managing the full lifecycle of infrastructure components (creation, updates, and destruction).
Handling complex, interconnected systems, ensuring that all dependencies are provisioned in the correct order.
Containerized solutions like Kubernetes cluster management.


Use Ansible for:
Automating system configurations such as software installation, file management, and user accounts on existing servers.
Application deployment onto provisioned servers.
Automating tasks across various domains, including network devices (routers, switches) and security systems.
Managing configurations on both cloud and on-premises infrastructure. 

Terraform, Kubernetes, and Ansible are distinct tools used for different stages of cloud automation: Terraform provisions the underlying infrastructure, Ansible configures
the software on that infrastructure, and Kubernetes orchestrates the deployment and management of containerized applications within the provisioned infrastructure. 

Better Together
While they can perform some similar tasks, the best practice is often to use them together to leverage their respective strengths. A common workflow involves using Terraform
to provision the foundational infrastructure (e.g., virtual machines
and networking), and then using Ansible to perform post-deployment configuration, such as installing specific software and deploying applications onto those machines. 



Core Differences BTW ANSIBLE  & KUBERNETES
Feature 	              Ansible Setup	                                                             Kubernetes Setup
1)Primary Purpose	Automates system configuration, software installation,                     Automates the deployment, scaling, and management of containerized applications.
                  and infrastructure provisioning (e.g., setting up servers).	

2)Architecture	Agentless; operates over SSH or WinRM to push changes to                       Agent-based (using kubelet agents on worker nodes) with a central control
                    target machines.                                                                  plane.

3)Operational	Procedural/declarative (YAML Playbooks define tasks to run sequentially).	Purely declarative (YAML/JSON manifests define the desired state, which 
 Model                                                                                                 Kubernetes maintains automatically).


4)Lifecycle	Focuses on initial setup and periodic 	                                     Focuses on continuous runtime management, health checks, 
                  configurationupdates ("pushes changes to hosts")                                     self-healing, and auto-scaling.

5)Use Case	Best for setting up physical/virtual servers, managing	                      Best for running microservice-based, containerized applications 
          non-containerized applications, and provisioning the Kubernetes cluster itself.                           at scale in dynamic, distributed environments.


                                   HOW THEY WORK TOGETHER
It is common to use both tools in a modern DevOps environment, leveraging their respective strengths: 
Ansible is often used first to automate the provisioning of the underlying servers and the installation and configuration of the Kubernetes cluster itself.
Kubernetes then takes over the ongoing management, scaling, and health monitoring of the containerized applications running inside that cluster.
Ansible modules and collections for Kubernetes (like the Ansible Kubernetes Collection) allow Ansible to manage Kubernetes resources directly, bridging operational gaps. 

******************************************************






WHat i understand so far DIFF BTW VIRTUAL MACHINES & CLOUD INSTANCES
In layman's terms, a virtual machine (VM) is like a computer inside your computer, created by software, that acts as a completely separate, independent machine with 
its own operating system (like Windows or Linux) and apps, all running on your physical hardware without interfering with your main system

*** i bliv.. Virtual machine & cloud instance are similar bc cloud instance are also virtual machines the diff is cloud instance a virtual machine hosted and managed by a 
third-party cloud provider and accessed over the internet. 
https://aws.amazon.com/compare/the-difference-between-containers-and-virtual-machines/#:~:text=Virtual%20machine%20image%20files%20are,How%20they%20work

Virtual Machine (VM)
A virtual machine is a software-based, isolated computer that emulates a physical machine with its own operating system and hardware resources (CPU, memory, storage). 
Technology: VMs are created using a hypervisor, which is a software layer that sits on top of physical hardware (or on a host OS) and manages the allocation of
resources to multiple isolated virtual environments.
Deployment: Traditionally, virtualization is used in on-premises data centers to consolidate multiple workloads onto a single physical server, maximizing hardware 
utilization

*****WHILE:
Cloud Instance
A cloud instance (also known as a cloud server or by provider-specific names like Amazon EC2 instance, Azure Virtual Machine, or Google Compute Engine instance)
is a virtual machine hosted and managed by a third-party cloud provider and accessed over the internet. 
Service Model: Cloud instances are part of a broader "cloud computing" model, which includes features like self-service access, automation, dynamic scaling, and a
pay-as-you-go billing model.
Management: The cloud provider manages the physical infrastructure and hypervisor, allowing users to focus solely on the VM's operating system and applications



DIFF BTW CONTAINERS & VIRTUAL MACHINES
I bliv for containers you dont need to create ec2 instances or install softwares, you just need a container D or runtime or container engine to create packages but for virtual
machines you have to create an ec2 instance if your resources are in the cloud and you can also install softwares in virtual machines

CONTAINER
Container technology involves building self-sufficient software packages that perform consistently, regardless of the machines they run on. Software developers create and 
deploy container images—files containing the necessary information to run the application. Container images are read-only and cannot be altered by the computer system.
VIRTUAL MACHINE
Virtual machine technology involves installing virtualization software on a physical server or computer. The physical computer is called the host computer and the virtual 
machine is called the guest. You can configure and update the guest operating system and its applications as necessary without affecting the host operating system.

Core technology
Virtual machines use hypervisors that communicate between the guest operating system and the host operating system. The hypervisor coordinates resource sharing, so the
virtual machine runs in isolation alongside several others on the same hardware.

Containers, on the other hand, use a container engine or container runtime. This is software that acts as an intermediary agent between the containers and the operating system,
providing and managing system resources that the application needs. Docker is the most popular open-source container engine.

**********************************************************************************************************************************






    SUMMARIZED FOR INTERVIEW
SIMPLIFIED SUMMARY:
1)USE OF ANSIBLE
2)We didnt do any integration like Jenkins where we had to do some integrations of jenkins with other tools like tomcat,sonarqube etc, 
WE used terraform files & some high level blocks (ec2 instance blk, varaibel blk, output blk etc)to automate the provisoning of servers for the control node/host &
installation of ansible in the control node.
4 servers were provisioned; 1 ubuntu server for the control node where ansible was installed, 2 ubutu servers for 2 hosts & 1 redhat server for the 3rd host.
ANisble works on linux/unix OS ie the control node must be installed on a linux/unix system but the control hosts can be any OS but for windows host, wirnm must be installed 
in the windows system because the ansible control node uses ssh  plugging to connect to the linux hosts  so it needs wirnm to connect to windows host
To use windows as a control node you must use a Windows Subsystem for Linux (WSL),
we can use ubuntu control node to control/manage hostS on any OS ie whether ubutu host or window host

VIDEO 2; CLASS34

                    USES OF ANSIBLE

with the help of ansible, we can push configuration to the servers and the configuration can perform diff tasks
ansible can perfrorm severaltask , it can group our servers, file mgt, user mgt, etc ,, bt first ansible needes to conect to the host(servers) and for it to do that , it 
wil depend on the host 
e.g windows host will be treated diff frm linux host

                ANSIBLE USE SSH PLUGGING TO CONNECT TO LINUX HOST & WINRM FOR HOST ON WINDOWS
it will use ssh pluggin to connect to linux host and for host on windows it will use winrm
Servers:
    UsersMGT
    FilesMGT
    ServicesMGT
    PackagesMGT
    deployments, manage,
    build, test and configure apps 
Ansible is an open source AGENTLESS :
  Configuration Management tool, 
  deployment tool and/or  
  provisioning tool maintained by Redhat


2) ANSIBLE DIRECTORY STRUCTURE; includes 
A)the host: also called the inventory, this is where the host servers are added using the ip address & i bliv its where we change the host checking frm true to false for automation
B)Ansible config file : 
C)The Roles        *** a dir called roles
roles are like modules that u can custom create anD call them as needed, so u can create what is called roles so ....all the roles will live inside of the roles dir 
i can crate as role to config tomcat, jenkins and whwnever i need it i jsut call the role inside  of my playbk and jenkins will be installed

3)THE PRECEDENCE/PRIORITY ANSIBLE USES WHEN SEARCHING FOR THE CONFIG FILE
Because ansible has the option of creating the config file in a diff location other than the default location, so when searching for the file it follows an order of precedence

1:21:00
bc whenevre we run ansible, the 1st tin is ansible will read the configuration file location, it wil look for the config file based on the priorities,

1ST : ANSIBLE_CONFIG        env varibale.,, this takes priority , if not seen it goes to 
2nd:  ./ansible.cfg         pwd dir 
3rd:  ./ansible.cfg         home  of that particulr user 
and if not it goes to the 
default : /etc/ansible/ansible.cfg
 if u have ./ansible.cfg, in your pwd , then its the file ansible will be looking at to read d configuration
    thefor with al that, it just means that if am working on the dev env, i can create a  dev ansible.cfg for the dev env within my working dir and thats wher ansible will 
get its configuartion

ANSIBLE2                               DEFAULT ANASIBLE.cfg or ANSIBLE CONFIGURATION FILE LOCATION                                      
so the default ansible configuration file is found in this location '/etc/ansible/ansible.cfg., in which we can make various settings like locating of our inventory file or
host key checking so any type of configuration that we want to set for ansible we will do it in the ansible config file; ansible.cfg 
but this configuration file we can put it any where as long as we reference it bc when you run ansible, the first tin is ansible will read the configuration
 ***** 



                      WHEN GOING THROUGH THE FILES IN THE PROJECT REPOSITORY
***mee, when going through the files in the project respository, if i can easily understand what the file is for by searching for where it is connected to 
eg; we can search in the ec2 resource blk the 'userdata script used to create the users & their PW' & variables file are connected there






                        THESE ARE THE SUMMARIZED STEPS OF THE VIDEO 
1)this videos covered conecpts of ansible, Ansible is an open-source configuration Management, deployment and provisioning Automation tool maintained by Redhat
control node, ansible controller : this is the server wherby you hv installed your ansible software on thyis ec2 instance
Ansible works by connecting to remote nodes (hosts) and pushing out small programs, called “Ansible modules” to them.
thru ssh connection am able to control this multiple servers frm my control node
wil use the file module to create that file accoridng to the specifictaion, once it creates the file it deletes the module and once it accomplishes that task , it marks that
task a complete and then it deletes the module, this is how ansible does 

******* bc ansible is written in python thefrore python needs to be installed on your remote node bc ansible runs on python so the firtsthing is python needs to be 
installed on the remote node for ansible to wrk , so this means you dnt ned to setup a client server env before before using ansible 
all you need to do is setup your ansible server then inside of your configuration file which we call the host file , you just need to pass the ip address of the 
particular server that you wnat to patch or configure then ansible will take care of that so you dnt have to do any setup on these particular servers
so thats basically how ansible works

2) OTHER CONFIGURATION MGT TOOLS
Apart from ansible, puppet , chef is also a configuration mgt tool 
this two uses agent on the remote host; they use a pull mechanism as such you have to install a puppet agent of a chet agent inside of 
each node bc it is the agent that will initiate that particular push ...i bliv he meant the controler will be activating the pull done by the agents
while ansible uses a push mechanism and thats why ansible stands out 


  3)BENEFITS OF USING ANSIBLE

It is a free open -source Automation tool and simple to use.
It Uses existing OpenSSH for connection ,    most of THE servers that we provision already hv open ssh configure so ansible jsut uses this  for it to do configuration
Agent-less –                             No need to install any agent on Ansible Clients/Nodes
Python/YAML based                        .... playbooks are written in yaml language n yaml are very easy, so ansible is easy to use 
Highly flexible and versatile in configuration management of systems.
Large number of ready to use modules for system management  ,  ansible community and redhat they hv a whole lot of module that are ready to be used
                                so u dnt need to create or re write anything just use the existing module, we hv a lot of modules that comes preloaded when u install ansible
Custom modules can be added if needed        


  4) INSTALLATION
we used a userdata/script to install it on both ubuntu (controller & 2 remote & one Redhat )

A)THE DEFAULT USER IS THE USER I CREATE TO INSTALL ANSIBLE
WE SSH/CONNECT TO THE DEFAULT USER IN THE REMOTE HOST \\(the software we installed;Ansible wil be looking for the default user to connect)
 if i install ansible in the control as a user called Ken, then my default user in the remote that ansible will be looking to connect with will be a user called ken
bc that becomes the default user in ansible , this is how We can install ansible on ubuntu
B)WE HAVE TO CREATE THE SAME USER (name) IN THE REMOTE NODE, & we can transfer key to user in the remote node for passwdless authentication
we automated the installation process using terraform & some high level blocks/the user data



              THE AUTOMATION PROCESS USING TERRAFRM FILE/SOME HIGH LEVEL BLOCKS/THE USER DATA
5) INSTANCE RESOURCE BLK /ec2.tf file  USING  "template_cloudinit_config"
contains;
A)Script to create ansible user; for user data we passed the script to "create ansible user, which will also pass the user passwd & enable PW authentication.
***we will use this password when we establish an SSH Connection using the password option as illustrated in video2
                  this script changes PW authentication from no to yes.
B)Instance Resource blk to create 2 ubutu host servers & another resource blk to create 1 Redhat host server
C)Created a data block USING  "template_cloudinit_config" for 2 DIFF SCRIPT / USER DATA ON AN INSTANCE
 1ST SCRIPT TO INSTALL ANSIBLE ,THE 2ND SCRIPT TO INSTALL VSCODE
 then we connected TO THE CONTROLLER UBUNTU SERVER

6) OUTPUT BLK 
   To output the public ip of the instances & the private ip of the Redhat server host
although inside the host file, he used the private ip so that whenevr he shuts down his instances he doesnt have to come in the hsodt file to change the ips bc the ips changed

7)VARIABLES BLK
includes: Blk for region, instance type, key & OS

 8)Ansible is designed to run on Unix/Linux systems, therefore Windows systems aren’t supported for the control node.
 this means that the control node has to be either linux or unix for ansible to be installed once it is isnstalled, it can controll the remote nodes whether windows 
so a control node cannot be windows
25.35**am creating both ubuntu and redhat server for remote host,  **** but ansible is installed only on ubuntu

Ansible is python based and therefore the control node and the managed nodes need to have python2 or python3 installed on them.
******* the good news is that most of our system already cm with python installed bt also ansible once it connects to a system, if python isnt already installed,its goin to
install python basically 

9)Ansible can be installed in three ways:

Using yum or apt       ******** if ur installing on ec2 instance
Using pip              ****** package manger for python
Using compile file       **** download / use a complie file     ****  https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html 
                                in the link u can see hw we ar able to install ansible


10)ANSIBLE DIRECTORY STRUCTURE/ANSIBLE CONFIGURATION FILE 
https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/01-Introduction/03-Ansible_config_file.md


                          ANSIBLE DIRECTORY STRUCTURE

ansible has what is called a default dir/The default ansible home directory is /etc/ansible
This directory will consist of:
a) ansible.cfg               ***ansible config file
b) hosts                 ***a host file
so by default host key checking has been set to true meaning evrytime ansible makes a conection/ a sever makes a connection, you have to confirm that you wnat to but
that is not what we want in automation, in automation we dnt wnat the process to be interrupted, we want the process to go on automatically 
c) roles           *** a dir called roles
roles are like modules that u can custom create anD call them as needed, so u can create what is called roles so ....all the roles will live inside of the roles dir 
i can crate as role to config tomcat, jenkins and whwnever i need it i jsut call the role inside  of my playbk and jenkins will be installed

if i run 
ansible@ip-172-31-17-108: $   pwd
/home/anasible                                ** am in the home of ansible
bc i did su -ansible, i exited the home of ubuntu and now am in the home of ansible 
now been in the home of anasible , the default home of ansible is   /etc/ansible
lets cd  
ansible@ip-172-31-17-108: $  cd /etc/ansible
ansible@ip-172-31-17-108: /etc/ansible  ls                  TO SEE THE 3 ENTITIES IN ANSIBLE HOME
anisible.cfg   hosts  roles                      ********* 2files and a dir called called role 



11)What is the precedence or priority of ansible when its searching for the configurtaion file 

 ANS : 

1ST : ANSIBLE_CONFIG        env varibale.,, this takes priority , if not seen it goes to 
2nd:  ./ansible.cfg         pwd dir 
3rd:  ./ansible.cfg         home  of that particulr user 
and if not it goes to the 
default : /etc/ansible/ansible.cfg
 if u have ./ansible.cfg, in your pwd , then its the file ansible will be looking at for to read d configuration
    thefor wil al that, it just means that if am working on the dev env, i can create a  dev ansible.cfg for the dev env within my working dir and thats wher ansible will get
its configuartion




*************************************************************************************









START

Core Differences BTW ANSIBLE  & KUBERNETES, HOW THEY WORK TOGETHER, ANSIBLE CONFIGURATION MGT TOOL, ANSIBLE CONCEPTS TO COVER, WHAT IS ANSIBLE, HOW ANSIBLE WORKS, 
OTHER CONFIGURATION MGT TOOLS, BENEFITS OF USING ANSIBLE, USES OF ANSIBLE, ANSIBLE USE SSH PLUGGING TO CONNECT TO LINUX HOST & WINRM FOR HOST ON WINDOWS
INSTALLATION ON UBUNTU & REDHAT, STEPS FOR ANSIBLE INSTALLATION/ PREREQUISITE,  SCRIPT TO BE USED AS AS USER DATA FOR
THE INSTALLATION ON UBUNTU, THE DEFAULT USER IS THE USER I CREATE TO INSTALL ANSIBLE, WE SSH/CONNECT TO THE DEFAULT USER IN THE REMOTE HOST,  IN THE REMOTE NODES THE DEFAULT
USER DOES THE INSTALLATION/PATCH WORK, Script to add user, password and enable password authentication,  WE HAVE TO CREATE THE SAME USER (name) IN THE REMOTE NODE,
TRANSFER KEY TO USER IN THE REMOTE NODE FOR PASSWDLESS AUTHENTICATION, 

illustration;     
THE AUTOMATION PROCESS USING TERRFORM FILES/SOME HIGH LEVEL BLOCKS/THE USER DATA, TO PROVISION SERVERS FOR THE CONTROL NODE/HOSTS & INSTALLATION OF ANSIBLE IN THE CONTROL NODE 

SCRIPT FOR THE UBUNTU CONTROLL NODE/PASSING 2 DIFF SCRIPTS AS USER DATA; 1ST SCRIPT TO INSTALL ANSIBLE & USING "template_cloudinit_config" FOR THE 2ND SCRIPT TO INSTALL VSCODE
USING 2 DIFF SCRIPT AS USER DATA ON AN INSTANCE, DATA BLOCK TO INSTALL THE 2 DIFF SCRIPTS, 
THE SCRIPT TO CREATE 2 INSTANCES FOR THE REMOTE HOST & ANSIBLE USER & ENABLING PW AUTHENTICATION DYNAMICALLY, SCRIPT FOR THE REDHAT REMOTE HOST,  ASSOCIATE/CREATE A KEY,
 WE DOWNLOAD THE PRIVATE KEY BUT THE PUBLIC KEY REMAINS IN AWS, CONNECTING TO THE CONTROLLER UBUNTU SERVER,  ANSIBLE DIRECTORY STRUCTURE,HOME OF ANSIBLE /etc/ansible,
TO SEE THE 3 ENTITIES IN ANSIBLE HOME;(Roles/host/config file) ROLES, HOST/AUTOMATING HOST KEY CHECKING, CREATING ANSIBLE CONFIGURATION FILE IN A DIFF LOCATION,WHATS THE 
PRIORITY THAT ANSIBLE LOOKS AT, EXAMPLE OF A CONFIGURATION FILE


WE used terraform files & some high level blocks to automate the provisoning of servers for the control node/host & installation of ansible in the control node
4 servers were provisioned; 1 ubuntu server for the control node where ansible was installed, 2 ubutu servers for 2 hosts & 1 redhat server for the 3rd host.
ANisble works on linux/unix OS ie the control node must be installed on a linux/unix system but the control hosts can be any OS but for windows host, wirnm must be installed 
in the windows system because the ansible control node uses ssh  plugging to connect to the linux hosts  so it needs wirnm to connect to windows host
To use windows as a control node you must use a Windows Subsystem for Linux (WSL),
we can use ubuntu control node to control/manage hostS on any OS ie whether ubutu host or window host




######### i followed tru with all the class33 ansible videos, so i can ignore that of class34





 today we start a new serie of ANible
so far we hv been working with terfrm , its a tool we use for infrastrure prvisoining
we use trtfrm to provision/create infrastrure
 but we hv anoda tool we call Ansible 



              ***meee    ANSIBLE CONFIGURATION MGT TOOL
eg: U already hv an instance running bt ur suppose to instal some software inside of it, that process of instaling that paticular software is what is called configuration mgt
  
 but we hv anoda tool we call Ansible 
this is a tool we wil use for configuration , like after you created your infastructure how do you configure it , how do you install software 
e.g you may log into an ec2 instance or maybe at work theres a package thats missing , you nid to insatll mayb an apache server
already you an the instance running but ur suppose to instal some software inside of it, that process of installing that paticular software is what is called configuration
mgt 
when you patch a sevrer, you update a server, your nt creating the server, you are basically configuring it
when you instal jenkins on a server your not creating jenkins ec2 instance , your configuring it , thats the process thats called configuration mgt
so as we look at config mgt we wil be looking at ansible




                         ***meeeee....   ANSIBLE CONCEPTS TO COVER
 1) we wil be looking at key concepts 
this is just involves you defining what ansible is 

  What is Ansible?
How ansible works.
What are the benefits of Ansible?

  ****at an interview they might ask you
 or  your suppose to implement it in your organisation, how wil ypu sell it, how will you convince your org that they need ansible
so you need to understnad,what is is , how it wrks and its benfits to an org

 2) we will see the process of hw to install ansible and we will be able to have a script to install ansible on our ubnuntu server

3) we wil look at the ansible config file. like hw do u configure ansible 
once you install the ansible software in an ec2 instance then it gets to a point wher you need to configure it, hw is this ansible goin to automate process

then ansible will be working with what is called managed nodes, so we iil look at hw we can configure managed nodes
how we can use ansible to be able to patch other servers, to be able to configure other servers , we will look at how we can configure that

4)  we will look at Ahod commands 
like when you run now commands in ansible , we hv commands that you can run on the command line , what we call adhod commands but we wil also see that we can use playbooks

5) we will look at what ansible roles are 
6) dynamic inventory 
 and finally
7) ansible vault


   but for tonight we go over the introduction, try and install ansible and see hw we can configure some managed nodes or remote nodes using ansible




                                       WHAT IS ANSIBLE 

 Ansible is an open-source configuration Management, deployment and provisioning Automation tool maintained by Redhat. the vendor 
It is very, very simple to setup and yet powerful.
Ansible will be helpful to perform:
Configuration Management
Application Deployment  e.g we can use it to deploy in k8, we can write a playbook that we can use to deploy in k8
Task Automation  , we can automate task just by using ansible 
IT Orchestration



                                                 HOW ANSIBLE WORKS
 **mee; control node, ansible controller : this is the server wherby you hv installed your ansible software on this ec2 instance
Ansible works by connecting to remote nodes (hosts) and pushing out small programs, called “Ansible modules” to them.
thru ssh connection am able to control this multiple servers frm my control node


Ansible works by connecting to remote nodes (hosts) and pushing out small programs, called “Ansible modules” to them.
e.g you hv your ansibleserver, this is the server wherby you hv installed your ansible software on this ec2 instance as such this is my control node, ansible controller 
bc its the server that have installed my ansible server and after i have that i can hv multiple remote nodes, i can hv other ec2 instances/servers  one can be a window server,
the other a redhat server , then what ansible does is , am able to control this multiple servers frm my control node thru ssh connection 
once it has a ssh connect it connects to remote host (the windowd and redhat servers) it pushes your ansible modules inside of the servers that its controling, once that is done, the module wil perfrom a task, lets say i want to create a file inside 
of this so i can use ansible to go insid ef this ec2 istance n create a file so its goin to use a file module, it wil push the file module over ssh , once its moved , ansible 
wil use the file module to create that file accoridng to the specifictaion, once it creates the file it deletes the module and once it accomplishes that task , it marks that
task a complete and then it deletes the module   . 

   **********10:48
 on the window server, i can push a program that will congigure the server and once its done the module is taken out
this is how ansible does 


The pushed programs/modules will be executed on remote server by Ansible over SSH and removes them when finished.
Unlike Puppet or Chef it doesn’t use an agent on the remote host, Instead Ansible uses SSH. It is agentless.
It’s written in Python which needs to be installed on the remote host.
This means that you don’t have to setup a client server environment before using Ansible ...( i bliv this is diff frm kub where you have to setup Agents/worker nodes)

13.11
  ******* bc ansible is written in python thefrore python needs to be installed on your remote node bc ansible runs on python so the firtsthing is python needs to be 
installed on the remote node for ansible to wrk , so this means you dnt ned to setup a client server env before before using ansible 
all you need to do is setup your ansible server then inside of your configuration file which we call the host file , you just need to pass the ip address of the 
particular server that you wnat to patch or configure then ansible will take care of that so you dnt have to do any setup on these particular servers
so thats basically how ansible works




                              OTHER CONFIGURATION MGT TOOLS
11.27

   INTERVIEW QUESTION
 what other configurtaion mgt tools do you know ??

ANS: 
 Apart from ansible, puppet , chef is also a configuration mgt tool 
this two uses agent on the remote host while ansible uses a push mechanism and thats why ansible stands out 
ansible pushes modules so its your controller that initiates, it pushes out modules so it doesnt need agents in your seververs
unlike puppet and chef that need an agent bc the use a pull module and bc they use a pull mechanism as such you have to install a puppet agent of a chet agent inside of 
each node bc it is the agent that will initiate that particular push bc your controller will be pulling (i bliv he meant the controler will be activating the pul by the agents
it uses a pull mechansim when it does the configuration
so ansible stand sout bc it doesnt need an agent , it uses a push mechanism as such its agentless 

***online...
 Ansible uses SSH/WinRM to push configurations, while Chef/Puppet use agents that pull configurations from a master server, requiring more setup but providing continuous state enforcement. 







   INTERVIEW QUESTIONS 

  BENEFITS OF USING ANSIBLE

It is a free open -source Automation tool and simple to use.
It Uses existing OpenSSH for connection ,    most of THE servers that we provision already hv open ssh configure so ansible jsut uses this  for it to do configuration
Agent-less –                             No need to install any agent on Ansible Clients/Nodes
Python/YAML based                        .... playbooks are written in yaml language n yaml are very easy, so ansible is easy to use 
Highly flexible and versatile in configuration management of systems.
Large number of ready to use modules for system management  ,  ansible community and redhat they hv a whole lot of module that are ready to be used
                                so u dnt need to create or re write anything just use the existing module, we hv a lot of modules that comes preloaded when u install ansible
Custom modules can be added if needed        


******** just knw what ansible is, knw how it works, once you knw how it works you are able to present this in an interview , you are able to easily talk abt ansible just
based on this and the benefits

so if your wroking for a coy that doesnt use ansible yet and you wnat to convince them , may they are alwys patching servers, alwasy sshing into servers manually to do
configuration then you can introduce a configuration mgt tool as ansible 


VIDEO 2; CLASS34

                    USES OF ANSIBLE

with the help of ansible, we can push configuration to the servers and the configuration can perform diff tasks
ansible can perfrorm severaltask , it can group our servers, file mgt, user mgt, etc ,, bt first ansible needes to conect to the host(servers) and for it to do that , it 
wil depend on the host 
e.g windows host will be treated diff frm linux host

                ANSIBLE USE SSH PLUGGING TO CONNECT TO LINUX HOST & WINRM FOR HOST ON WINDOWS
it will use ssh pluggin to connect to linux host and for host on windows it will use winrm  ***online winrm has to be installed in  the windows system.
Servers:
    UsersMGT
    FilesMGT
    ServicesMGT
    PackagesMGT
    deployments, manage,
    build, test and configure apps 
Ansible is an open source AGENTLESS :
  Configuration Management tool, 
  deployment tool and/or  
  provisioning tool maintained by Redhat






   17:32                                         INSTALLATION
                           Ansible is designed to run on Unix/Linux systems, therefore Windows systems aren’t supported for the control node.
 this means that the control node has to be either linux or unix for ansible to be installed once it is isnstalled, it can controll the remote nodes whether windows 
so a control node cannot be windows
25.35**am creating both ubuntu and redhat server for remote host,  **** but ansible is installed only on ubuntu



     HOW DO YOU INSTALL ANSIBLE
https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/01-Introduction/02-Installation.md

   Ansible is designed to run on Unix/Linux systems, therefore Windows systems aren’t supported for the control node.
 this means that the control node has to be either linux or unix for ansible to be installed once it is isnstalled, it can controll the remote nodes whether windows 
so a control node cannot be windows but tonight installation we will be installing it on a redhat 
for maco s, the operating system is linux , if you have mac then you can run ansible directly frm your mac bc thats a linux env
but on windows laptop, you cant directly run ansible on ur windows server u hv to create an ec2 instance or what is called a windows subsistence of linux,  wsl , mayb ubuntu
or contos os then you can for sure install ansible and run lt locally 
bt for our case we will run ansible on an ubuntu sever

Ansible is python based and therefore the control node and the managed nodes need to have python2 or python3 installed on them.
******* the good news is that most of our system already cm with python installed bt also ansible once it connects to a system, if python isnt already installed,its goin to
install python basically 

Ansible can be installed in three ways:

Using yum or apt       ******** if ur installing on ec2 instance
Using pip              ****** package manger for python
Using compile file       **** download / use a complie file     ****  https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html 
                                in the link u can see hw we ar able to install ansible

***online... 
APT and YUM 
are operating system (OS) level package managers for different Linux distributions, used to install system software and libraries written in various languages.
while
PIP, on the other hand, is a language-specific package manager used exclusively for packages written in Python. 


   ****** we are installing ansible on ubuntu , meaning it will be our control node 



                           STEPS FOR ANSIBLE INSTALLATION
....
  NO.1
******* 21:44              PREREQUISITE/ INSTALLING ANSIBLE 

 ###########  Installing Ansible on Ubuntu
           SCRIPT TO BE USED AS AS USER DATA FOR THE INSTALLATION
  $ sudo adduser ansible                   ***** 1st u need to create a user who willl install ansible, this user will install the ansible software
  $ echo "ansible ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ansible       ********* we add him to sudoers group , for sudo right bc he will be installing packages
  $ sudo su - ansible                                      ****** switch user to ansible 
  $ sudo apt-add-repository ppa:ansible/ansible            ****** once ansible is installed in our env,,always remeber ,the user that instal the sf ware is the default user
  $ sudo apt install ansible -y                                                                                 ansible who ansible will be expecting to connect with 
       




                   **meee, THE DEFAULT USER IS THE USER I CREATE TO INSTALL ANSIBLE 
                                   ****** if hv installed this user as ansible and hv installed ansible sfware as an ansible user then when am making an ssh connection by
     default ansible in my control node wil be looking for a user in the remote node called ansible 
########thats smt u really need to pay attention to and understand how it works ############


                            WE SSH/CONNECT TO THE DEFAULT USER IN THE REMOTE HOST \\(the software;Ansible wil be looking for the default user to connect)
         a user who installs the sfware, it is the default user that ansible expects in the remote host bc when u do ssh connection , do so ssh to a aspecific home of a user
e.g thet why we do ssh ,then ec2 @ a certain ip  OR ssh you pass the key, then u do ubuntu @ we are always trying to do ssh to a certain user, default user
  ********* then for ansible if we hv install ansible as an ansible user then this ansible user becomes the default user that when you do ssh ,anible here(control) will be
seeking to connect with a user in the remote 
25:41
    if i install ansible in the control as a user called Ken, then my default user in the remote that ansible will be looking to connect with will be a user called ken
bc that becomes the default user in ansible , this is how We can install ansible on ubuntu

    *******am creating both ubuntu and redhat server for host


##############  Ansible installation on REDHAT EC2                  the same when installing on redhat
           thiS script will use pip bc its goin to use yum to install python and pip , then il use pip to install ansible as the user bc hv done sudo -su as the user

SCRIPT TO BE USED AS AS USER DATA FOR THE INSTALLATION 
  $ sudo useradd ansible 
  $ sudo hostname ansible 
  $ echo "ansible ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ansible 
  $ sudo su - ansible # Enable PassowrdLogin and assign password to ansible user 
  $ sudo yum install python3 -y 
  $ sudo alternatives --set python /usr/bin/python3 
  $ sudo yum install python3-pip -y 
  $ pip3 install ansible --user


   26:46 *****                           IN THE REMOTE NODES THE DEFAULT USER DOES THE INSTALLATION/PATCH WORK
          then once have installed ansible thers a script here for our remote nodes , then rmember the default user ansible wil be looking for is a user called asnible
it means on my remote node, i need to have a user called ansible that am setting as the default so that when asnible pushes the module, it is pushing to home of this
ansible and it is this ansible user in the remote node that will do the installation/patch work 


NO2.
###### Script to add user, password and enable password authentication
             ****we will use this password when we establish an SSH Connection using the password option as illustrated in video2
                  this script changes PW authentication from no to yes.

#!/bin/bash
$ sudo useradd -d /home/ansible -s /bin/bash -m ansible    ********  it is pushing to home of this ansible and it is this ansidible user in the remote node
$ sudo echo "ansible:ansible" | chpasswd                   *** giving the user PW and the PW is ansible 
$ sudo echo "ansible  ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ansible              ******** addding user in sudoer
$ sudo sed -i "/^[^#]*PasswordAuthentication[[:space:]]no/c\PasswordAuthentication yes" /etc/ssh/sshd_config       **PW authentication needs to be enabled inside sshd config
$ sudo service sshd restart


                                      WE HAVE TO CREATE THE SAME USER (name) IN THE REMOTE NODE
 28:45 ******in summary, bc hv installed ansible in the controller as ansible , bc hv installed a suer there as ansible , i need to create a user in the remote called ansible
this is the user that ansible in the controler wil be pushing this remote nodes to 
the system with the remote node has to hv PW authentication enabled bc if this is a linux sysytem,(the remote node sys) linux sys by default has been designed to communicate 
using ssh keys and therfror PW authentictaion by default has been set to false, ur nt allowe dto use a PW , bt sinec we are creating a user in the remote sys, for you to be 
able to transfer a key, you will need to transfer a key (aagin ull see when we cm to authentication) to a particular user bt ull need to use a PW for the key to be transferd

*****29:52                                        TRANSFER KEY TO USER IN THE REMOTE NODE FOR PASSWDLESS AUTHENTICATION
    Right now am goin thru the overview, so once you guys get the big picture we will go into the actuall installation
so the reason why we nid the ansible user in the remote node sys is so that we can transfer a key to them, after wich we can do ssh without a PW, wich we will see passwordless
authentictaion 




  NO.3   ************   THE AUTOMATION PROCESS USING TERRFORM & SOME HIGH LEVEL BLOCKS/THE USER DATA
  30:50 ######## lets go ahead with the Installation
so again as i said , at this stage we wil be using automation
so inside of this Ansible dir, i provided for you some terfrm code , we will use trfrm to easily create our resources
https://github.com/LandmakTechnology/Ansible-mc-series/tree/main/01-Introduction/terraform%20files

   ####### a)   data.tf
thers a data source for our ubuntu server , to get our ubuntU AMI 
thers also another data to get our redhat bc am creating both ubuntu and redhat server for host 

######## b)   ec2.tf
   ***** then for our ec2 , the first resource am creating is for ubuntu server 
  this ubuntu server the AMi is using a data source which is for  ubuntu 
the instance type am passing it as a variable , looking at the variable file it is t2.micro (default)
for user data am pasing a script, d same script that i showed your guys to instal asnible on that particular ec2 instance , so am using that same particular script (NO.2) for
installing ansible on that ec2 instance (the script is the file we hv called ansible-install-ubuntu)
 
********* 32:53 bt apart frm that, i also have anoda script which i will talk to you guys abt 
  apart fr m that script, i have 2 scripts that i want to provision, i wnat to configure my instance with 


                  SCRIPT FOR THE UBUNTU CONTROLL NODE (script called ec2.tf: Contains part Bi & Bii)
              PASSING 2 DIFF SCRIPTS AS USER DATA; 1ST SCRIPT TO INSTALL ANSIBLE & USING "template_cloudinit_config" FOR THE 2ND SCRIPT TO INSTALL VSCODE
.......... Bi)           control node 
   #resource block
resource "aws_instance" "ubuntu" {
  ami           = data.aws_ami.ubuntu.id                    **referencing the data sourec file for the ami
  instance_type = var.my_instance_type                       ***referencing the variable file/block for the instance type
  #user_data     = file("${path.module}/ansible-install-ubuntu.sh")  referening the Ansible installation script bt commented out bc we using ata.template_cloudinit_config.user-data.rendered 
  user_data = data.template_cloudinit_config.user-data.rendered           **referening the ansible installed on ubuntu script & vscode installation script

  key_name = var.my_key                          ***meeee.... referencing the key variable block in the variable file
  tags = {
    "Name" = "Ansible-Ubuntu"
  }
}
  

   ********* 32:53 bt apart frm that, i also have anoda script which i will talk to you guys abt 
  apart fr m that script, i have 2 scripts that i want to provison, i wnat to configure my instance with 


**************

  33:16   USING 2 DIFF SCRIPT AS USER DATA ON AN INSTANCE

    INTERVIEW QUESTION
How can you pass 2scripts as user data on an instance ???? 

ANS:

 because of how very flexible terfrm is, it gives you that opportunity to do that through what is called a datasource called :
this data source is called:
    "template_cloudinit_config"    , its a template that you can use , he called it (name) 'user-data'


......... Bii)  ec2.tf  ...continues
                         DATA BLOCK TO INSTALL THE 2 DIFF SCRIPTS

  data "template_cloudinit_config" "user-data" {
  part {
    content_type = "text/x-shellscript"                                     ********* for content type am passing a shell script
    content      = file("${path.module}/ansible-install-ubuntu.sh")
  }
  part {                                                        ********but am passing again a 2nd script 
    content_type = "text/x-shellscript"                           ****** 2nd part again here the content is a script, 
    content      = file("${path.module}/vscode-install.sh")       ***** d content is anoda ascript that i wil use to instal vscode inside of my ubuntu
                                                                  so that when we start writing playbooks, we can actually write playbks and run them at the same time
   instead of us vi ing, writing play bks on our ide here then copying , then goin to the ubuntu an vi , create a file and do all that  .... 
 so am installing this vscode inside of my ubuntu , so thats the script that am using, the script is called (vscode -install.sh)


  35:00
      #######  C)                       #(vscode -install.sh)

   sudo apt update
sudo apt upgrade -y
sudo apt install software-properties-common apt-transport-https wget -y
wget -q https://packages.microsoft.com/keys/microsoft.asc -O- | sudo apt-key add -
sudo add-apt-repository "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main" -y
sudo apt install code -y

in the script am just doin  sudo apt update 
am installing the sfware .. wget
it is getting the repository for vscode
and am using apt to install vscode which is what is called vscode   , so it will install it frm the apt repository 


   so thats what am doing with this user data, (Bi) bc am using 2scripts 
  
user_data = data.template_cloudinit_config.user-data.rendered

** **** if its one script, ill just pass it like this: file
               #user_data     = file("${path.module}/ansible-install-ubuntu.sh")

but bc its more than 2, if your given 3scripts, 4scripts, that you need to install then ull have to use a data source called :template_cloudinit_config

 36:14 ####### once we have this configured, then we ill run our ansible 
now for the host, those that we are goin to manage, like our host 
am also creating 2ubuntu instances and am creating them as the ones we will use as nodes to manage, as our managed nodes
and am using count meta argument , and the name and the type .. this is a meta argument that we knw 
and on this insatnces am using user data but on this user data, am just passing a file


 ....... Biii)   ec2.tf  ...continues
}

resource "aws_instance" "ubuntu-hosts" {
  ami           = data.aws_ami.ubuntu.id
  instance_type = var.my_instance_type
  user_data     = file("${path.module}/create_ansible_user.sh")    ***referencing the file is to create a user, am creating d ansible user inside of my host 
  key_name      = var.my_key                                                                  script name:(create ansible user)
  count         = 2
  tags = {
    "Name" = "My-Ubuntu-${count.index}"
    "Type" = "My-Ubuntu-${count.index}"
  }


    ## ## D  
    THE SCRIPT TO CREATE 2 INSTANCES FOR THE REMOTE HOST & ANSIBLE USER  & ENABLING PW AUTHENTICATION DYNAMICALLY ... (Script referred to in Biii above...

THIS file is to create a user, am creating d ansible user inside of my host am also enabling PW authentication dynamically 
am running a script to enable PW authenticataion, to change it frm no to yes in the etc ssh sshd_config
then am goin to start the service

   #!/bin/bash
sudo useradd -d /home/ansible -s /bin/bash -m ansible
sudo echo "ansible:ansible" | chpasswd
sudo echo "ansible  ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ansible
sudo sed -i "/^[^#]*PasswordAuthentication[[:space:]]no/c\PasswordAuthentication yes" /etc/ssh/sshd_config
sudo service sshd restart


37:37                  ........... continued above
******* 
this 2 servers that am provisioning as my ubuntu am goin to create that user in them n also create an instance
create a user enable PW authentication and all that 

****38:06
AM also creating a redhat
am using a redhat AMI
the instance type is the same 
but in this redhat am just creating a user same user as this (Biii) bc i wnat to be able to manage both ubuntu and redhat 
so Biii and Biv are my manged nodes while  Bi) is the control node 
******* my control node am installing ansible and am installing vscode on them 
 and Bii) is my data block to run the 2scripts (to install ansible and vscode) 


......... Biv)
                 SCRIPT FOR THE REDHAT REMOTE HOST
}
    resource "aws_instance" "rhel-hosts" {
  ami           = data.aws_ami.rhel.id
  instance_type = var.my_instance_type
  user_data     = file("${path.module}/create_ansible_user.sh")
  key_name      = var.my_key
  count         = 1
  tags = {
    "Name" = "My-rhel-${count.index}"
  }
}


*****   38:25
so with this, i have outputs , i have set my outputs, its just goin to get

  ###### E)
                   Outputs.tf

   ubuntu public ip 
    value       = aws_instance.ubuntu.public_ip

also for the redhat
  value       = aws_instance.rhel-hosts[*].public_ip



   ********39:17
 remember bc am using count , count returns  alist therfor i can output, i can acces values frm a list
thats why when u do an output if you havant passed this list [+] , it will say the instance you are trying to access has 3 or more attributes and its attribute has to be
accessed at a specific instance, this is what it means, 
so whenevr you are trying to output you need to pass {} and put in either 0 or 1 , a specific instance 
but for this redhat resource blk, i only have one count , so i can eith put 0 or a splar or wildcat *, it wil just return the ip of whatever instance is there

   
   ******  am also getting the private ip 
     value       = aws_instance.rhel-hosts[*].public_ip

 all these are what we call attributes, attributes out of that particular instance 


41:05
   ####### F)        provider.tf

 *** this is smt you are familiar with
this is the 2nd half of the file i copied

#provider block
provider "aws" {
  region  = var.aws_region
  profile = "default"            ***********my profile ma just using default bt again i dnt hv to pass that profile there bc its default, bc its default then its just goin 
                                                                to pick that by default

######### G)
   variables.tF


NO.4)

    **********41:40

WITH That, i have my terafrm  set

now in the IDE terminal (like mobaxterm )
am inside of the terrafrm files (i bliv a dir call terrfm filea)
if i ls i see all the files 
******  so  let me run terfrm init
this is the first command you are to run 
you can run init as many times a spossible , it initializes your backend 

  initializes the bcakend 
here my backend is local bc in my terfrm, i didnt pass any s3 bucket
so with this ill run trfrm format ,just to mk sure my code is formatted correctly

terrfrm plan
so the firts tin it does, it runs your data sources
so that template data , it reads the user data
then it goes out to fetch the ubuntuand redhat AMI, and it returns them , those are the ids
we see the user data 

terfrm apply -auto-approve                  ..... 44:48
then it starts provisioning my instances 
he logs into AWS
we see 4 instances that has just been created running 
1)my-rhel -0                **** created  Ansible user
2)my ubuntu -1              **********created  Ansible user
3) Ansible-ubuntu   ,       ************ where i installed the ansible software using the script
4) My-ubuntu-0              ********* created Ansible user



################# H)         ASSOCIATE/CREATE A KEY

   ******47:06

lets go ahead and connect to the ansible server (ANsible-ubuntu)
clicks connect , copy the ssh command 

  ########## one other thing i forgot to mention is that bc we will b sshing into the server so mk sure you create/associate a key
so i had already ahd a key created and on my ec2, i had passed this key name: key_name = var.my_key  as seen in ( Bi, Biii, and Biv) 
and in the variables.tf  (G) 

   variable "my_key" {
  type    = string
  default = "ansible-key"            ******** the key name is ansible-key , this is the key that uve created (shud hv already created)in your aws console
}


                                      WE DOWNLOAD THE PRIVATE KEY BUT THE PUBLIC KEY REMAINS IN AWS
  in his aws key pairs
i created the key, i donwloaded the .pem keybut this key here is the public key that always remains in AWS, that is installed inside of ec2 instance when you provisoin
so you download the private key but the public key remains inside of your instance and that show authentiaction happens 




********* 48:22              
     N0.4 continues             CONNECTING TO THE CONTROLLER UBUNTU SERVER

so when we go to our ansible-ubuntu and try to connect (click connect) the ill use ssh client then copy the ssh command
back in the IDE, ill split my terminal 
cd into downloads bc thats wher my key was downloaded   ***I bliv theis download dir is the download folder we hv on our computer, i guess using ubuntu or mac we can access it bc 
then il paste the ssh command                                                                                                         the operating system is linux       
am trying to connect to this instance for the first time
my env is linux bc am using a mac , mac is linux
so am trying to connect a linux sys to a linux sys
lets see what will happen 
 after pasting the command, its asking , are you sure you want to continue connecting yes/no
once i type yes , enter
now am connected
it did conncet me bc i already change the permission of the key 
so if ur doing it for the firts time it wil give you an error that your key is open 
so whwn your connecting a linux to linux then you need to change the permission of the key to  400
you need to use change mode 400 the your key name  (chmod 400 key-name)
if your connecting from a linux env to another linux env 
but bc i did it already , the key.pem i already changed the permission to 400 thats why its allowing me to connect

let see if our script ran 
sudo su - ansible 
ansible@ip-172-31-17-108
so yes, i see that ansible user was created , i hv a home of anisible , thers a user called ansible 
if i type the wrd ansible then its suppose to give me this output
meaning that ansible was installed inside of my server
so ansible has ben installed inside of here, i hv my user, my first script, i first created the user then installed ansible as an ansible user
now with this if i run the command ansible, i see that anasible has been installed in my env

                  ***meeee... cont in video2

******* 52:05
ONCE UVE DONE THE INSTALLATION of ansible there is what we  call an ANSIBLE_config_file
  A configuration file 


   WHAT IS ANSIBLE configuration file/ ANSIBLE DIRECTORY STRUCTURE

https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/01-Introduction/03-Ansible_config_file.md

   ansible has what is called a default dir :

                          ANSIBLE DIRECTORY STRUCTURE

The default ansible home directory is /etc/ansible
This directory will consist of:
a) ansible.cfg               ***ansible config file
b) hosts                 ***a host file
c) roles           *** a dir called roles

                                        HOME OF ANSIBLE /etc/ansible
if i run 
ansible@ip-172-31-17-108: $   pwd
/home/anasible                                ** am in the home of ansible
bc i did su -ansible, i exited the home of ubuntu and now am in the home of ansible 
now been in the home of anasible , the default home of ansible is   /etc/ansible
lets cd  
ansible@ip-172-31-17-108: $  cd /etc/ansible
ansible@ip-172-31-17-108: /etc/ansible  ls                  TO SEE THE 3 ENTITIES IN ANSIBLE HOME
anisible.cfg   hosts  roles                      ********* 2files and a dir called called role 


   INTERVIEW QUESTION
if you are to cd into   /etc/ansible, what do you expect to see if you have worked with ansible what do you expect to see in that dir 

  ANS:

in the etc ansible, this is the dafault ansible home, ansible lives in /etc/ansible, this is default
in the /etc/ansible, you will seee what is called anisible.cfg, this is the ansible config file, everything ansible does, it has to read this configuration file 
this is the dafault :anisible.cfg 
default meaning you can create anoda file and override this, you can create another configuartion file and override this bc this is default
apart it has a hostt file
this is wher we put the ip address of the host that we are trying to manage 
so if i wnat to manage like the 2 or 3 ubuntu servers it just mean iil go to the host file and do an entry inside of the host file , once that is done ansible wil be reading
the host file to know which servers it has to configure



     ROLES
we hv a dir called roles 
as we will be talking abt playbooks but smt higher than playbooks, we can actually craete roles
roles are like modules that u can custom create anD call them as needed, so u can create what is called roels
i can crate as role to config tomcat, jenkins and whwnever i need it i jsut call the role inside  of my playbk and jenkins will be installed
so i dnt hv to rewrite my playbook with all the place ( idnt undestand)
i can write a role once and call the role to do my configurtaion
so all the roles will live inside of the roles dir 
but these are the 3 entities that you expect to find in the ansible home 


  ****  56:25

Default ansible configuration file

The default location is: /etc/ansible/ansible.cfg, in which we can make various settings like location of inventory file, host_key_checking as False

****** it is one in which you can make various changes like wher your inventory is wher your host file is , u can make all those changes inside the configuration file 


     HOST
when you trying to log into your instance for the first time like you saw, it wil always ask you do you wnat to add this server like it checks the authenticity and you hv 
to accept and say yes so thats we call host key checking
so by default host key checking has been set to true meaning evrytime ansible makes a conection/ a sever makes a connection, you have to confirm that you wnat to but
that is not what we want in automation, in automation we dnt wnat the process to be interrupted, we want the process to go on automatically 

                AUTOMATING HOST KEY CHECKING
we will go into the ansible config file and turn the host key checking to false so that our server/automation dosent staop to ask us to confirm 
so all that is done in the ansible config file
 
           host_key_checking = False                                 *****1:02:22
                     or                          ****export an env var called ** and set it to false with this ansible wil nt ask you to confirm the authenticity of this var
        $ export ANSIBLE_HOST_KEY_CHECKING=false


contd     ....... 58:00                         CREATING ANSIBLE CONFIGURATION FILE IN A DIFF LOCATION
**********  Default ansible configuration file

But we can define ansible configuration file in different location and for this there is a priority for this files.
********** so we can create a diff ansible config, this is just a default loctaion:/etc/ansible but we can create it in a diff location 
You can generate ansible.cfg by running the command $ ansible-config init --disabled > ansible.cfg


  WHATS THE PRIORITY THAT ANSIBLE LOOKS AT  (WHEN SEARCHING FOR THE CONFIGURATION FILE
********** when your creating , the priority that ansible looks at 

Locations with priority(starting from top to bottom):

                                                                  1st creating an env variable:ANSIBLE_CONFIG
ANSIBLE_CONFIG environment variable            ********** if you can set an env var and point it to d ansible config (disabled > ansible.cfg) as a configuration file like 
                                                             that, then it tk precedence, env variable always takes precedence over everytin else 
                                                                             
./ansible.cfg from the current directory    ****** 2nd , if u have ./ansible.cfg, in your pwd , then its the file ansible will be looking at for to read d configuration
    thefor wil al that, it just means that if am working on the dev env, i can create a  dev ansible.cfg for the dev env within my working dir and thats wher ansible will get
its configuartion, also if i move to prod, i can create anoda configuartion file for ansible that has a diff configuration bc this is a diff env within that dir and this is 
wher ansible will read 
                                                       59:23 
~/.ansible.cfg file present in home directory       ********* 3rd,  if it doesnt find the config file in the current dir it will look at the home of the user, anywhere in the 
home of that particular user, does it have an ansible.cfg file if its presnt then thats where ist going to get its configuration


/etc/ansible/ansible.cfg default ansible.cfg file.   ***** finally, if it doesnt find it in the 3rd location, then it goes to the default location: /etc/ansible/ansible.cfg

Ansible will only use the configuration settings from the file which is found in this sequence first.

It will not look for the settings in the higher sequence files if the setting is not present in the file which is chosen for deployment
ie it will nt look for settings here /etc/ansible/ansible.cfg if you have a file here ~/.ansible.cfg,  its always reads whats closest to it 
so this is how we use ansible in various envs   ...........1:01:24



     INTERVIEW QUESTION
What is the precedence or priority of ansible when its searching for the configurtaion file 

 ANS : 
***meee.. 
Because ansible has the option of creating the config file in a diff location other than the default location, so when searching for the file it follows an order of precedence

1ST : ANSIBLE_CONFIG        env varibale.,, this takes priority , if not seen it goes to 
2nd:  ./ansible.cfg         pwd dir 
3rd:  ./ansible.cfg         home  of that particulr user 
and if not it goes to the 
default : /etc/ansible/ansible.cfg


                                HOST KEY CHECKING

      DISABLE THIS FEATURE INSIDE THE ANSIBLE CONFIG FILE  
    host_key_checking = False                                 *****1:02:22
                              OR                         ****export an env var called ** and set it to false with this ansible wil nt ask you to confirm the authenticity of this var
        $ export ANSIBLE_HOST_KEY_CHECKING=false



****** so this is what the ansible configuration structure is



       ########### example of configuration file
https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/01-Introduction/03-Ansible_config_file.md

as you see almost everythin has been commented out bc they are default, they hv been set as default already , so bc of that they hv ben commented out

e.g lets say i hv my inventory right here but its pointing to  /etc/ansible/hosts


                   EXAMPLE OF A CONFIGURATION FILE

1.02...
       #some basic default values       ** AS you can see everytin has beeen comanted out bc the values are set to default
#inventory     = /etc/ansible/hosts
this is wher my inventory is, this is where ill put the list of the servers i want to configure, ill put it inside of the host file, but if i want to create this inventory
somewher else, e.g i want the hsot file to be insid eof my pwd, then ill need to cm to this configuration file and comment this:
#inventory     = /etc/ansible/hosts
so that am activating the inventory and change the part to where am pointing that inventory to
so if i leave it commented, it will assume this is default , so it will always go to the  /etc/ansible/hosts
but if i uncomment it then i can define my path where i want ansible to read the host  e.g i can put a path like .pwd
then ansible will be looking frm that particular working dir, i can just give it a path to wher my inventory is 

    ******   1:04:37
ther are many thisngs that you can configure here

  Also, for host key checking 

   # uncomment this to disable SSH key host checking
#host_key_checking = False

by default it is true but for it not to check then uncomment this so that the host key checking will now be false , so that it wil not check for the authenticity and this is
smt that you will need to do for automation other wise, your ansible playbook will stop bc it will be wiating  for you to confirm if u want to continue or not. .. 




   QUESTION
1) FRM WHAT YOU SHOWED US TODAY U USE Ansible to provision the conrol and nodes server , my quation is can anisble also deploy in servers that already exist that you dnt hv
to provison and how do you do that???

  ANS:
YES AND WE WILL SEE HOW TO DO THAT, all that ansible needs is an ip address 

2)in creatin the control and managed nodes, i knw we added the user to the sudoers grp, is there any sg that you are creating in the background for any other connctions
mayb for other applictaions

ANS:    NO
 THE only sg that comes by default is ssh , ansible only needs ssh 


3)why do we output does attributes , do you have any use cases?? 
  ANS:
i outputted these ip addresses bc i wnat to configure my host file, in my host file i need ip addresses, i dnt wnat to go on the aws console to try and copy those addresses,
i can dynamically get them here like reading an output so am just trying to avoid goin to AWS
and this is smt you will find as engrs u wanna mk life easy for yourself, if terfrm can do the wrk for u let it do the work for you
i dnt have to log into aws to try and copy the ip address fo rthe diff instances bt i can just create an output and get my ips here so when i, go to create my host file 
and thats why i put this screen right here,(host file screen) i say ill need it ,ill just copy my ip adress for my ansible host n remote ,ill just copy n put in my host file



  lets tk a braek now , when we cm bk at 9, we ll see hw we can configure our managed nodes using the PW and using ssh keys and probbaly be able to run the command 




####################   1:21:00 
vidoe 3

   so whenevre we rn ansible, the 1st tin is ansible will read the configuration file , we can the define the configuartaion file in diff locations with the given priority
so whener we run ansile, it wil look for the config file based on the priorities, it wil check if we pass env variable , if its nt there it wil check the pwd
so if i created a playbk where my ansible.cfg is , ansible wil use the file to read the configuration thats the priority, if it doest find it it wil go to the home of the
user and then the default 


****** so this is what the ansible configuration structure is
haven said that, lets go now to configure our remote node /managed nodes









