
?????????  we were able to build with just npm install ,,,  that was without nodejs so whats the need of nodejs

mvn package will (validates, compiles, & test before packaging)

git has to be installed  to pull the code and the repository

**** JENKINS SHARED LIB IS THE CONCEPT OF HAVING A COMMON PIPELINE CODE IN THE VERSION CONTROL SYSTEM THAT CAN BE USED BY ANY NUMBER OF PIPELINES JUST BY REFERENCING 
**** IT. IN FACT, MULTIPLE TEAMS CAN USE THE SAME LIB FOR THEIR PIPELINES.


jenkins Shared Libraries:
  Jenkins pipeline scripts:
  Jenkinsfile
Programming and scripting languages:
  bash-shell scripting
  groovy 

35.32 go tru the note, the SRC and what the variable files do 

HW TO configure jenkins shared lib
  1. Create Shared Libraries 
  2. Configure Library 
       https://github.com/LandmakTechnology/JenkinsSharedLibraries
  3. use library in pipelines script

37:30 **** to config the shared lib -in jenkins- mange jenkins-config sys: global pipelines lib; add: lib name -def ver:master- allow default to over , . include@ lib
- retrival meth: modern-:git- 39.27 then jen lib repo url- save 
*******to use the shared lib ...then add new item- pilpe line - copy the pipeline script and paste -build


32.00*********************************inside his github repo for jenkins shared lib , he has a dir called var and inside var theres a script called common.groovy 

 
JSL:
========
common.groovy
def call(String stageName){    *** we are defining a function called call n it wil depend on the string ; stagename.. we are caling the function based on the stage name
  
  if ("${stageName}" == "Build")  ****** we are defining each of the stage i.e if the $ stage name is = to build then mvn package is the command to run
     {
       sh "mvn clean package"
     }
  else if ("${stageName}" == "SonarQube Report") ** we can equaly run multiple stuff here like the 2 e.g below
     {
       sh "echo Running Code Quality Report analysis"
       sh "mvn clean sonar:sonar"
     }
  else if ("${stageName}" == "Upload Into Nexus") .. if we hv 10 commands to run then ders no nid for that , just upload into nexus is fine.
     {
       sh "mvn clean deploy"
     }
}

42;11 Jenkinsfile  .. starts with 
//@Library('LibraryName') _ 
we are creating a  // Declarative pipeline

@Library('LandmarkSS-sharedlibs') _
pipeline {
agent any 
tools {
    maven "maven3.8.4"

  }
stages{
stage('CheckoutCode'){ or to pull the code 
  steps{
    git 'https://github.com/LandmakTechnology/web-app'   *** if am pulling frm a public repo all i nid is the repo name ** 45:43
}            46:35 *our lib does nt include the stage for git pull,, it starts with doing a build ...etc ie the common stages so in my pipeline script am doing a gitpull
}
stage("Build"){ 
  steps{
    common("Build") ### we can run sh "mvn clean package" bt i dnt wnt to use the trad option, i wnt to use my shared lib, wich hv some common steps, rather ill call a function
                    i hv a file called common.groovy, i wnt to call d function, so am calling d build stage of the function which makes it easy bc  a step can hv up to 10 commands 52:50
                                            
}
}

stage("Execute SonarQube Report"){ 
  steps{
    common("SonarQube Report") ##1:01 our steps is indicating common bc i am using the common.groovy file in my shared lib, if i was using stages.groovy then it il indicate stages
}
}
stage("Upload Artifacts Into Nexus"){ 
  steps{
    common("Upload Into Nexus")
}
}
//=========================
}// Stages Close
} // Pipeline Close


common.groovy 
build.groovy 
stages.groovy

1:02 QQQQQQQQQQQQQ interview,, whats ur experience using jenkins, dnt start wit i hv config jenkins, start wit v using shared lib, hv used jen shared lib in my environment bc
                             most of our projects we use jenkins file to run them bc most of our projects ar basically java projects that we support, using maven to do a build
                             for code quality support, uploading to nexus, for al the common stages we v written shared libs to ease the process n mk our pipeline projects, 
                              jenkins script to be easily readable bc der cud be 10 steps in our stage so it makes it easy
 1:33:15   what hv u been doing in landmark..  i hv been maintaining jenkins pipeline scripts, shared lib for files, that had been my job, i maintain them, modify, update
customize them... at ur company most of the files already exits so u dnt nid to rewrite them, jst maintain them.
##### why do we use sh and not bash since bash has more extensions.. genally we use sh for our jenkins job bt bash also wil work 



declarative pipeline script                                     47:00 declarative tool is done, it has pull the code,pull was successful 

@Library('LandmarkSS-sharedlibs') _
pipeline {
agent any 
tools {
    maven "maven"
    
  }
stages{
stage('gitpull'){
  steps{
    sh "echo start of ebay bts project"
    git 'https://github.com/LandmakTechnology/web-app'
}
}
stage("Build"){ 
    steps{
      common("Build") 
}
}
stage("Execute SonarQube Report"){ 
  steps{
      sh "echo code quality report ok"
    //common("SonarQube Report")
}
}
stage("Upload Artifacts Into Nexus"){ 
  steps{
      sh "echo artifacts uploaded"
    //common("Upload Into Nexus")
}
}
//=========================
}// Stages Close
} // Pipeline Close


so far we v seen java applications wich we call java projects
also we v nodejs application which we call nodejs projects 

the main dif btw java appl and nodejs appl   bc nodejs appl is very key when it commes to my resume

java applications -- java projects 

nodejs applications:  nodeJS Projects
=======================================
npm = node package manager 
the command to do a build wit nodejs appl is npm   when ur tryin to build an appl that is written in nodejs we nid a npm, when doing a build with nodejs appl we use package.json
nodejs-APP   vs   java-app
--------           -------
npm =             maven/graddle   -->   Build
package.json      pom.xml -->   Build Script           
npm install       mvn package =  (creating packages) we do a build by creating packages
npm test          mvn test      =   run unit test cases 
npm run sonar     mvn sonar:sonar =  SonarQube CodeQualityReport
npm publish       mvn deploy       =  uploading artifacts
npm = node package manager 
  src + bs + test cases 

we ar doing a pipeline project for this nodejs appl , we ar writng a simple scripted pipeline script
1:09 ## new item- pipeline-ok - copy the pipeline script and paste in jenkins then build
 sudo yum install nodejs npm -y 

the first stage is called codecheckout 
node{
  stage('CodeCheckout'){                  
    sh "echo running ebay nodeJS project"     ###1:11:00 echo shud start wit sh, all the command shud follow a shell
    git 'https://github.com/LandmakTechnology/nodejs-application'    ## we nid the code from github so copy the github project repo (url) for nodejs url
                                                   its a pulic repo so no nid for cred, cloning directly frm master branch
  }
  stage('UnitTest'){   1:16:30     ####  its possible we had a unit test stage b4 the build stage. bt it failed bc no test to apply so we can comment the command
    //sh "npm test"             #sh "echo tests successful" alos if u try to connect to nexus/sonarqube n it fails jst comment on the command 
  }
  stage('Build'){             #### after the code is clone we'l do a build ,, sh "npm install" we are using node package manager to do a build bt b4 a build is done we nid
                                                        to install nodejs in jenkins sudo yum install nodejs npm -y 1:14:05, then paste pipeline script in jenkins n build
    sh "echo creating build artifacts"       
    nodejs(nodeJSInstallationName: 'nodejs17') { 
        sh 'npm install'
    }
  }
  stage('Quality'){    1:30 ## we ar executing sonarqube report for a nodejs appl
    sh "echo CodeQualityReport"
    nodejs(nodeJSInstallationName: 'nodejs17') {   ##1:20 to use the latest version of nodejs ill configure npm in jenkins -mange jenkins- global conf tools -if nodejs
        sh 'npm run sonar'         is nt der then install it in plugin -add: name &save. with this command we ar goin to buid using the latest vers or d ver we wnt to 2 use
    }                     ## 1:26 to execute sonarqube report, bc its nt a java project we dnt use pom.xml, we hv a file called sonar-project js, its the file we nid to config
  }                         and insert my sonarqube server url in serverurl, then for login,we use token- in sonarqube-adminstration-security-users-in administartor:create
    stage('UploadArtifacts'){                           ## a token : name;nodejs- genaterate- copy n paste in sonar-project js ,, i dnt nid a username, copy d stage for sonarqube
    sh "echo npm packages uploaded"                        & paste in jenkins save n build now then we can check in sonarqube for the report
    nodejs(nodeJSInstallationName: 'nodejs17') {  
        //sh 'npm publish'
        // Jenkins nexus intergration 
        // password = admin123  username = admin                 
        // echo -n 'admin:admin123' | openssl base64
    }
  }                             #1:32: is the file name are they syntax or a variable  . anytin u name is wot ull call 

  stage('deployment'){
    sh "echo Deploying applications"
    nodejs(nodeJSInstallationName: 'nodejs17') {
        sh 'npm start'
    }
  }
}


node{
  stage('CodeCheckout'){
    sh "echo running ebay nodeJS project" 
    git 'https://github.com/LandmakTechnology/nodejs-application'
  }
  stage('UnitTest'){
    //sh "npm test"
  }
  stage('Build'){
    sh "echo creating build artifacts"
    nodejs(nodeJSInstallationName: 'nodejs17') {
        sh 'npm install'
    }
  }
  stage('Quality'){
    sh "echo CodeQualityReport"
    nodejs(nodeJSInstallationName: 'nodejs17') {
        sh 'npm run sonar'
    }
  }
    stage('UploadArtifacts'){
    sh "echo npm packages uploaded"
    nodejs(nodeJSInstallationName: 'nodejs17') {
        //sh 'npm publish'
        // Jenkins nexus intergration 
        // password = admin123  username = admin 
        // echo -n 'admin:admin123' | openssl base64
    }
  }

  stage('deployment'){
    sh "echo Deploying applications"
    nodejs(nodeJSInstallationName: 'nodejs17') {
        sh 'npm start'
    }


RESTFUL API = 

http://18.212.53.48:9981/landmarktechnologies
http://18.212.53.48:9981/jsonData
http://18.212.53.48:9981/html 
http://18.212.53.48:9981/redirect
http://18.212.53.48:9981/queryparam 

New-Relic 
  Create monitoring dashboard 
applications:
  High availability
===============
  New-Relic = 50 MINUTEs 
  Resume Preparation video = 55 minutes 

ThinBackup plugin --->
