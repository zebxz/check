79RECAP,  REMOTE DEVELOPMENT, INSTALLING VSCODE, local exec provisioner, Configuring managed nodes., -m option, CREATING THE HOST LIST, establishing an ssh connection,
-k option ,creatING ANOTHER USER (MARK), COMMUNICATING WITH THE USER mark, -u option, HOST AND GROUP VARIABLES, ANSIBLE FACT, (PINPONG),SPECIFYING A USER TO CONNECT TO IN THE 
HOST FILE, GROUP VARIABLES, host level precedence, CRating A fILE ON THE MANAGED HOST

##########################  we knw that host variable has the hightest priority
if variables are defined at host level, it takes precedence over varaibles defined at group level

 summary,
  for remote development
in the configuration file in vscode, we configured our ssh so that we can connect to a remote host, you can connect to an ec2 instance and for that to happen, we passed
vscode installation script & script.sh (dnt knw why we hv 2diff scripts to install vscode)
then,

  59:18********* my summary from  NO.2 to  NO.4
we are passing 2scripts in userdata in the resource blk for our instance (ec2.tf) so we using :"template_cloudinit_config" "user-data & the 2scripts is to install vscode
using script.sh also in the variables file; we passed a variable that enables us select the os we wantt to configure 
if i select linux in d variable (NO.3) then in the null resource, using local exec provisoner d template for var.os becomes templatefile("${ var.os == linux and therfore the
? itineray  indicates it as false & so the interpreter wil be bash then it will run d linux scripts (the templates for linux or windows will be used dynamically based on
our selection in the variable)

   
resource "null_resource" "vscode-config" {

   

2:30 
in the real world 
it wil be a diff scenario that will REQ you to use that basic understaning 
e.g they may say we hv a k8 cl8 that is runing in aws we nid to get a the cluster certificate form that cl8 bc we need it somewhere, if given that task so how wil you do it??

ANS: 
so now bc you understand the concept of, if you have a resource that exists you can get inf/attribute frm that resource, so u knw that i can use a data source, i can employ a 
data source that can specifically go into my eks cluster and return for me the certificate, so nmw thats a concept you understand so now you go to the documentation to see if
you have a datasource that acn access your k8 cluster and when it accesses what can it return, how many attributes can it return
again you just look at the documentation, if you use a datasource for eks cluster it will show you the tins that it can return, the inf it can get, so now when you have that 
concept you are goin to employ a data source to get all the inf that you need

but as we go further into the bootcamp everytin will be clearer the concept will solidify , and everything will make more sense

   ************6:00    importance of boot camp

preparation for transitioning into the bootcamp
cv  and linkedin preparation 
focused on project base so that everyting youv been doing al these concept is solididfied whereby you are doing projects
and we have other advanced concept thay you will be able to tour
helping you prepare for interviews, how your suppose to response


            QUESTION
1)  CAN WE create our resources in global instaed of regions and having issues,??

ANS:     ..NO
when your configuring you cant use global, we use a default , you must pass a region
e.g you want to create an ec2 instance , can you create that using the global option , it needs to be created in a specific region bc it needs to be created in a vpc
so the reason why we hv to pass a default is just incase in our configuration we are not specifying a region atleast aws is proactive to mk sure that your resource will be 
created somewhere, so thats why you hv to set that default region bc resources, most of the resources in aws are region based, we hv very limite global services like IAM
thats why when you go to create a user or a role it doesnt ask you for a region , S3 bucket is a global service bc you can access it frm any region but howeevr, when u go to 
create a bucket youhv to specify a region , bc most of the service are region specific so your reQ to pass a default region so that when a region is nt set in your 
configuration then either terfrm or whatever appli your using wil fall back on a region that has been set as a default
so thats why we cannot global aws configure set globally, we must have a region 


14:00
2) dnt understand how you use count.index and slice in the previous video 
ANS:
we use count index whenever we hv count set 
ITS a meta argumnet which alters the behaiour of how a resource works
when you look at the element function ,that is the first element that we are passing to count, element function  wil always return a number 
when you look at the documentation its just goin to select an item fmr a list , so we are combing those functions
e.g
i hv 10 elemebts in a list and now am using a slice function so am goin to implore that slice function on this list, it has 10 things and i need a slice of 3, or i need to 
slice it so that i get 4 elemet out of the list so ill give the first like a 0, so it menas the slice wil count frm the first elemet to and count 4slices and return taht to 
me so that wil be the value of the count
*********i can also slice frm the middle but say ill say the first slice/elent is 3, so it is goin to start frm 3 and count the 4 elements , 4,5,6,7 , so it will take that
port as the slice and return it to count

*********** the whole reason why we use count and (it becomes clearer in the both camp) we wnat to make our code more flexible, we dnt wnat to hard code values, we want such
that am nt harding coding anything, by putting a value as 2 or 3 on the count bc when i do that i have basically hardcoded it but i want that value of count to be detr by 
mayb d number of subnet so if i hv 5avaialbilty zones then i want the slice to be 5, if i have 3 availabity zones then i want the lsice to be 2 bc its dependent on something
else.

3) hOW do 2 or more engrs work on the same repo without causing a clash , in git we have branches , is it the same in terrafrm
ANS:
in your office you mayb be asked to create a module e.g for a vpc then someone else is given a ticket to also work on the same vpce.g enable login or  the flow logs
it means you both wil clone the same repo , your doing yours he doing yours , when both of you are done , u wil commit he code, depsnding on who commited first the other
person may need to rebase bc now the commit has moved, we stated on the smae commit, w eboth clone frm the main but now bc we hv multiple commit that has come in, it just 
mean that my commit is behind, my main branch has already moved ahead, the commits have moved( am goin tru thsi bc u guys usnderstand hw git work) so it just mean that il
need to rebase my branch before i match my cod e, once i do that w eare colaboarting the that particular repo, now if we are running pipelines, as we run the pipelines the
pipeline wil be bulding our vpc, id changes have happened then those cahnges are goin to be effected, but now the issues comes whne we are running terfrm commands at the same 
time

    *********24:49
 if we are doin in a pipeline then how pipelines hv been set up is pipeline has beeen queued, thers a queue 2piplines will nt run at the same time, once i commit and i do my
push if anoda engr is also pushing at the same time what the pipeline, the CI will do is it will queue the jobs and queing the jobs just means that whover committed the job 
first that pilpline is goin to run, and how it runs is bc am running terfrm, it is goin to put a lock on the state file. this is wher we are talking abt using dynamond DB to 
lock our statefile  and our tstefileis in the s3 bucket, the lock ensuresatha t no other terfrm activity can tk place on that statefile apart from the activity that this 
pipeline is running , so once this psieline is done and the statefile has been updated, it realease the lock and then anoda job can be submeitted
thast what happens terfrm alwsy puts a lock
for us bc we are running it on our local env we hv to configure that lock, we hv to create/configure a dynamond DB thta we will use to lock our ststefile in the s3 bucket
to prevent 2engrs or more running terfrm workflow  on the statefile at the sametime.

********26:28
if u are using terfrm cloud, its done automatically, trfrm cloud wil lock the statefile anytime your doing trfrm workflow so you can only have 1 wrkflow running, after the job 
the lock is is done the lock is taken off , the statefile is unlocked for any other workflow to run

27:00
###### but all this will become clearer when you go furtehr, right now as long a you just understand the basic trffrm concepts, the blocks , the workflow ,jst basic functions
so that you can create a resorce/ data source then that is sufficient, it becomes the building blk for u to build onto that b4 u start thinking of more advanced concept in 
terfrm

                      RECAP FROM ansible 1
continuation frm 1st video
********** 28:34
        

38:00 .. using mail delivery to xplain the pushing of programmes frm the controller to the home of the user in the host/remote nodes

QUESTION...........  43:20

i knw that for terfrm, thers cloud formation that works only for aws but for anasible if i want to wrk with windows, is there a particular one ican choose frm chef & puppet

ANS:
thers linux subsistence you can use if you want to wrk with windows 
i probably think chef and puppet only works on windows, am nt very sure but i can find out n let you knw


*********** 52:00   in data "template_cloudinit_config" "user-data" ,   we passed 2scripts
the 2nd script is to configure the vscode  
content      = file("${path.module}/vscode-install.sh")
i did dis automation so that when we start writing playbooks it wil be easier for you guys
this is a script that dose remote development, wherby you need to bc our ansible is on ubuntu, we need to ssh into the ubuntu server then vi into the ubutu server to create
our playbk they run the playbk, so instead of using that we can use our vscode 


##### A)                                REMOTE DEVELOPMENT
******52:23
opens the vscode:
if you opens the vscode, and look at the seeting comand pallet thers a remote host, you can connect to a remote host, you can connect to an ec2 instance but b4 you connect 
to that remote host, you need to configure it,you need to configure your ssh so that ... # ### your configuring smt like this:

Host ansible:
   HostName   35.07.199.239                           ******* ie is the ip address of the server that you are  creating 
   User ansible 
   IdentifyFile ~/Downloads/elk-instance.pem               ********** once you pass this inside of your ssh config file then you are able to directly use your vscode code 
                                                       to do remote host, to login to that ec2 instance and write your code, create your files , write your play book 
    and run them on your termiinal, so this is what we call remote development

******* for this to happen we passed the vscode installation script:
 vscode-install.sh
this the script thats goin to install and configure vscode
but apart frm that,we hv this (another) script:script.sh  this is the script that will configure vscode, this is d script that will install vscode and ill show you shortly
hw it works 

                                     INSTALLING VSCODE

  why do we hv 2diff scripts to insatll vscode (script.sh and vscode-install.sh )   ?????

NO.1)                         ####script.sh
   #!/bin/bash

sudo mkdir /home/ansible/.ssh/                                      ***********  it needs to mk a dir in the home of ansible
sudo chown -R ansible:ansible /home/ansible/.ssh                       ********  ansible needs to own that dir
sudo cp /home/ubuntu/.ssh/authorized_keys /home/ansible/.ssh/          ******* copy the key frm the ubuntu home n copy it in the ansible server
sudo chown ansible:ansible /home/ansible/.ssh/authorized_keys        
sudo chown -R ansible:ansible /etc/ansible                              ********* basically, ansible needs to own that etc/ansible


NO.2)
*******55:51                  i also added 2scripts
            now if your running vscode on linux this is the script that ur goin to use , it is like template, it is goin to use a template to dynamically replace all that

      linux-ssh-script
 cat << EOF >> ~/.ssh/config

Host ${user}
   HostName ${hostname}
   User ${user}
   IdentityFile ${IdentityFile}
EOF

********** and if your running on windows: 

  NO.2ii)         windows-ssh-script.tpl
   
add-content -path c:/users/Ken/.ssh/config -value @'

Host ${user}
   HostName ${hostname}
   User ${user}
   IdentityFile ${IdentityFile}
'@

********* 57:05
NO.3)
*********in our variable file i pased a variable called "os"

  variable "os" {
  type    = string
  #default = "linux"            ****** this is where you need to make your selection
}

this os here, once you select it is using what is called a null resource provisoner 

NO.4)    
***********  Null resource.tf
     we have a local exec provisoner, it selects the script, hv passed a variable so if you choose linux then the template file (NO.2) thats going to run will be linux.ssh
script but if you choose windows, the template script (nO.2ii) that will run wil be windows-ssh-script.tpl
how do you mk your script, your interpreter you hv to select it here, based on your selection, the ? is called itinerery,terrary operator, its what always evaluates the
condition,
so am saying , this  var.os == "windows" ? , is it equals to windows, if this is true then your interpreter will be powershell, then it is goin to run that windows scripts
then if it is nt then your interpreter wil be bash, 
so this ? is called a itenery operator, it always evaluates, its a bullion variable, it always evalustes either true or false

 summary,
  for remote development
in the configuration file in vscode, we configured our ssh so that we can connect to a remote host, you can connect to an ec2 instance and for that to happen, we passed
vscode installation script & script.sh (dnt knw why we hv 2diff scripts to install vscode)
then,
          summary frm NO.2 to NO.4
we are passing 2scripts in userdata in the resource blk for our instance (ec2.tf) so we using :"template_cloudinit_config" "user-data & the 2scripts is to install vscode
using script.sh also in the variables file; we passed a variable that enables us select the os we wantt to configure 
if i select linux in d variable (NO.3) then in the null resource, using local exec provisoner d template for var.os becomes templatefile("${ var.os == linux and therfore the
? itineray  indicates it as false & so the interpreter wil be bash then it will run d linux scripts (the templates for linux or windows will be used dynamically based on
our selection in the variable)

                                      null resource.tf  (local exec provisioner)
   
resource "null_resource" "vscode-config" {
  depends_on = [time_sleep.wait_for_instance]


  connection {
    type        = "ssh"
    host        = aws_instance.ubuntu.public_ip
    user        = "ubuntu"
    password    = ""
    private_key = file("~/Downloads/ansible-key.pem")
  }

  provisioner "file" {
    source      = "script.sh"
    destination = "/tmp/script.sh"
  }

  provisioner "remote-exec" {
    inline = [
      "chmod +x /tmp/script.sh",
      "sudo sed -i -e 's/\r$//' /tmp/script.sh", 
      "sudo /tmp/script.sh",
    ]
  }

  provisioner "local-exec" {                                          ******* a local exec provisoner, it selects the script, 
    command = templatefile("${var.os}-ssh-script.tpl", {
      hostname     = aws_instance.ubuntu.public_ip
      user         = "ansible",
      IdentityFile = "~/Downloads/ansible-key.pem"
    })
    interpreter = var.os == "windows" ? ["powershell", "-Command"] : ["bash", "-c"]    *****  your interpreter you hv to select it here
  }                                           ******** is it equals to windows, if this is true then your interpreter will be powershell
}

resource "time_sleep" "wait_for_instance" {
  create_duration = "180s"

  depends_on = [aws_instance.ubuntu]
}


  5)    APPLYING OUR CODE   (to configure 1 to 4 above)
**********59:50

mk sure your key is available in your env , bc for e.g  we referenced our key in the null file, the resource blk for our instance ec2.tf 

   terafrm files  ls 
i have all those files there so ill run 
   terraform files   terrafrom init
initializes the backend
terfrm plan
Enter value:linux          this variablw we made it rEQ so that you can choose what operating system your using , am using a mac computer, the os is linux so il enter linux
                           if your uisng select windows so its able to setup your vscode for you 

*********1:02:23
in vscode, he opened the config file and removed The vscode ssh configuration  in A) above 
he said he wants to configure the vscode so that he can directly ssh into in server 

   **** 
 terfrm plan
  Enter value:linux         ,, enter
it has ran the plan, now its goin to create for me host 
these are severs that ill use for demo to connevt to then its creating for me this ubuntu server wich ill instal ansible in am using a script to install ansible on this 
ubuntu server 
am also creating a redhat host but am not goin to use this but am passing that user data for the redhat on this 
bt ill us ethe ubnutu wher ill install ansible , then 
these are the 2sevrers ubuntu host that am gonna use for them to be anble to connect to them 

   terfrm apply -auto-approve
enter value: linux
now it wil run and start craeteing my ec2 instances and onceits done it is also goin to automaticlaly configure my vscode bc have automated the process so its goin to 
create my instances in AWS, so il log into my aws and show you
so all this tins if u went tru the last vidoe, i went tru that 
it is goin to bootsctrap, so i use this timeslip buy time b4 my ssh connects to it , before i start instakling my script to it 
right now the instance is bootstrapping 
my instance are initializing this is my ansible 


 
    ###########  the video stopped playing  frm 1:5:50    and contd from 1;21:00

 ***** 
1:21:00

   so whenevre we run ansible, the 1st tin is ansible will read the configuration file , we can the define the configuartaion file in diff locations with the given priority
so whener we run ansile, it wil look for the config file based on the priorities, it wil check if we pass env variable , if its nt there it wil check the pwd
so if i created a playbk where my ansible.cfg is , ansible wil use the file to read the configuration thats the priority, if it doest find it it wil go to the home of the
user and then the default 


****** so this is what the ansible configuration structure is

 
NO.6)                                CONFIGURING OUR MANAGED NODES

 #############  haven said that, lets go now to configure our remote node /managed nodes
for us to configure thses managed nodes:

 https://github.com/LandmakTechnology/Ansible-mc-series/blob/main/02-Configuring%20managed%20nodes/Managed-nodes_configuration.md

  Configuring managed nodes.

Launch/select required no of servers (managed nodes)
Use a key-pair to associate with your servers.
Log into your ansible control node using the key.pem that was downloaded
Make sure that you change the key permissions to 400
   $ chmod 400 ansible-key.pem
   $ ssh -i "ansible-key.pem" ubuntu@ec2-54-151-14-195.us-west-1.compute.amazonaws.com
   $ sudo su - ansible
   $ ansible


***************  ie 
first we launched our servers which we are calling  managed nodes, we used a key pair to assosciate with our servers
we hv logged into our control node using a .pem key and making sure the permisson is chmod400 

****** we knw that when your connecting a linux server to a linuxserver the key permision needs to b 400 otherwise it says ur key is too open 
to ensure our key permissonis set to 400 w eare ableto ssh into that server and run anisible just like we did 
we are able to test to see if ansible has been created 
now ansible uses ssh , we can create ssh connection in 2 ways 

7)            Ansible Engine uses SSH Connection to connect and work with Manage nodes.

We can create SSH Connection in two ways:

a) Password Authentication
b) Password-less Authentication(This is with SSH Keys)
Provide the managed Nodes IP/FQDN in inventory file on Ansible Engine.

Test the connectivity by running:

$ ansible all -m ping

************  ie                  1:26:18

7A) we can use PW authentication 

for us to use those ssh keys, we will need to do some configuration 
but first when we are testing the connectivity for right now, we wnt to tast our connections 
   we ll run this command 
$ ansible all -m ping                ******** all  , is what is called your inventory, we ll go tru that

All ansible commands starts wth the keyword ansible , this is what invokes ansible software

******** all  , is what is called your inventory, we ll go tru that


 7Ai)  ***********       -M  option    (passing a ping module)

-m is an option  you pass when you want to pass a module 
then the module we wnat to pass is a ping module , this is what we use to test for connectivity 

  so right now i can cd baack

 ansible@ip-172-31-27-28: $ cd /etc/ansible
 ansible@ip-172-31-27-28:/etc/anisble$ ls
ansible.cfg hosts roles
ansible@ip-172-31-27-28:/etc/ansible$ cd -
/home/ansible                          am in the home of anisble now 
ansible@ip-172-31-27-28:  $ ansible all -m ping                    ******* testing for connectivity
  the provided list is empty , only localhost is available 
note that the implicit localhost does not match 'all'          **** bc i inside of my host, i havent passed any ip address for the servers i wnt to maintain/configure
                                                                       the list is empty, says only localhost is available so let me use it as my inventory 
so now ill pass local host 
ansible@ip-172-31-27-28:  $ ansible localhost -m ping
     succsess                              ******* so ansible has been able to ping the local host, its been able to ping itself, so this means that ansible is able to 
                                     configure the server that its installed on/running on, this shows hw powerful ansible is, cos it can configure other servers n also the 
                                         server that its running on bc local host is the server that is running ansible

 7Aii)    CREATING THE HOST LIST

1:29:44
so we hv used ping to test our connection, we are using -m option whenever we wnt to specify a module 
our host list is empty now lets try and popuplate our host list 
when we look at our output 

splits his terminal  and on the 2nd terminal   we see 
outputs 
ansible_publicip = "54.218.138.205"
instance_private ip =[
(base) terrafrm files git :(main) terraform output

we see the public and private ips for our host servers

so lets go to our host file and try to enter these particular hosts into our host file 
we cd 

 ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28: $  vi host 
it will give you examples of hw u nid to mk your entries into this particular files                  ********* 1:31:30
he scrolled down to create a grp called DB
he used his private ips do that whenevr he shuts down his instances  he doesnt have to come in here to change the ips bc the ips changed
he also created anoda grp called web
here he put the redhat  private instance ips 
then saved
now these are the remote host i want to manage 

ansible@ip-172-31-27-28:  $ ansible all -m ping       
ae u sure you wnat to add ...  yes
i hv just typed yes for the first server, i need to type yes 3times

************ bt as i do that bc i hv 3severs in my inventory its trying to reach my inventory but its failing 
host added, permission denied
so we see that while am trying to reach my instances it sdenying me bc by default ansible wil alwasy try to commusing ssh keys bt we havnt exchanged any sssh key 
so hw then can we connect to this user
we knw that we created a user and we gave the usr a PW, so for us to comm to this ansible  on eof the things i sthat we ll hv to run ping command bt for us to comm we v to

                                                           ESTABLISHING AN SSH CONNECTION
7Aiii)
                                        (-k option) 

*********** pass a -k option (small k) 
we pass this bc it prompts us for an ssh PW

  ansible@ip-172-31-27-28:  $ ansible all -k ping 
ssh password  : ansible , you cant see it i typed it 
success
now it will connect bc remeber i created a user in my script , creted on this instances, the script that i ran had a user called ansible that was created in the servers
so bc the user has a pw therfr i can mak a ssh connection using a PW 
we had enabled PW authentication, we had changed it to yes frm our script.

  **********  so you hv to pass a -k option so it prompts ypu for a PW 

    INTERVIEW QUESTION                                ****   1:37:27
why do we need a -k option when ruuning an ansible  adhod command

ANS:
 we use it when run ssh AND so that we will be prompted for an ssh PW 

     

  ************ 1:37:40
wit this hv been able to pass my PW and v been able to connect to my server
if i need to coonect to the web, just to the web grp  so i can pass ansible and just pass web

     ansible@ip-172-31-27-28:  $ ansible web -m ping 
172-31-16-16    unreachable

 but bc i hv a user called ansible who has a PW, if i dnt pass the -k option it wil by default try to connect using the ssh keys

IN THE web i only hv 1host wich is the redhat bc i hv a user who  is called asnible i need to pass a -k option so that it prompts me for a PW 

         ansible@ip-172-31-27-28:  $ ansible web -m ping -k
172-31-16-16    successful

then ill enter my PW ansible  and then 
it ill mk my conncetion 
the process is the same if am connecting to the DB group and it wil mk a connection to the 2 instances in that grp 
172-31-19-131   successful
172-31-27-37    successful
                       

   ********** so here hv been able to est a ssh conection with my servers

but which user am i communicating with the default user, that user is the default user wich is ansible 
let say i want to comm with a diff user lets says called mac
let me ssh into this instance 172-31-19-131   

           ansible@ip-172-31-27-28:  $ ssh 172-31-19-131   
           ansible@ip172-31-19-131's password  :  ansible 

welcome to ubnuntu 

so hv logged dinto this instance 
 ansible@ip172-31-19-131: $ cat /etc/passwd

i see i only hv a user called ansible


7Aiv)

1:40:54                                 CREATING ANOTHER USER   (mark)
****************
LETS create the user called mark

 ansible@ip172-31-19-131  $ sudo adduser mark
 new passwrd
retype password   : mark
   
ansible@ip172-31-19-131     $ cat /etc/passwd
now i hv a user called mark

   lets say i want to comm with anoda user oda than the anisble default user 

ansible@ip172-31-19-131     $ exit

how can i tell once i run anisble 
password: ansible 
i see ansible software insatalled here

if i ssh 
  ansible@ip-172-31-27-28:  $ 172.31.19.131
password :ansible 
welcom to bnuntu

if i run ansible 
ansible@ip172-31-19-131  ansible
command nt found
bc  ansible is nt installed in this 
so i only hv one controll node 

ansible@ip172-31-19-131    exit

back to my control node
ansible@ip-172-31-27-28


7Av)
  *********1:43:00                        COMMUNICATING WITH THE USER mark

  ansible@ip-172-31-27-28   ansible db -m ping
it wil try to comm with the default ansible user using a ssh key but bc am nt using any key, hv nt passed any key, with that i hv to use a PW 
172-31-19-131   false
172-31-27-37    false
  ansible@ip-172-31-27-28   ansible db -m ping -K            ****i need to pass -k option but if i pass it , it wil stil be d default user that am comm with


7Avi)
************         -u  option  (user)

if i want to comm with a specific user, ill pass -u option , this just means user
i wnat to ping a usr called mark
  ansible@ip-172-31-27-28   ansible db -m ping -u mark
172-31-19-131   false
172-31-27-37    false

bt if i do that its goin to fail bc mark has a PW, hv nt exchange any key with mark so i hv to pass a - k option 
   ansible@ip-172-31-27-28   ansible db -m ping -u mark -k              ******* now am prompted for  a password 
ssh password :mark
172-31-19-131   success                     ********** bc it found a user called mark, who has a password 
172-31-27-37    false                       ********** here it failed bc i dnt v auser called mark 
 
ansible@ip-172-31-27-28 

so i see ethat if i want to com with a specific user then i need to specify -u option
so am trying to use ssh to connect to my remote host 

  *********** so looking at managing remote host, we can use password authentictaion, pass a -u option but then i aLso eed to pass a -k option so that it prompts me for a PW 

                                      
   7Avii)                                    HOST AND GROUP VARIABLE

1:46:51   ***************
but what am doing right here is nt very convieneint especially when it comes automation so ansible give syou what is called either host or grp variables
so instaed of me passing these options on the command line,i can pass the ssh PW within the host file 


        Host variables

If were run the ping command on all servers, we will get permission denied on the servers that need a password to authenticate.
Instead of that, we can provide the password in the host file
This is at a host level or host level variable.
Host level variables

    **Host variables**
    [db]
    172.31.13.31  ansible_ssh_pass=ansible

SO if i:

 ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28:cd/etc/ansible  vi host         i have my host listed here
so instead of passing the PW on the CLI evrtime, i can pass on the HOST file
[db]
 172.31.27.37  ansible_ssh_pass=ansible
172.31.19.131   ansible_ssh_pass=ansible

*********** am passing this on the host level, am passing host variable within the host file  so that i dnt hv to keep pasiing them on the cl
havin done this was i run the command ping, it wil mk the connection 
bc intead of me passing a -k to be prompted for  a PW, i hv created a host varaible , hv passed the password within th host file
this is what is called a host variable

   
 ansible@ip-172-31-27-28   ansible db -m ping 
success


     7Aviii)

******* 1:50:07            ANSIBLE FACT       (pingpong, meaning success)


this hostfile is still the password for ansible and when ansible goes ther its looking to see if ansible has been installed in those servers
   'discovered_interpreter_python": /usr/binpython3
it uses what is called a module called anible fact, it goes and FINDS the interpreter there, it discovers python is availabeland thefroe it says ping pong meaning it is a 
success

but for  

 ansible@ip-172-31-27-28   ansible web -m ping 
failed                                                  ** bc i havent passed a variable 


7Aix)
************
                           SPECIFYING A USER TO CONNECT TO IN THE HOST FILE

1:51:11  


what if we wnat to mk our default user anytime we connect with the server , our default user wil be mark
so we can also passs that as a host variable 

You can also connect using a different user by specifying the user in the hosts file.
    [db]
    172.31.13.31  ansible_ssh_user=sammy ansible_ssh_pass=abc123
  
       ie
[db]
 172.31.27.37  ansible_ssh_pass=ansible
172.31.19.131   ansible_ssh_pass=mark ansible_ssh_user=mark          * so now we are specifying that anytime we want to mk a conection to this instance the user needs to be 
                                                                      mark and we passing marks PW , bc otherwise it wil use the default user

then save 

  ansible@ip-172-31-27-28   ansible db -m ping 

 172.31.27.37  success            ********* the connection is been made by the ansible user who is the default user
172.31.19.131   sucesss        ******** the connection is been made to mark

   this is what is called a host variable 
but also ansible gives us what is called group variables 
so instaed os duplicating this and writing this on evry host file,     ; 172.31.27.37  ansible_ssh_pass=ansible
we can create a group variable 


1;52:55

7Ax)
********                            GROUP VARIABLES

     **Group variables:**
    [db:vars]
    ansible_ssh_user=sammy
    ansible_ssh_pass=abc123
                                              CREATING GROUP VARIABLE

so ill vi 
ansible@ip-172-31-27-28: $ cd/etc/ansible
 ansible@ip-172-31-27-28: $  vi host

   and in the file 

[db:vars]
    ansible_ssh_user=ansible               ********** so we are saying for this grp of servers the ssh PW is this 


 ******** now i can delete the host variable 7Avii) bc we ar ultilizing the grp variable 
   

[db]
 172.31.27.37  
172.31.19.131   
*********************************
if i ping 
ansible@ip-172-31-27-28   ansible db -m ping 

 172.31.27.37  success            ********* the group level varibale is successful
172.31.19.131   sucesss        ******** 

 
7Axi)                                         
HOST LEVEL PRECEDENCE

##########################  we knw that host variable has the hightest priority
if variables are defined at host level, it takes precedence over varaibles defined at group level


7Axii)   for example 

   [db:vars]
    ansible_ssh_user=ansible   

     

Create a file on the managed nodes to see which user its working with.

$ ansible all -m file -a "path=test.txt state=touch"











ansible@ip-172-31-17-108: 

ansible@ip-172-31-27-28: 






