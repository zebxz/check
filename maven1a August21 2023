
MAVEN INSTALLATION, MHD


** based on our linux file structure, the "opt directory is recommended for installing packages 



CLIENT ENVIRONMENT PAYPAL
                                                                           
                                                                           test & build
                                                                              maven
                                                                             clone code
                                                                                git clone


 
    REmeo developer       >>>>>>              SCM/Github
                                                paypal                        >>>>>> test & build                 >>>>>>>>>> paypal application server
                                               source code                            maven
      Jane developer      >>>>>>>>>          repeated by SRC                          clone code
                                            unit test cases
                                              buildscript

for our test and build we are using maven
so our build server is aven which will clone codes and for it to run code the git clone has to be installed as well  


developers are writing uunit test cases, build script, raw/sourec code , the codes cant run directly in the client server so it has to go through build phase/sever
therefore we will do the test&build 
in the building process the build platform is going to connect this raw code INTO PACKAGES that the app servers in the client environment can understand
the test and build process ensures that the app servers can make business logic out of the raw codes developed by developers
so the raw code goes through the test and build process before it is developed to the client environment 

so we are talkining abt build and how we can do a build for application code & principlally we will be using amven as a build tool




12:26
                                        MAVEN BUILD TOOL
Maven is a software mgt and comprehension tool .
it is based on the concept of a project object model (POM), maven can mg8 a projects build, repository and documentation.
its most powerful feature, is its ability to download the project dependency libraries automatically from maven central repo, maven remote repo or local repo


                     WHAT IS YOUR TASK AS A DEVOPS ENGR
as a deveops engr, our expectation is to develop, test and build, qualify the applictaion, back them up , deploy and monitor appliction
Applications are the output from softwares development



Devops process
developers write code >>>> testing>>>  build>>>> deplyed >>>> monitored


Build tools are used to create deployable packages eg tomcat 
these are packages that the application server/sofwares can understand 


 WHAT DOES BUILD TOOLS ACHIEVED???
used TO Create deployable packages
ie raw code + build= results in packages that the deployment servers can interprete. build simply implies creating deployable packages

programmes are deployed using programming languages including java, python, nodejs, NET, javascript etc

each of these programming language has a diff categories of build tool

12:19

WHAT KIND OF PROJECT ARE YOU SUPPORTING IN YOUR ENVIRONMENT?
anS: we suppport java based projects or projects written in java and a few.NET, pythn and nodejs projects
we support apps written in java, nodejs by developers java, .NET, nodejs is a programming language


WHAT are the diffERENT BUILD TOOLS FOR ECSH OF THE LANGUAGE
for java projects the build tools
you can build using >>> MAVEN /ANT/CRADDLE

Net: THESE are the tools that will be used to convey the raw code written in .Net to deployable packages
NANt/MSBuild

JAVA SCRIPT:
Gulp/Grunt  

python:
Py Builder

Ruby:
Rake

NodeJs:
npm


maven is an open source java based build tool
we can use maven to mg8 our project, build, reportingand documentation



20:00
WHAT IS EXPECTED FORM DEVELOPERS  ???   (When they have a project)
project main composition:
we have established that when developers are writing code 3things are involved
1)source
2) unit - test- cases
3) build scripts 


eg 
we are writing a source code called app.py or app.sh
code: app.sh = echo "welcome to TD BANK"         ...... one line of code
app.py = print "welcome to TD bank" 

25:25
single or double code (" /' ) will work

unit-test-cases :
we are calling this unit test case = app.test
this is (sh)       if [ -e Welcome /home/obi/app.py ] then     **** ie if welcome exit in this file then echo 'test passed'
                   echo 'Test passed'
 but for (py)      print('Test passed')
                   else 
     (py)          print('Test failed')
                   fi


  For us to automate testing .......

TO AUTOMATE TESTING, WE ARE GOIN TO ADVICE DEVELOPERS 
TO integrate selenium in their environment such that these unit test cases cne be easily written and run

we have tools that we can use to automate the processs of writing unit test cases and running them
 **** selenium should be integrated in the development environment why?? 
  for automation

the process of writing and running unit-tests-cases is called : Unit testing
for example:  we have a PayPal30 project:
so developers have written source codes amounting to 50k lines of codes
 source Code     = 50k lines  
 unit-test-Cases = 20k lines  

* its not as simple as it looks here but trying to get the picture so developers are writing the code and unit test cases
you will come to realise that the process of writing unit test cases and running the test will be automated



   DEVELOPERS WRITE BOTH THE CODES AND RUN THE UNIT TESTING
Unit testing is Testing individual units/components or each line of the code by 

EG
so for a 50k lines of source code = 50k lines of unit testing 




    MAVEN BUILD TOOLS:
to download:   https://maven.apache.org/download.cgi


MAVEN = is an open source Java BASED Build  tool
        It was originally developed in java for java codes 
        The vendor of maven is apache  
Any software can be available in three options:
Licence edition: The software has to be paid for

Free edition: 
  Software is given for free BUT without source code - 
  How the software was developed is not shared.

Open source edition: 
   Implies both the software and 
   the source code are freely available.      
   You can download the source code and 
   develop on the existing features

 
                                                               INTERVIEW QUESTIONS
IQ: Explain you experience in open source technologies?
      1. Maven 
      2. Linux OS  

                                      BUILD MEANS 

Build in SDLC Implies:  Software development life cycle
  creating deployable packages from raw codes.
     for this to happen, it goes through a compiling process
codes can be written in these languages: java , py
     eg
       Hello.java  -->  these are raw java codes
       hello.py    -->   raw py code


for these codes to be converted to deployable packages there are few things that are very importnat to take note of 
this is goin through compilation so we need a compiler to compile codes

We need a compiler to compile java codes:
  java software is required for compiling java codes.
  hello.java -- print("Hello Engineers")   can be understood in human language bc its written in human readable format but it cant be understood by machines ( we are 
running the codes on some computer system) the jvf - java virtual machine cant interprete the humna readbale format

**** therfore , it is important ot note that with maven,   java software is required for compiling java codes.
 once java is installed, java is the compiller , we do Javac   ( javac is the command)

the file is called hello.java
when you execute the file javac hello.java  ---> hello.class      ****** it generates hello.class  , this is a java class file


                                      WHAT IS THE DIFFERENCE BTW THE 2 FILES (hello.java & hello.class)
  hello.java ---> Human readable file  
  hello.class --> machine[JVM] readable file  [binary file = 012310123345] 

****** but for this compilation to take place, we need a compiler  - java software 


45:36
if you work in a coy that doenst use aws, maybe they use GCP that means you have to create a GCP account

once you compile a java code like javac hello.java, the result will be - hello.class

JVM only read binary files 
jvm = Java Virtual Machine 


                                                      MAVEN INSTALLATION
Maven installation:
https://maven.apache.org/download.cgi
  Maven can be installed in Any platform:    (OPerating system = cross platform)
    Linux --: 
      RedHat / Ubuntu / CentOS
    Windows:
      server2012/2016/2019 
      Windows XP/7/8/10/11
    MacOS :
    Solaris:   


44:09

Ticket_maven-001 
Install Maven on a RedHat Linux 9 Server  

2. Java is a pre-requisite for maven to run 
    JRE --> JAVA RUNTIME ENVIRONMENT
    JDK --> JAVA DEVELOPMENT KIT 1.8+
            JVM will also be installed      (once java is installed, this installs automatically)

43:30
we already hv some notes in our githubwhich we can use for maven installation , package management, maven installation

****** there are other sources where we can create our server from but we are creating it from AWS, where we are getting our redhat server from

openJDK1.8+,  // openJDK4.1   
==============
https://maven.apache.org/download.cgi
https://github.com/LandmakTechnology/package-management
https://github.com/LandmakTechnology/package-management/blob/master/Maven-installation/READme.md
connect to the server and setup maven:
  publicIP = 54.204.78.6
  userName = ec2-user 
  ssh-key  = class301key.pem 
  ssh -i class301key.pem ec2-user@54.204.78.6  


  
STEP 1          

PREREQUISITE   = AWS Account

we created a redhat server in Aws and on the redhat walls, we wnat to install maven sofware and once it is installed we can call the server our maven server

connect to the server and setup maven:
  publicIP = 54.204.78.6
  userName = ec2-user 
  ssh-key  = class301key.pem 
  ssh -i class301key.pem ec2-user@54.204.78.6  

****** you have to be in the in the dir where your downloaded key is and cd into the dir 

change hostname to maven = sudo hostnamectl set.hostname maven
changing my shell = sudo su -exc-user


** based on our linux file structure, the "opt directory is recommended for installing packages 
            cd/opt

for our test and build, we are using maven which clone our codes and for maven to run codes the git clone has to be installed as well 

sudo yum insatll wget nano tree unzip git-all-y 
sudo yum install java -11-open jdk-level java-1.8.0-open jdk-devel-7

*** for maven to run, java must be installed (java prerequisite for maven to run)
java is the compiler 



*****
FOR step2, we can easily run yum install maven to install maven easily but ther are some additionale setup which we had to change some files in the setting.xml ,
we change our maven local repo , we configured a customized maven local repo but when you install using package manager yum install, it limits what can be customised but we 
wanted to customise our server thats why we downloaded and extracted




STEP 2
                    DOWNLOAD AND EXTRACT AND INSTALL MAVEN 
 
opt dir needs root access thats why for us to download we need sudo

 to download         :  https://dlcdn.apache.org/maven/maven-3/3.9.0/binaries
 to unzip            :  sudo unzip apache-maven-3.9.0-bin.zip
delete zip download  :  sudo rm -rf apache -maven-3.9.4 - bin.zip
Rename               :  sudo mv apache-maven- 3.9.4/maven             * 1:08, for good naming convention, we have to rename the file 

run LL = drwxr-r-xr-x.6 root root 99 july 26 09 :37 maven





    What is MHD ==  
The maven home directory is wher the maven software is extracted == /opt/maven 
and we can ls to see the content of the MHD



  Maven home directory:  /opt/maven
the directory is represented by = M2 _HOME
MHD = /opt/maven [ M2_HOME ]:


MHD = /opt/maven 
The MHD is where the maven software is extracted.

*** some companies, the home directory can be /app/maven
so if thats where the software was extracted then thats the home directory fo rmaven 
   
***** wherever you extract your maven software is your MHD 
in OUR CASE = /opt/maven               ***** ie opt is the home  for maven dir 

(in my own understanding) ie bc we had to cd into opt directory to download and isntall and the download name was changed to maven 


now we ls to see the content /composition of our maven home dir 

 [ec2-user@maven maven]$ ls
mavenHomeDir = M2_HOME = /opt/maven :
  bin --- binary files and the most impoetant file is mvn        *** 23,maven 1b, (the paths to where the dir are found in )
            
  conf  --configuration files and the most imp fie is settings.xml 
          
  lib -- jar files and libraries 
  boot  


STEP3 :

SEt environmental variable for specific user eg ec2-user
vi ~/.bash_profile    and add lines below
export M2_HOME=/opt/maven
export PATH=$PATH:$M2_HOME/bin



STEP4: 
    Refresh the profile and verify if maven is running
source ~/.bash_profile
mvn - version


                                           BUILD APPS 


Ticket_0014_build_apps :
========================
We use maven to build and manage applications for java codes  in our environment :

Generally We have THERE ARE 3 CATEGORIES OF APPLICTAION :
  stanalone applications -            ***** when a stanalone appl is created, it creates jar packages -jar [app.jar, hello.jar]
  web applications    -     war [app.war] 
  enterprise applications - ear 

hello.java:
After using maven to build the following options are possible
   hello.java --> hello.jar  [stanalone applications] 
   hello.java --> hello.war  [web applications]
   hello.java --> hello.ear  [enterprise applications]

maven: creates packages (jar, war and/OR ear)
  jar: Standalone Applications
    ebay.jar
    paypal.jar
    tesla.jar 
    *.jar  

  war: web Applications
    boa.war
    tesla.war

  ear: Enterprise Applications
    aa.ear 
    tesla.ear
    td.ear 

Archieves:
  tar files = tesla.gz.tar   
zip files = tesla.zip 
  tesla.jar  
  tesla.war  
  tesla.ear 


                                                      DIFF BETWEEN STANDALONE /WEB/ENTERPRISE


Standalone Applications – *.jar  Java Archieve
=============================================  
 java code ONLY   
    contains only java classes
    jar = .classfiles
    maven-standalone-application.jar
    app.jar 

Web Applications  – .war  web Archieve
======================================
Java code +                                               ********* Single module, ie java code + web content
web content ( CSS, HTML, JS, videos, images…,) 
Backend code   - frontend code
maven-web-app.war
tesla.war

Enterprise applications – .ear –
==================================
 Enterprise Archieve
    Multiple Modules
      Java code + web content 
    Ear =  war(s) + jar(s)
    Banking applications
    maven-web-application.war
    maven-enterprise-application.ear


eg
you are build a banking app and you decide to have a seperate module
for :   each of this module is expected to contain java code + web content
for     login / 
for     accountCreation / 
 for    moneyTransfer 

Based on our project we are going to create 
   multiple packages either;  jar, war or ear packages:



What are we building? 
 we are creating deployable packages from java codes:
  1.  src-- source code   :
  2.  Unit-Test-Cases     : 
         JAVA  --> JUnit test cases 
         .Net  --> NUnit test cases 
          C++  --> CPPUnit test cases   
  3. BuildScripts  -- pom.xml     :  
        xml  = extensible mark-up language 
               It is a dynamic language. 
               Tags can be created based on the user preferences 
             Paul: <welcome>Welcome to Landmark</welcome>
             Mary: <tesla>Welcome to Tesla</tesla>
             Obi : <greet>Welcome to Landmark</greet>

        html = hyperText mark-up language
               It comes with pre-define tags that can't be changed 
               TAGS: h1, h2, h3, p, 
                   <h1>Welcome to Landmark</h1>

   pom.xml = This is the BuildScript for maven  
             developers should define name, plugins, tags, versions,
             project dependencies and more in the BuildScript(pom.xml)


Standalone Applications
Ticket_saa_tesla0014  
===================
Requirements:
1. project repository in the SCM [GitHub / GitLab]
   https://github.com/Landmark-Technologies/maven-standalone-application
2. We need a server with java & maven installed and configured   
3. Create a project directory in the maven/build server
    mkdir java-projects  
4. Clone the codes from github in the project directory  
   git clone https://github.com/Landmark-Technologies/maven-standalone-application
     src/main  
     src/test
     
     pom.xml 
     <groupId>com.mt</groupId>
        <artifactId>maven-stanalone-application</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <packaging>jar</packaging>

        <name>maven-stanalone-application</name>
        <url>http://mylandmarktech.com</url>

maven-stanalone-application-0.0.1-SNAPSHOT.jar 

Maven uses dependencies and plugins to test and create packages. 
Examples of maven dependencies 
   Selenium 
   JUNit 
   log4j
build.gradle   --- BuildScript for gradle
pom.xml        --- BuildScript for maven
pom = project object model      
dependencies:  
repositories  
plugins:    
properties: 
version:

<dependencies>
      <dependency>Selenium</dependency>
      <dependency>log4j</dependency>
      <dependency>JUNit</dependency>
</dependencies>

==================
where are these dependencies found/located??? :
dependencies and/or are located in maven repositories
  https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.6.0

<repositories> 
   mavenLocalRepo  
   mavenRemoteRepo  
   mavenProxyRepo  
   mavenCentralRepo
</repositories>

selenium:
  <dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>4.6.0</version>
  </dependency>
log4j: 
  <dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.17</version>
  </dependency>

where are these dependencies found/located??? :
  1. Maven local repository 
      .m2/repository = default 
  2. Maven remote/proxy repository 
  3. Maven central repository
      https://mvnrepository.com/repos/central

IQ : Explain the maven lifecycle  ??
Maven has 3 lifecycles: 
  Clean, 
  site/swagger and 
  default
  Clean, site and default

Lifecycles      Goal(s)
----------      -----   
Clean            clean  (mvn clean)
  mvn clean      delete old builds 

Site/Swagger     site
                   create java classes (byte code)
                   JVM 
                   app.java = 'echo DevOps is great'
                   app.class = 012450012354

                Goals:
default        mvn validate:
                  It will validate the project structure and resource files
               mvn compile:
                  It will compile all java classes and test classes
               mvn test:
                  It will run the unit test cases (JUNit)
               mvn package:
                  It will create packages in target directory 
                      (*.jar/*.war/*ear) app.war
               mvn install:
                  It will store the build artifacts in MAVEN LOCAL REPO
                     default location: .m2/repository
               
               mvn deploy:  NEXUS
                  It will upload the build artifacts into maven-remote-repo
---
mvn package: 
  1. validate
  2. compile 
  3. RunUnitTesting 
  4. create the packages [jar/war/ear]

[INFO] Results:
[INFO]
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

BUILD SUCCESS
[INFO] Total time:  2.877 s

Maven uses plugins/dependencies in th build Process.
   ls -a ~
   ls -a /home/ec2-user  
    mavenLocalRepo = .m2/repository  
    ls  ~/.m2/repository/

  1. Maven local repository 
        .m2/repository = default 

  2. Maven remote/proxy repository 

  3. Maven central repository
      https://mvnrepository.com/repos/central


[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  5.577 s


BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  2.845 s

[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  5.408 s

mavenLocalRepo = .m2/repository is deleted in error 
Securing the maven local repo:
  1. By creating a custom maven local repo  
       .m2/repository/
     settings.xml  
        /home/ec2-user/.mlr  
   sudo vi /opt/maven/conf/settings.xml  

  <!-- localRepository
          The path to the local repository maven will use to store artifacts.
          Default: ${user.home}/.m2/repository
        <localRepository>/path/to/local/repo</localRepository>
  -->
  <localRepository>/home/ec2-user/.mlr</localRepository>

<!--    
-->
 sudo echo "<localRepository>/home/ec2-user/.mlr</localRepository>" >> /opt/maven/conf/settings.xml  

rm -rf target  
mvn clean  

timedatectl list-timezones
sudo  timedatectl set-timezone "Africa/Douala"
sudo  timedatectl set-timezone America/New_York

===============================
maven video 1 --- March 6, 2023
================================
https://landmarkmetropolitanuniversity.zoom.us/rec/share/_-W34LOSlPVuWLfzxmEpFKfulql8cld8YsKWDLrOJVsv3cVhBIV_xWwMvUR962v4.amlEGpcBn9uK3HDq

Do not share any Landmark resources [videos, notes, class links etc.] except for those on youtube
============================================================================================






























