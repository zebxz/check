so are looking on hw we are able to manage our infrastruture 
i think we hv convinced our selves that terfm wil be the ideal option bc it can be reuseable, theres version control and thers also terfrm workspaces



how are we able to configure our resources
how can we configure our resources in aws and how can we configure our servers that we hv created 
so this has to do with ansible 
we will be looking at how powerful ansible is 

Configuration Management: - 
diff Tools:
  Ansible - PUSH -- AGENTLESS 
  Chef - Pull
  Puppet      and their playbooks are called cookbooks
  SaltStack

3:00 .......... using diagram to explain

with the help of ansible, we can push configuration to the servers and the configuration can perform diff tasks
ansible can perfrorm severaltask , it can group our servers, file mgt, user mgt, etc ,, bt first ansible needes to conect to the host(servers) and for it to do that , it 
wil depend on the host 
e.g windows host will be treated diff frm linux host
it will use ssh pluggin to connect to linux host and for host on windows it will use winrm
Servers:
    UsersMGT
    FilesMGT
    ServicesMGT
    PackagesMGT
    deployments, manage,
    build, test and configure apps 
Ansible is an open source AGENTLESS :
  Configuration Management tool, 
  deployment tool and/or  
  provisioning tool maintained by Redhat


********** 18:00

Ansible can be installed in Linux OS. 
====================================
Ticket01: provision an ec2-instance in aws call ansible using ubuntu 
if given this ticket but you dnt have a clue
Search official documentation for creating aws ec2-instance  .. (terfrm aws_ec2 instance)

21:38 
********** creating our anisible instance uisng terfrm:
he started with creating a file in vscode
vi ec2.tf 
pasted the resources 
we are using this data soure it is going to pull our amazon machine image :   ami  = data.aws_ami.ubuntu.id



resource "aws_instance" "web" {
  ami           = "ami-0c7217cdde317cfec"
  instance_type = "t2.micro"
  subnet_id     = "subnet-0301f6ce6f3fe5f9c"
  key_name      = "class35"
  security_groups = [ "sg-07fe099f5be5a1aba"  ]
  tags = {
    Name = "ansible"
  }
}


to delete user   sudo userdel ansible 

************38:33   ............. installing ansible in the created ansible server
i wont run this as a script bc if i do it wont give me the result that i want
we are creating a user called ansible 



script 1

#1 Ansible installation in ubuntu using python3-pip
sudo hostnamectl set-hostname ansible                            ******* create a hostname
sudo useradd ansible                                            
sudo passwd ansible             **********  add password to ansible
 echo "ansible  ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ansible
sudo su - ansible
sudo apt install python3
sudo apt update
sudo apt install python3-pip
pip3 install ansible --user                                ********** we are installing ansible as ansible meaning that only ansible can run ansible command 
sudo apt update
sudo apt install sshpass                              *********** to be able to use password
sudo mkdir /etc/ansible                                ****** creating ansible working dir 
sudo chown -R ansible:ansible /etc/ansible/
touch /etc/ansible/hosts                             ********** thers a file called ansible host file,  creating etc ansible host file , so ill touch the file ,
touch /etc/ansible/anisble.cfg                        ********* the configuration file
ll 
and we hv 2files owned by ansible 

so we hv insatlled ansible 
  **************************************************



script2
****************** this all we would hv done to hv ansible installed  bt since we used python p, we used option1 

#2 Ansible installation in ubuntu using apt repo
Ansible installation in ubuntu
 sudo adduser ansible
 echo "ansible  ALL=(ALL) NOPASSWD:ALL" | sudo tee /etc/sudoers.d/ansible
 sudo su - ansible
 sudo apt-add-repository ppa:ansible/ansible  
 sudo apt install ansible  -y 

***************************************

*********** 49:14
checking online to knw where he can get the ansible configuration file 
in google in typed ansible.cfg example     and  he found the github link where he said he can find the repository 
he copied the file and pasted in   vi  /etc/ansible/ansible.cfg

https://github.com/dmahler/ansible-template/blob/master/ansible.cfg

vi  /etc/ansible/ansible.cfg
vi  /etc/ansible/hosts               


/etc/ansible/hosts  
[web]
54.175.72.219 ansible_user=ec2-user ansible_ssh_private_key_file=/tmp/class35.pem
[db] 
172.31.36.121 ansible_user=ec2-user ansible_ssh_private_key_file=/tmp/class35.pem
[k8s]
34.233.124.124 ansible_user=ubuntu ansible_ssh_private_key_file=/tmp/kkk.pem
[docker]
10.0.4.60 ansible_user=ubuntu ansible_ssh_private_key_file=/tmp/kkk.pem
Ansible concepts:
1. Ansible commands:  
    ansible hosts -m module -a "df -f"
      -m=modules
      -a=arguements
  hosts: db / web / app / localhost / all     
      ansible all -m ping
      ansible localhost -m ping

 ansible web -m command -a "df -h"
 ansible localhost -m command -a "df -h"
