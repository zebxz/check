an e-commerce java based web application for ebay 
ligin 
registreation
checkout
payment
order

 we ar passing an ecommerce ntwrk, we wnt the appl to all tlak to each other, so we v to deploy them in the same ntwrk 
the container can only talk to ecah other if they ar in the same ntwrk, using their hostname if they ar in d same ntwrk
we ar deploying in detachable mode -d 
                                                                this is the login image
 3) docker run --name login --network ecommerce -d -p 5000:8080 mylandmarktech/login    
         *********************** for the other containers, we nt using any port number 

 ############### these ar multiple commands that we ar doing  , and dis ar d dif images we ar using bc we hv decopled d appl into micro serv, so we v multiple micro services
on top of it  we v a database and the image is mtsql
 b4 deployin dis app, we nid to creat d ntwrk 
1) docker network create ecommerce ( custm bridge ntwk) and we nid the vol, we nt to mount d vol to our container, so we  ar creating  the vol
2) docker volume create datas
*************** total of 9c0mmands to creATE DIS APP, ...... THIS IS A CHALLENGING TASK

4) docker run --name  registration --netwrk  ecommerce -d mylandmarktech/registration 
5) docker run --name cart --netwrork ecommerce -d mylandmarktech/cart
6) docker run --name checkout --network ecommerce -d mylandmarktech/checkout
7) docker run --name payment  --network ecommerce -d mylandmarktech/payment 
8) docker run --name order  --network ecommerce -d mylandmarktech/order 
9) docker run --name -mysql - network ecommerce -v datas:/var/lib/mysql mysql       for mysql
 docker run --name  mongo --network ecommerce -v datas:/ data/db mongo -         then we nid to pas some env var

someone jst reminded me , we also nid to pass env var   -e

***********16:33 
17:22*********************
lets check in dockerhub and find out if we ar going to use mysql , what is going to be the env variable to be defined, remember, we v seen mongodb , dis time around
when u start working what is used in ur env is nt mongodb bt mqsl ..
in docker hub, we can see the command, hw to deploy it, the paswd, env var, wher data is stored , if i wnat to create a mount point /var/lib/mysql , so we ar pasin env var

so for us to be able to manage all of this we wil use a docker compose file and the we'll see hw wit the use of my docker compose file can create my ntwrk for me, create my
volume and create all this containers and will call all the containers services
21:29 ####### & what u nid at this time of the course shud nt b a problem bc if u google wot is docker compse the link goes to docker hub, it gives overview, hw to install
and we nid to knw our docker version, docker engine version, to knw the docker compose version to use
and if u nid  a docker compose file, we can hv smaples of  a docker compose file...
***************** and docekr compose file is a .yml file
docker-compose .yml
we'll start studying a new language called yml and its the simplest language ucan study in programing
 the firts tin to start in this file is version
generally for any programming language 

23:17  ***********languages
yml
xml    , in xml e.g if u want to get some inf abt servers , multiple servers
<servers></servers>    , this is hw code is managed in xml
inside this server, i v multiple servers
<servers>
 <servers>
<servers>nexus</servers> 
<servers>jenkins</servers> 
<servers>tomcat</servers>        now i hv a gud number of servers , so inside my servers, i v nexus, jenkins and tomact
</servers>                     this is xml, this is a list servers

lets ASSUME THAT I WNT TO ENTA SOME PARAMETERS LIKE , SERVER ID 
<servers>
 <servers>
   <id>nexus</id> 
   <login>admin</login>                   this is hw xml is written 
   <password>admin</password>
  <password>$pwd</password>             i can enter tha passwd as a variable, ie am caling the pw frm somewhere else, wich means the pw is defined somewher else bc its nt very
</servers>                                                                    secured for u to pass PW like this,  bt this is external so similarly
<servers>
  <id>jenkins</id>
  <login>jenkins</jenkins>
  <password>admin</password>
  </servers> 
<servers>tomcat</servers>      
</servers>   


*******29:27 
the simplest laguage u can think of is the yml language
generally in any programming lanugae, we v the diff kind of data u can eneter, what we call:
data types
interger     example of interger
    age: 60
string    ... usually put in single of double quote "
   name: "landmark"
dictionary  (key:value pairs)
   name:"simon"
   age : 55
   pob: "lagos"
list/array         under list we can hv diff attributes like age ...
  students:
   -name: simon
    age:
    salary:
  -name: pau
  -name: keren
maps
objects
class

34:00  ******************* we wnt to create a docker compose.yml
Before u create this file, the first tin is the diff version w ecan use , u nid to knw the version of docker to decide the version of docker compose that u nid

#######################################################################    HOW TO GET UR DOCKER VERESION TAHT IS RUNNING

docker info , will give the verssion that is running OR 
docker --version
e.g u can use dokcer compose 3.1 for any docker 1.13.1+
our docker vesiron : 20.10.7 

version : '3.1'    the nxt tin we v is ,,, bc yml wil nid spacing a lot
services:
  mongo
login
registration
check 
cart

    ************** bt in this example, we'll jsut hv our database and a single service , voumes and ntwrk
****************************************************************************************************************


version : '3.1'    the nxt tin we v is ,,, bc yml wil nid spacing a lot
services:       **************** i can create any numbe rof micro services under this version of docker compose e.g mongo and springapp
  mongodb        in deployin d database, i wnt to use the image             *************38:58                            maintain 2spacing
    image: mongo
    networks:            in deployin the appl we nid ntwrk ,, we can v multiple ntwrks
    - ecommerce
    -fintech:
    volumes:              we nid volume 
    - mongo-data:/data/db
    environment:
    -MONGO_DB_                            4*:12  we ar nt doing port publishing bt if we were to do it , we 'l v a keyword called port
    -MONGO_DB_    48:24  
springapp      
    image: mylandmarktech/spring-boot-mongo     ..  ..1:11:07    spring-boot-mongo is the name of the service
    restart: always    
    ports:
    - 6000:8080     
    networks:
    - ecommerce
    - fintech     
    environment:
    - MONGO_DB_HOSTNAME=mongodb
    - MONGO_DB_USERNAME=devdb
    - MONGO_DB_PASSWORD=devdb123                                                                        ( 53:00 .... example below)
    depends_on:   this means that springapp depend on mongodb  therfore our dabase shud be created first before i bliv ... spring appli    
    mongodb                                           ie our spring application port to be created depends on the database port mm,,..  .. 54:20
volumes:   can create multiple volumes 
   mongo-data:                                                                 maintain 2spacing
     driver: local
    ebs-data       ......... this is external data
      driver: rexray
networks:
  ecommerce:   ..........  for the netwrk i nid the driver
    driver: bridge
  fintech:                                                                                                                    41:00
     external: true      . when i say driver is bridge and external is true , that means the ntwrk already exists so i wnt to use an existing ntwrk am nt craeting the ntwrk
##############################################################################################################

NEXT:

54:22 ###### we copy this docker compose file ..we want to deploy using a 'file' a file is imp bc a file gets to do wit infrastructure as a code wich is very imp

1) i want to create a dir               1200 1 bed  ,, 1400 2bed
mkdir app26 ; cd app26
2) vi docker-compose.yml                             55:40
then paste  the above file and save

**************** dnt freak out bc this code is part of our project already, if u go to the project that we v for this stuff we already v d code ther
                  is oin our github repository, this docker compose file is already ther, most of the time it wil b part of ur source code bt u nid to understand if u nid 
               to change anytin like the image version and so on 

** now v created my docker compose file bt before i can run any docker compose command , i will be reQ to instal dodcker compose
 so first docker compose i can run to check if my file is ok 
3) docker-compose config      ....************* am told to  install docker compose 
4) sudo apt install docker-compose;
 NOW docker-compose config  TO check if the file is ok:    ..... file is ok
now we ar told that its going to create ntwork called ecommers then it wil use na existing ntwrk and it wil create dis services, then a local and ebs vol & a local vol
next 
we deploy the appliaction
5) docker-compose up -d    .... its going to create app26_ebs-data" with/using the  rexray driver" in  our aws account
                              ERROR:  it says NONEXISTENT DRIVER REXRAY 
*****************  so docker plug in ls    ... to check why w ev the error                                           i didnt go bk to d file to correct it
so its telling us thta this particular driver dis particuale driver does nt exist bc we v defined rexray instead of rexray/ebs & i can also pass the version  59:59

*************** NOW EVERYTHING HAS BEEN DEPLOYED ***********************
if i run docker-compose down   .... it wil delete everytin that we created bt fintech didnt delete bc it is external. ie was created b4 we created/deployed the file
can also run docker volume prune to delete local volumes then ill be left with just the external volumes
###################  so docker compose is very imp, its easily manageable to use in deploying ur application and commands ############
e.g if u go to our github account we still v dis file, eveytin is der as it was originally defined, if u want to change smt u jsut go and change the version

*** in rreal time we ar going to be using dodcker compose file to do our deplyment 

1:04  docker compose ps   oR docker ps
shows my containers are up 

***************** we can see the a prefix app26;springapp_1  , thats bc it inherited the dir name we created in step no. 1 ... app26

to access tha application , it shows the application  container ip address ... 1:05:00
ubuntu@dockerbuild:~/app26$ curl if config.co   ... 
3.93.218.173
curl -v localhost:6000          ,we were able to connect to the application 
**********************bt we couldnt connect online,, someone said smt and he said i think this  #file 7= does nt v any application path
someone said bc port 6000 has been used previous bt he said dats nt a problem bc if u create a container n delete it the port becomes available
bt lets find out : netstat -tlunp    ie tcp , upd port number

*********** howevre his main point is for us to see ew ecan usea docker compos efile and der ar multiple commands that we can run 
thers a scenerio were if u were trying to deploy dis application , like let me assume that , am goin to copy this file, he copied a docker file frm  his repo in github n 
vi into a file then paste the copied file

version: '3.1'
services:
springboot:     
    image: mylandmarktech/java-web-app
    restart: always    
    ports:
    - 9090:8080     
    networks:
    - mavenapp     **************** if u dnt indictae d driver ,e.g driver:bridge it is going to be created in the brige ntwrk 
     driver:bridge               so i wnat to create a ntwrk for maven app and this is the custom bridge
****  so to deploy d appl, 
docker-compose -f docker- compose_mwa.yml config... to check if d file is ok. (docker-compose -f docker- compose_mwa.ym) bc its nt d default docker file name: docker-compose
******* 1:15:08  .....******************** u can deploy anytin using docker compose
he accessed the application on the CLI: curl -L localhost:9090/java-web-app

docker-compose --help  ... give sthe list of commands  ........... 1:17:40

EVEN THough we v been able to deploy our application in docker using vol, netwrk, env var n deploying multiple containers, we v realised that it is very easy fro us 
to put all of those containers in a particular file called docker compose file bt the question is can i scale my application when i use docker? ,, w ecannot do that n
this is bc docker does nt support  multi hosting , a multi host netwrk architecture, n so we nid to see hw we can use the option that support multi hosting bc we wnt a
situation were we can hv severs in a cluster n for us to that 



#######################################################################################################################
EXAMPLE:

        an e-commerce java based web application for ebay 
login 
registreation
checkout
payment                          EXAMPLE: OM,                                                                             53:30
order        so we can equally say here that order depends on :login,reg,checkout,, so if ders no checkout order cannot be placed
depends on:
-login 
-registreation
-checkout
-payment







