APPLICATION DEPLOYMENT, HOW TO DEPLOY JAVA BASED APPLICATION, WHAT IS AN APPLICATION SERVER, EXAMPLES OF SERVER, HOW SHOULD WE EXPOSE APPLICATION TO USERS, 
MULTI - TIER APPLICATION DEPLOYMENT,  TOMCAT INSTALLATION, SYMBOLIC PATH, TOMCAT HOME DIRECTORY, HOW DO WE VERIFY IF TOMCAT SERVER OR PROCESS IS RUNNING
HOW TO CHANGE PORT ADDRESS OF TOMCAT SERVER, TO ACCESS TOMCAT AS A USER, HOW TO DEPLOY IN TOMCAT ,  DePLOYING FROM SERVER TO SERVER, TO ASSIGN PASSWD 
TO MAVEN SERVER,  CONFIGURE PASSWD AUTHENTICATION IN TOMCAT, TO DEPLOY APPLICATION IN TOMCAT, To DEPLOY USING SSH KEY FOR AUTHENTICATION, HOTFIX, CAN WE  RUN TOMCAT AND MAVEN IN ONE SERVER
HOW TO IMPROVE TOMCAT SERVER PERFORMANCE, WHY DO WE START TOMCAT BUT NOT MAVEN 


********  i think that java is a perequisit for tomcat to run because we are managing java based projects

*** 49.18...this is class 32, we hv gotten to a point wher u can use can create ur servers using auto scaling 


********  TO check if my server is listening and to get my ipaddress 
curl ifconfig.io
curl ifconfig.me


1:43:00, 1:44
***** we have installed tomcat and seen how we can use tomcat to deploy applications
we have seen how to install a server and call it a maven server by installingthe maven software and also installing a server and call it a tomcat server by installing 
the tomcat software on the server
we also saw how to grant gui access, so someone can manage our tomcat server from gui by configuring and setting up the server



***** session with engr armstrong , think he was helping me troubleshoot tomcat   ( I copied this from my maven 1a note)

          WHY DO WE START TOMCAT BUT NOT MAVEN 

We start tomcat because its a software that is accessible in the internet/browser and it has to be accessible because customers need to utilize the apps in tomcat server
but maven is a build tool, nothing is coming in or going out , maven doesnt listen to/on any port . it can do builds, change codes from machine readable to human readable
maven is not accessible on the internet , it uses just port 22and our server is ready to build.

we also access sonar qube, jenkins on the internet/browser because people need to see that ecerything that is required for the code is successful





               START
engr Amstrong said we know if tomcat is installed by running start tomcat
******** the codes cant be taken to in raw form to the client's environment, 
***52.00 >>> we are deploying from tomcat to maven

****the default port addresss for tomcat is 8080 but when we change it  in server.xml, then we hv to configure tomcat server in META-INF/context.xml
1st enable external tomcat mgt access, bc by default u can only mg8 & access tomcat as local host 
the file (context.xml) permits tomat to be manged as local host so when it comes to how acces is allowed in tomcat 
'127' means that tomcat can only be access as local host so to change it we hv to comment 

 


LSS                                                    code build with github                                                 Application
SCM github                                                maven/Ant/Graddle                                                      server
Remote Repo/paypal          push/clone
pom xml                   >>>>>>>>>>>>>>>>>          for deploying.jar application we need          >>>>>>>>>>>>>>>>            open Jdk 1.7+
unit Test cases                                         app.war/*war , ear                                                       Tomcat/Jboss
src - source code                                                                                                                 JBoss/Wild fly




9:48

when we do a build, the code will be packaged compiled and artifacts will be created, these packages can be jar/war/ear
before that can happen we are going to pull the code with the command gitpull/clone and once the build is done w ecan deploy the application to the application sever 


APACHE TOMCAT
Tomcat or Apache Tomcat is a light weight, open source web container  used to deploy & run java-based web application.
it is developed by Apache software foundation (ASF)


WHAT IS WEBSERVER?    eg  nginx , apache 
A webserver is a program that uses HTTP (Hypertext Transfer Protocol) protocol to serve web content (HTML and static content) to users.
                                                                          static content & images 
Examples;
Apache HTTP server
Nginx (pronounced engine X) 
IBM HTTP server (IHS)
Oracle iplanet web server
Internet information Server (IIS)

                                 APPLICATION DEPLOYMENT
which kind of projects are we managing?
we are managing java based projects - projects that are developed in the java lanaguage



                                HOW TO DEPLOY JAVA BASED APPLICATION
If you have a maven-standalone-application 
you want to deploy the application? what we need is java

   java -jar appName.jar 
eg we have :    java -jar packageName.jar
    java -jar user-banking.jar 
  the java needed =    java openJDK 1.7+       (java development key 1.7+)
thats what we need to deploy a java stanalone application
we need java installed before the application can run

19:20

  To deploy maven-web-application  :
its actually java based web-application  : app.war / *.war / paypal.war          **** anyname at all but it must end with .war 
    the application must be deployed either to Tomcat server or 
     server running with JBoss/WildFly


  For maven-enterprise-application
if we are deploy a java based enterprise application  : then the application 
   should create artifacts the end with .ear  app.ear / paypal.ear  
  these applications can be deployed into  JBoss/WildFly



                                 WHAT IS AN APPLICATION SERVER?

An application server is a container upon which you can build and expose business logic and processes to client applications through various protocols including HTTP in 
a n-tier architect

                        Examples of servers
Apache Tomcat - Apache
Jboss/wildfly - Redhat
WEblogic - Oracle 
websphere Application Server - IBM 
Websphere liberty profile - IBM
Galssfish

                      HOW SHOULD WE EXPOSE APPLICATION TO USERS
The way we expose these applications to users is important


22:24
eg
60musers -----> boa.war        (using the bank of america app)
GitHub---->Maven[boa.war]---->appServer        (we hv 60m users)  need to access the application running in the appserver
80musers ------->  appServeR



24:00

24:00                   MULTI TIER APPL
 Our Appserver is Tomcat, we do not deploy to one appserver, so we have appserver 1,2,3 and for this process to be automated we need a tool called ansible. so when we do a 
build, with the help of ansible automating the process that is deploying the application to multiple appservers all of the servers have tomcat installed. 
now to expose this application to user and we have 60m user, these users need to access this application . traffic from this users need to get to the applictaion . traffic
 from from the the users is routed to the appserver but for us to manage how traffic is distributed to the appserver we will introduce a security tool which is a webserver, 
it can be an apache webserver ie httpd is installed . the webserver does load balancing. once it receives traffic from endusers, it will listen to the request and 
authenticate the user ifits the right user. our web server will ensure that the appserver doesnt get traffic directly.
the webserver distributes the traffic evenly by balancing the traffic load it distributes to the appserver


                                                                                                  CONTENT/DESIGN OF MULTI TIER APPL

                                                                                                      Backend; conatains the appserver Tier          db Tier

                        LSS                                 code build                                 >>  appserver1           24.00 ****EXPLAINED ABOVE 
                    SCM- github                               maven                    ansible         >>>   tomcat                                     
                   Remote Repo/paypal       gitpull          app.war                                   >>>       
                    pom xml             >>>>>>>>>> >>>>      *war         >>>>>>>                      >>> appserver2    >>>>>    database
Developers >>>>     unit Test cases         gitclone                                                   >>>   tomcat                    
                 src - source code                                                                                                              
                                                                                                            !20M
                                                                                                            ! 20M
                                                                                                            ! 20M
                                                                                                            !
                                                                    ****40.00 explained below                                        !
                                                                                         listen HTTP 80    webserver
                                                         60M Users                       http 443       apache httpd
                                                                                                          loadbalancer

                                                                                              (Frontend; contains the webserver/LB tier)  ***** 36.50, Didnt explain what "tier" is.




 multi-tier applications Deploment:

                                  CONTENT/DESIGN OF MULTI TIER APPL

                frontend tier (DMZ)                      and                        backend tiers (MZ)
   which is our  webServers/LBTier (this stands in front)                   appTier      dbTier
 users(60m)                -->webServers/LB                            -->appServer-->database  
                                                     **** 34:08           when users try to access their account they are entering their 
                                                                 userName/ Password/ addresses/
                                                                            SSN/DOB/tel  
                                                        all these information needs to be stored in this database very sensitive information


multi-tier Application helps in high security because the way application are deployed they are highly secured

Backend tiers:
comes with high security = this is running in militarized zone = MZ
this includes application tier and database tier

    frontend tier  : Medium security = D-Militarised zone = DMZ
  Like the webservers, loadbalancers, jumpservers

38:57
eg we hv 60m users;
We dont allow traffic from app users to get to the app servers directly because if it does, it will be a security bridge which is highly risky.
therefore  , inbetween the appservers & users we place the webservsrs/LB
therefore, if u want to access these appservers, it is routed via the LB or webservers .. & this is very secured 
60mUsers ------> webserver/LB ----->appServers 


40:00
when traffic comes from enduser, the webserver expects traffic to come on http or 443, so the webserver is listening for the request from users. when ths users are trying
to access the appserver they are making some request on the port number either 80 or 443 while the webserver is listening for the request to determine if its from the right
user. if its the right user, it will authenticate the user and route the traffic but if the user is not authenticated it wont route the traffic 
************ thers a video on utube explaning this 41:00





31:00
whatelse is the webserver doing?
lets assume that beyond the appserver, endusers are able to access this account and do diff transaction or create account when they do that they will enter their names, DOB,
email. All the date generated in this process has to be captured
whatever information the users enter/generate while accessing the app is captured in a database we access the information with the help of a database










   APPlication SErver:   

Application Server: 
IBM WebSphere Application Server (WAS)  --> IBM    (developed by)
Apache Tomcat:   --> Apache  --> OS

JBoss/WildFly:   --> Redhat/IBM 
    1.0.0 to 7.0.9
    1.x to 7.x --> JBoss
    from 8.x-->    WildFly
         versioning  
    git branch and git tag 

WebLogic --> Oracle  :


43:20

IQ: What is the d/f b/w JBoss/WildFly and Tomcat? 
    
1)vendors: Tomcat==Apache  
             JBoss=Redhat  
    
 2) Applications:          
        JBoss; Web applications .WAR 
               enterprise applications .ear 
        Tomcat; web applications ONLY 
============================




                                              TOMCAT INSTALLATION
43:40

                  
Tomcat Installation:
---------------------
https://tomcat.apache.org/download-90.cgi
https://github.com/LandmakTechnology/package-management/blob/master/Tomcat-installation/READme.md
https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.80/bin/apache-tomcat-9.0.80.zip



58:30 

          https://github.com/LandmakTechnology/package-management/tree/master/Tomcat-installation
   
Apache Tomcat Installation And Setup In AWS EC2 Redhat Instance.

Prerequisite
first step: AWS Acccount.
Create Redhat EC2 T2.micro Instance.
Create Security Group and open Tomcat ports or Required ports.
8080 ..etc
security; ALLow "all traffic for both" inbound & outbound rule , so can access on the browser & curl -v on CLI
Attach Security Group to EC2 Instance.


1:03****Next

change hostname  sudo hostnamectl set-hostname tomcat
change shell   sudo su - ec2-user
cd opt
install = sudo yum install git wget unzip -y
Install java openJDK 1.8+
sudo yum install java-21-openjdk-devel -y     ... now version 21
***** skip, included in line 4 above***sudo yum install wget unzip -y 
to verify = java -version
install tomcat: 
sudo wget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.108/bin/apache-tomcat-9.0.108.zip     *** 404 error.. i bliv outdated
sudo wget https://dlcdn.apache.org/tomcat/tomcat-10/v10.1.44/bin/apache-tomcat-10.1.44.zip
sudo unzip apache-tomcat-10.1.44.zip
sudo rm -rf apache-tomcat-10.1.44.zip
### rename tomcat for good naming convention
sudo mv apache-tomcat-9.0.108 tomcat9  
run ll; root user owns the file so;
### assign executable permissions to the tomcat home directory
sudo chmod 777 -R /opt/tomcat9            1.05.58********** ( but we did 775)
sudo chown ec2-user -R /opt/tomcat9                 right now its owned by root to avoid issues like not the the onwer we change it to ec2-user 
change user to avoid access denied
now when we ll, we can see  user has changed from root to ec2user
### next we can start tomcat with absolute/relative path BUT we will create a symbolic link to automate it from anywhere     *** 108.43
ls, 
tomcat9
cd tomcat9/, 
pwd,
ls,
bin
ls bin/
in the bin dir these are files we can use to start tomcat
eg
catalina.sh, startup.sh
so to start tomcat = sh /opt/tomcat9/bin/startup.sh
Now we create link to start tomcat frm anywher :
sudo ln -s /opt/tomcat9/bin/startup.sh /usr/bin/starttomcat     **(this can be any name at all)
sudo ln -s /opt/tomcat9/bin/shutdown.sh /usr/bin/stoptomcat
sudo su - ec2-user
then starttomcat
then cd opt, cd tomcat9


*****2:18:31....   THE binary files in the bin dir like catalina.sh helps us to start and stop tomcat
as a matter of fact thats where (bin dir abi cataina file) the command shud be run from but bc we created a symbolic path we can start& stop tomcat frm 
anywhere in our env eg we can start it from anywhere by just by saying start/stop
the name can be anything decided by the coy 
and thats why you always hv running notes to ease your job 


                                              1:12:22
******* As path of our tomcat installation we are going to create a link to stop & start tomcat from anywhere 
sudo ln -s /opt/tomcat9/bin/startup.sh /usr/bin/starttomcat     
sudo ln -s /opt/tomcat9/bin/shutdown.sh /usr/bin/stoptomcat


  ********* INSTALLATION ENDS *******************************

1:09
with the symbolic path we dnt have to cd tomcat9 to start or stop tomcat we can start & stop from anywhere


1:11:00
****** the difference between
[ec2-user@tomcat tomcat9]$ sh /opt/tomcat9/bin/startup.sh
this is the absolute path starting the root directory

          WHILE
[ec2-user@tomcat tomcat9]$ sh startup.sh (says no such file or dir)
this is the relative path starting the pwd

1:11.7
whereis ls 
ls: /usr/bin/ls /usr/share/man/man1/ls.1.gz
*** when we run  "ls", it works but when we run sh "startup.sh", it (says no such file or dir)
but they are both in the bin dir
ls works from anywhere because a symbolic path has already been created;therefore for  "startup.sh" to work, we have to create a symbolic link, as part of our tomcat installation
                                                  
                                              1:12:22
As path of our tomcat installation we are going to create a link to stop & start tomcat from anywhere 
both commands can be run together
ec2-user@tomcat tomcat9]$ 
sudo ln -s /opt/tomcat9/bin/startup.sh /usr/bin/starttomcat     **(this can be any name at all)
sudo ln -s /opt/tomcat9/bin/shutdown.sh /usr/bin/stoptomcat


when we change to ; sudo su - ec2-user 
so we can run = starttomcat to start
               OR = stoptomcat  to stop   ... from anywhere
 cd /opt/tomcat9


2:18
the bin dir is where we are suppose to run start and stop  but because of the symbolic link we can start from pwd




                       ********* if you want to access this server its going to be on port 80:80, so we check from our CLI if tomcat is running by
                                                  curl -v public ip80:80 OR curl -v localhost:8080
1:14:22                                                                                                      tomcat server
to verify if tomcat is running : we need the ip address &portnumber of :
Tomcat publicIP =  34.219.51.216 
 Tomcat portNumber = 34.219.51.216:8080  , TO access on our browser
OR 
now we can in our CLI check if tomcat is running or not by running the curl verbose to get a response
the curl -v 34.219.51.216:8080   
 OR                                   
                                 in verbose
We can check on local host =  curl -v localhost:8080 
To check on our browser  = 34.219.51.216:8080   
and also to access our tomcat server on the browser
curl -v 18.223.16.218:8080   .. mine
curl -v localhost:8080 
curl localhost:8080 



    1:26:24                                      HOW TO VERIFY IF TOMCAT SERVER OR PROCESS IS RUNNING 

AFTER INSTALLING TOMCAT

    Verify if the tomcat service/process is running:
   We can run the :
    ps -ef | grep tomcat  
    telnet localhost 8080 
    curl -v localhost:8080 
    curl -v publicip:8080
    curl -v 34.219.51.216:8080
    curl -v 34.219.51.216:8177

 TO check if my server is listening OR to get my ipaddress 
curl ifconfig.io
curl ifconfig.me


 to install telnet: sudo yum install telnet -y
 to install vim: sudo yum install vim -y


            **** meee*** SECURITY
**** from commandline ie mobaxterm check our local environment , curl localhost 8177 to check if someone from outside can access our server 
curl public ip:8177


                                        TOMCAT HOME DIRECTORY

                                      

  Tomcat Home directory - THD = /opt/tomcat9
THD: The Tomcat Home Directory is 
     where the tomcat software is extracted 
      we used wget to download tomcat  
      and unzip  to extract


                                           EXPLAINING THE CONTENT OF THE THD

when we ls, we see bin, conf, lib, logs, webapps, temp

 bin :
ls bin/ contains:
    bin: --- binary files  (important files like )
      startup.sh    --->  for LINUX SYSTEM
      startup.bat   ---->  for  WINDOWS OS
      shutdown.sh
      shutdown.bat     ----> for WINDOWS OS
      catalina.sh start
      catalina.sh stop | start | restart | status  
      version.sh
      version.bat           
    

1:22
ls conf /  vi conf/server.xml to view conf file

ls conf/: 

eg of files in conf:
     server.xml          
      tomcat-users.xml, users.xml for those that work in the bank
               contains configuration information about tomcat server, any changes can be done here
 eg; vi conf/server.xml

 webapps:
      we effect deployments in Tomcat in the webapps Directory
       if you want to deploy in tomcat, its where deployment is taking place 
      The default deployment Directory in Tomcat is = webapps 
       therfore all the war files
      like maven-web-app.war created from # mvn package 
       we have to copy to the webapps dir because thats where deployment takes places 
        cp *.war /webapps
        cp *war   /opt/tomcat9/webapps/maven-web-app.war


    lib :
        contain all the jar files

    
    logs :   contains log files
      catalina.out
      host-manager.log
eg; vi logs/catalina.out


IQ:  What are the log files available in the tomcat log dir?
      catalina.out                     ****** check here if tomcat is not running
      host-manager.log        
   



               HOW TO CHANGE THE DEFAULT PORT NUMBER OF TOMCAT SERVER
    ***** whenever we change anything in the config file we have to restart tomcat

Ticket:
  Change the default portNumber for tomcat from 8080 to 8177 

Absolute path is 
vim or vi  /opt/tomcat9/conf/server.xml

to install vim :sudo yum install vim


1:32:50
then once we vi or vim /opt/tomcat9/conf/server.xml
we go to section "connector" and change 8080 to 8177
then stop and restart tomcat


1:31:17
       ***** whenever we change anything in the config file we have to restart tomcat



****the default port addresss for tomcat is 8080 but when we change it  in server.xml, then we hv to configure tomcat server in META-INF/context.xml
1st enable external tomcat mgt access, bc by default u can only mg8 & access tomcat as local host 
the file (context.xml) permits tomat to be manged as local host so when it comes to how acces is allowed in tomcat 
'127' means that tomcat can only be access as local host so to change it we hv to comment 

 

1:33:13                          TO ACCESS TOMCAT AS A USER  
                         (BY default you can only access and manage tomcat as a local host)


 public ip: 8177     on our browser
then click on manage App
it shows its 403 error - Access denied

1:35:46
so we have to conf tomcat server

*****1:35:21
1) enable external tomcat mgt access
vi or vim  /opt/tomcat9/webapps/manager/META-INF/context.xml
this file is permitting tomcat to be managed as local host
showing , allow = "127\.df, which only allows broadcast /traffic from local host
 therfore we comment the line above by inserting <!--
                                                  -->

By commenting the line, it means that i am changing the configuration such that other traffic can be allowed into my tomcat server

now once we try to public ip: 8177 on our browser its asking for username the password


  *** 1:38:05  guess this is setting up
2) next we create tomcat user with access roles:
vi or vim  /opt/tomcat9/conf/tomcat-users.xml             # to add user


1:40
       ****** copy and paste to add 2users
a) <user username="cecilia" password="admin123" roles="manager-gui,admin-gui,manager-script"/>
  ceceilia has manger role ie he can manage from the gui(graphic user interface) he has admin while simon has admin gui
b<user username="simon" password="admin123" roles="admin-gui"/>

****** imputing username :Cecilia and password admin123, i can log in


***1:45:59
                 WAYS TO DEPLOY IN TOMCAT 
Option1) already saved file/artifact in my computer
he already has war file on his computer,so on the browser he clicked on deploy then in mobaxterm(CLI)
ls   /opt/tomcat9//webapps                                                                                  
we see the file copied into the webapp dir 
therfore; once i log in as admin/manager on my public ip:8817 on my browser                                                      
"in WAR files to deploy": i can choose my war file (frm my computer) and deploy

ALSO; on the browser logged in as admin/manger on public ip :8817 which is our gui, click "list applications"  we can see the file we choose and deployed (maven web app)
ie this application has been deployed in tomcat, in the webapps dir

******* if its on my tomcat server i can just remove it from one server location 


1:49:15
            DePLOYING FROM SERVER TO SERVER (Maven to tomcat)    **** i was not successful got error..   error in libcrypto
                                                                  &  scp -i sea.pem target/tesla.war ec2-user@18.223.16.218:/opt/tomcat9/webapps/app.war
                                                                     ec2-user@18.223.16.218: Permission denied (publickey,gssapi-keyex,gssapi-with-mic) scp: Connection closed
option2)    which we ll use most of the time 
we want to deploy the app from maven to tomcat 
we want to copy the file from our build server to tomcatserver

  ****1;55;13  secure copy
A)if my server is not password authentication enabled,   *** we have to configure to use the private/ssh key  *** see git4 1.22; for how to generate key but use  *** ssh-keygen -m PEM -t rsa )... ssh-keygen generates (openSSH)wrong key format
we run the scp command in maven                                  
scp -i c32.pem  target/*war ec2-user@tomcat public ip:/opt/tomcat9/webapps/
B)if password authentication is enabled                                   *******(PW authentication has to be configured in both tomcat & maven server)
 we run this:   scp target/*war ec2-user@18.223.16.218:/opt/tomcat9/webapps/  
ie;  scp target/tesla.war ec2-user@18.223.16.218:/opt/tomcat9/webapps/app.war

 
A)   .......... Enable PW authentication

   1st ... Clone the application codes in our maven server 
to access my maven server 
1) in mobaxterm, i opened another tab and cd documents where my key is 
2) ssh -i key 33.pem ec2-user@maven public ip
3)mkdir java-project
4) git clone https://github.com/landmaktechnology/maven-web-application
5) Rename : mv maven-web-application/ mwa
6) cd java-project  & cd mwa
7)mvn package
8)ls  .. we see target dir
9) copy our tomcat server in maven 
scp target/*war ec2-user@publicip:/opt/tomcat9/webapps
But we got permission denied  bc we are trying to copy with the command for a pw authenticated server but our server is not PW authenticated. buti tried the command for server thats nt PW authenticated but it didnt work as well.

1:57:46
     WE ASSIGN PASSWORD TO MAVEN SERVER  ( bY COnfiguring password authentication)
1) so we  sudo vi /etc/ssh/sshd_config
and change paswd authentication fron no to yes
2) then we restart  server: sudo systemctl restart sshd
3) then assign PW for ec2-user 
sudo passwd username 
sudo passwd username 
sudo passwd ec2-user =brightday123

Also; Tomcat is the receiving server, so it has to have password authenticated for it to work 
because we are trying to access our tomcat using password so 
we have to config paswd authentication in tomcat

  CONFIGURE PASSWD AUTHENTICATION IN TOMCAT
1) sudo vi /etc/ssh/sshd_config
    change password authentication no to yes
2) sudo systemctl restart sshd
3) assign password
     sudo passwd username 
           sudo passwd ec2-user  : Admin123
                           brightdays123


**2:02:10
                    TO DEPLOY APPLICATION IN TOMCAT
1) in Tomcat; watch ls  /opt/tomcat9/webapps/
2) we go back to maven server and run scp target/* war            **************  we were able to deploy in tomcat using the scp command 
and it will now request for password : Admin123
3) Now we go back to tomcat server and in our 'watch' we can see  tesla.war
4) also, if we check our tomcat gui on my browser, i also see teslar.war in my list of applications 


B)************** Enable SSH authentication

     To DEPLOY USING SSH KEY FOR AUTHENTICATION
i) vi  keyname = vi key33.pem
ii) chmod 400 key33.pem
ii) scp -i key33.pem target/tesla.war ec2-user@3.90.51.187:/opt/tomcat/webappps/app.war         *** i bliv this is the tomcat public ip
when we check list of application on gui we can see app.war
 

2:04:40                                                                                                                            -t rsa: Specifies the RSA algorithm.
***** if no PW authentication & am only allowed to use private/ssh key   *** see git4 1.22; for how to generate key but use ***  ssh-keygen -m PEM -t rsa BUT i dnt think(-t rsa) is necessary ... ssh-keygen generates (openSSH)wrong key format
1) search for private key file 
2) in maven server; vi in key33.pem , paste, save & quit
3) run the chmod 400 key33.pem
 scp -i maven.pem target/tesla.war ec2-user@18.223.16.218:/opt/tomcat/webapps/app.war     *** app.war means when we deploy the file will be/converted app.war
 
***** 2:07:48 **** this command means            *** i bliv we run this in the maven server
 scp -i maven.pem target/tesla.war ec2-user@18.223.16.218:/opt/tomcat/webapps/app.war
i want to copy a file found in the target dir
the file name is tesla.war
i want to identify myself in the receiving server as ec2-user , the ip address is 3.90.51.187; ie my public ip for tomcat server is 3.90.51.187  (engr amstrong said am asking ec2-user to sent the file to tomcat ip adress)                                   
the path to where the file will be deployed: /opt/tomcat9/webapps/app.war"              ****** the file name is app.war  & *** the env we are deploying to webapps dir
  it is converting tesla.war to app.war


TO DEBUGG ISSUES
 scp -v target/tesla.war ec2-user@18.223.16.218:/opt/tomcat9/webapps/


  


2:22 
***********  to mg8 my sever/system bc server is a system 
       df -h : how much file system you have terms of storage 



*2.05 .00     USING PRIVATE KEY


cd opt

***** 2:11:51         HOT FIX   (to change/correct the information we see in the deployment; ie once we deploy, in tomcat on our browser, click "list app" to see the deployed file ie tesla.war) 
                                         ie vi into the dir (tesla/jsp)to do the hotfix
ls /opt/tomcat9/webapps/
ls /opt/tomcat9/webapps/tesla
ls /opt/tomcat9/webapps/tesla/jsps/
then vi /opt/tomcat9/webapps/tesla/jsps/
scroll to the section where the caption needs correction and change it

on the list of application
we can stop, reload, undeploy 

we undeploy it means we want to delete the application code (app app.war) from the web app dir
2:15:4   ie when you deploy it copies the war file into the webapp dir and unpack it
unpack: ie when we copied the file we copied maven web app but when it goes to web apps it extract it, so when you do deploy you are copying this war file into the webapp
dir and when it gets there its a automatically extracted which means it is unpacked.

WHAT IS UNPACKING
/opt/tomcat9/webapps/
when u deploy it copies the war file into the webapps dir and unpack it
unpack means eg when we copied the file we copied maven-web-app but when it goes to 'webapp dir',its extracting, & we see /app & app.war (app.war is red)why?
so when u do deployment u are copying this war file into the webapps dir and when its gets ther its automatically extracted which means its unpacked. 


when we deploy 
ls /opt/tomcat9/webapps/
app app.war does examples host-manager manager maven-web-app maven-web-app ROOT tesla  teslar.war
ls /opt/tomcat9/webapps/tesla
jsps imagesMETA-INF


2:25 latency
WE ARE able to create instances anywhere in the world, the reaseon why  we use server resources in Aws is to give us that leverage
because you can be in lagos & launch ur instances in N virginia, & if ur cutomers are in N vitgina/US theres no problem in terms of latency 
Also if we are dealing with if we are using t2- micro instance & thers no t2 micro instance in Ohio/stocolm, u cant say there and say u want to use stolcom, in that way ur trying to 
implementtraditional computing that was done many yrs ago b4 the advent & the evolution into cloud computing
the cloud permits u to leverage your customer base from around the world.
ICT has mystify proximity interms of how you are able to have access to diff resources.


                                 

example of cloud providers that can be launched 
1)aws
2) Gcp
3) Azure

  AWS/GCP/AZURE/ONPREM 
 Redhat  linux server   >>>      ec2 Redhat! address     !    }
                                 instance  !  ports      !    }  this is the cloud environment
Software   >>>>>>>>>>>>>>>       tomcat9   !   o-65536   !    }


 i Can launch my server in any of the cloud providers OR i can own my on system and called it onprem system 
eg launched in Aws
a) once i launch my server 
****** then i give myserver a name  1) the name of my server can be ec2Redhat instance                 ****redhat is a linux server
3) i install a tomcat9 software 
4) the server comes with addresses and they are called ports 
the point range is from 0-65536 for any server created  either windows , linux, etc


2:31:30
port number or server addresses:

    80  -- http     , Hyper text  transfer protocol
    443 -- https
    8080 -- Jenkins / Tomcat  / JBoss
    0-1024 -- Reserve ports
    1025-65535  
    465 --- SMTP
    587  --- SMTP
    22   --- ssh
    23   -- ftp
a server has 65536 ports/addresses    


on our security  grp  you can open a port or choose not to source from a particular        
we open address by using securing and firewall (firewall rules)  in AWs they are called security groups 

2:33
if you choose number of address and you want to accept traffic if the traffic listen on 
if a traffic needs a particular port number, that number must be in existence . it must be open before the traffic can flow in 


                         CAN WE RUN TOMCAT AND MAVEN IN ONE SERVER

YEs you can but its  not recommended because it can lead to one single point of failure ie if maven server is down, tomcat also goes down , if tomcat has a problem, 
maven is also down 


                            HOW TO IMPROVE TOMCAT SERVER PERFORMNACE 

1) multiple request on a single tomcat server will affect performance
2)  Multiple deployments will reduce tomcat server performance.
  therefore its recommended  to have multiple tomcat server 
3) The resource level or computing capacity OF your tomcat server   
     8GB RAM,   480GB Hard drive HDD  is better than 64GB RAM,  4000GB Hard drive SSD   

  2:39:10
4) HDD hard drive  is/are of less performnace than SSD

5) HEAPSIZE 
  We can increase the heapsize of the server 
Normally, tomcat by default allocates 64mb but we can increase to 128mb/256mb
  heapsize = 64mb -- 128mb/256mb    




***** session with engr armstrong

    you always have to starttomcat

                                       WHY DO WE START TOMCAT BUT NOT MAVEN 

We start tomcat because its a software that is accessible in the internet/browser and it has to be accessible because customers need to utilize the apps in tomcat server
but maven is a build tool, nothing is coming in or going out , maven doesnt listen to/on any port . it can do builds, change codes from machine readable to human readable
maven is not accessible on the internet , it uses just port 22and our server is ready to build.

we also access sonar qube, jenkins on the internet/browser because people need to see that ecerything that is required for the code is successful


  ******* 
 chmod 400 always
then if using terminal  -sshh ikey33.pem @ec2user: public ip OR copy command from AWS in connect
 then starttomcat 
then curl localhost 
then curl ifconfig 


Ls /opt/tomcat9 = bin conf webapps




   SUMMARY 

1) Install tomcat
2) verify if tomcat is running
3) if it can receive   curl ifconfig.me    |curlifconfig.io
4) RBAC - role based  accesss control 
 tomcat - user.xml file 
 simon  (username/passwd/ roles)
 dominion 
landmark 
5) copy: scp/ scp:
           but if you first copy to the home of tomcat server 
7:35     = scp target /tesla.war landmark @ 18:234.79:/ home ec2-user
          you will still have to copy it to the webapps dir to deploy 
         = cp  /home /ec2-user/teslar.war/opt/tomcat9/webapps

6) performing hot fixes
   vi /opt/tomcat9/webapps/app/jsps/home.jsp

7) enhancing/ turning up the performance of our tomcat servers by increase ing the heap size


   24:30
   WEBSERVERS: eg  nginx , apache 
    this is used to serve static content & images 
   we use webservers to server webcontent to user 



       TICKET 0014   nginx , Apache  http 
   write a script  to deploy apache webserver 


installing apache as the rootuser  = sudo - i 
vi apache.sh  & create a script ( webserver installation) 


  this script will start, enable & verify if apache is running or not 

  #!/bin/sh
# install apache as the admin/root user  
sudo yum install httd -y 
sudo systemctl start httpd
sudo systemctl enable httpd 
echo devops is good  >> /var/www/html/index.html                        ****** copy to a file called index.html
if i want to write the above a an html code 
17:50   echo <h1> and easy with landmark  </h1>   >> /var/www/html/index.html
mkdir  /var/www/html/google 
echo  <h1> landmark  google  </h1> >> / var/www/html/google/index.html            ***** save some web content in google dir 
systemctl status httpd 
ps -ef |  grep httpd 


23:30
  sh apache.sh to run the script
   curl localhost  : shows us - devops is good 
   curl  localhost  google

26:30 http://public ip/      }    each command gives a diff result 
& http:// public ip/ google  }



27:45  loading balancing & ngnix for application deployment 




                                                                                       END 

   ######################################################## ################## 


            SUMMARIZED FOR INTERVIEW
engr Amstrong said we know if tomcat is installed by running start tomcat

LINUX , scripting, git , maven, tomat, sonar, nexus, jenkins , aws, docker, k8, terraform, ansible, k8/helm 
In our env, we use LINUX OS for file,process,package,security mgt, GIT FOR VERSIONING, MAVEN FOR TEST & BUILD creates the packages & artifacts, TOMCAT for deployment, 




GIT
Authentication/Verification is only required each time to run "git push " command (nt sure if it request for passwd to add a repo for the first time)
***BUT; to automate the verification process there are 3 options but ssh url is the best; 1)generate a token classic in github(lasts >30days) OR 2)generate ssh key and use ssh url or 3) http url
 this was the case when we were still in class but when in 2025 during my revision, the authenticatin wa sychronized by the system ie i was directed straight to github to be authenticated(i think with authentication app code)
but tomcat;
authentication is required to transfer files/package from maven to tomcat
 WAYS TO DEPLOY IN TOMCAT 1) UPLOADING STRAIGHT TO TOMCAT DIRECTLY FROM MY COMPUTER; if i already saved file/artifact in my computer then in tomcat on my browser ie (tomcat gui)click on deploy 
 option2)       DePLOYING FROM SERVER TO SERVER; A)if my server is not password authentication enabled    ****** we have to configure to use the private/ssh key (scp -i c32.pem  target/*war ec2-user@tomcat public ip:/opt/tomcat9/webapps)
B)if password authentication is enabled   *** (PW authentication has to be configured in both tomcat & maven server) sudo vi /etc/ssh/sshd_config ( the command to transfer ;ssh -i key 33.pem ec2-user@maven public ip)



webserver expects traffic to come on http or 443,
when the users are trying to access the appserver they are making some request on the port number either 80 or 443 



Tomcat port 8080
we can change the DEFAULT PORT NUMBER OF TOMCAt in server.xml/configuration file;  vi /opt/tomcat9/conf/server.xml***** whenever we change anything in the config file we have to restart tomcat
To enable external tomcat mgt access vi or vim  /opt/tomcat9/webapps/manager/META-INF/context.xml
next we create tomcat user with access roles: vi or vim  /opt/tomcat9/conf/tomcat-users.xml  
WE ASSIGN PASSWORD TO MAVEN & TOMCAT SERVER  ( bY COnfiguring password authentication) sudo vi /etc/ssh/sshd_config   
 
***52.00 >>> we are deploying from maven to tomcat

to start/stop tomcat: this is the absolute path starting the root directory
  sh /opt/tomcat9/bin/startup.sh
this is the relative path starting the pwd
sh startup.sh 

 TO check if my server is listening OR to get my ipaddress 
curl ifconfig.io
curl ifconfig.me




   **** ************************* START
Summary
1)Install tomcat 2)verify if tomcat is running 3)if it can receive;curl ifconfig.me  |curlifconfig.io  4)RBAC - role based accesss control;tomcat-user.xml file 5)copy: scp/ scp: 6)performing hot fixes vi /opt/tomcat9/webapps/app/jsps/home.jsp
7) enhancing/ turning up the performance of our tomcat servers by increase ing the heap size

 TO check if my server is listening OR to get my ipaddress 
curl ifconfig.io
curl ifconfig.me


APACHE TOMCAT
Tomcat or Apache Tomcat is a light weight, open source web container used to deploy & run java-based web application.
it is developed by Apache software foundation (ASF)
we are managing java based projects - projects that are developed in the java lanaguage
 ***** ignore; prerequisite; Install java openJDK 1.8+
tomcat can be installed on any system ... linux, windos


****meee**** the codes cant be taken in raw form to the client's environment, so we do a build and create packages that are deployed in app servers in the
clients environment

when we do a build, the code will be packaged compiled and artifacts will be created, these packages can be jar/war/ear
before that can happen we are going to pull the code with the command gitpull/clone and once the build is done we can deploy the application to 
the application sever 

  WHAT IS AN APPLICATION SERVER?
An application server is a container upon which you can build and expose business logic and processes to client applications through various protocols including HTTP in 
a n-tier architect
                       Examples of servers
Apache Tomcat - Apache, Jboss/wildfly - Redhat, WEblogic - Oracle, websphere Application Server - IBM, Websphere liberty profile - IBM, Galssfish
                        HOW SHOULD WE EXPOSE APPLICATION TO USERS
The way we expose these applications to users is important


                       MULTI TIER APPL
 Our Appserver is Tomcat, we do not deploy to one appserver, we are deploying (the application) to multiple appservers all of the servers have tomcat installed & this process is automated with the help of a tool called ansible. 
Also, The way we expose these applications to users is important
now to expose this application to users who need to access this application. traffic from the the users is routed to the appserver but for us to manage how traffic is distributed to the appserver we will introduce a security tool which 
is a webserver, our web server will ensure that the appserver doesnt get traffic directly.
We dont allow traffic from app users to get to the app servers directly because if it does, it will be a security bridge which is highly risky.
therfore; an apache webserver ie httpd is installed . the webserver does load balancing. once it receives traffic from endusers, it will listen to the request and 
authenticate the user if its the right user. 
the webserver distributes the traffic evenly by balancing the traffic load it distributes to the appserver
when traffic comes from enduser, the webserver expects traffic to come on http or 443, so the webserver is listening for the request from users. when ths users are trying
to access the appserver they are making some request on the port number either 80 or 443 while the webserver is listening for the request to determine if its from the right
user. if its the right user, it will authenticate the user and route the traffic but if the user is not authenticated it wont route the traffic 
Also; whatelse is the webserver doing?
**ignore; lets assume that beyond the appserver, endusers are able to access this account & do diff transaction or create account when they do that they will enter their names, DOB,email. All d data generated in this process has to be captured
whatever information the users enter/generate while accessing the app is captured in a database we access the information with the help of a database

TOMCAT INSTALLATION
As path of our tomcat installation we are going to create a link to stop & start tomcat from our pwd, ie anywhere 
sudo ln -s /opt/tomcat9/bin/startup.sh /usr/bin/starttomcat     
sudo ln -s /opt/tomcat9/bin/shutdown.sh /usr/bin/stoptomcat

  THE binary files in the bin dir like catalina.sh helps us to start and stop tomcat
as a matter of fact thats where (bin dir abi cataina file) the command shud be run from but bc we created a symbolic path we can start& stop tomcat frm 
anywhere in our env eg we can start it from anywhere by just by saying start/stop
the name can be anything decided by the coy 
and thats why you always hv running notes to ease your job 


 if you want to access this server its going to be on port 80:80, so we check from our CLI if tomcat server/process is running by
                                                 curl -v public ip80:80 OR curl -v localhost:8080 OR telnet localhost 8080 


we can change the DEFAULT PORT NUMBER OF TOMCAt in server.xml/configuration file 
Absolute path is vim or vi /opt/tomcat9/conf/server.xml
we go to section "connector port" make the change then stop and restart tomcat

****the default port addresss for tomcat is 8080 but when we change it  in server.xml, then we hv to configure tomcat server in META-INF/context.xml
1st enable external tomcat mgt access, bc by default u can only mg8 & access tomcat as local host 
the file (context.xml) permits tomat to be manged as local host so when it comes to how acces is allowed in tomcat 
'127' means that tomcat can only be access as local host so to change it we hv to comment 

 

 TO ACCESS TOMCAT AS A USER  
  (BY default you can only access and manage tomcat as a local host)
1) To enable external tomcat mgt access vi or vim  /opt/tomcat9/webapps/manager/META-INF/context.xml
this file is permitting tomcat to be managed as local host
therfore; we comment on the line, thereby changing the configuration such that other traffic can be allowed into my tomcat server

2) next we create tomcat users with access roles eg manager role, amdim role, etc: vi or vim  /opt/tomcat9/conf/tomcat-user.xml  


 WAYS TO DEPLOY IN TOMCAT 
1) UPLOADING STRAIGHT TO TOMCAT DIRECTLY FROM MY COMPUTER 
if i already saved file/artifact in my computer
so on my browser ie (tomcat gui) click on deploy then in mobaxterm(CLI)
ls   /opt/tomcat9//webapps                                                                                  
we see the file copied into the webapp dir 

     option2)       DePLOYING FROM SERVER TO SERVER (Maven to tomcat)
 
we want to copy the file from our build server maven to tomcatserver
secure copy
A)if my server is not password authentication enabled    ****** we have to configure to use the private/ssh key  ***  ssh-keygen -m PEM -t rsa
we run the scp command in maven                                  
scp -i c32.pem  target/*war ec2-user@tomcat public ip:/opt/tomcat9/webapps/     *war; means all war files
B)if password authentication is enabled   *** (PW authentication has to be configured in both tomcat & maven server) sudo vi /etc/ssh/sshd_config
 we run this:   scp target/*war ec2-user@34.219.51.216:/opt/tomcat9/webapps/  



Tomcat Home directory - THD = /opt/tomcat9
THD:  is where the tomcat software is extracted & unzipped

        
    EXPLAINING THE CONTENT OF THE THD

when we ls, we see bin, conf, lib, logs, webapps, temp

      bin :
ls bin/ contains:
    bin: --- binary files  (important files like )
      startup.sh    --->  for LINUX SYSTEM

ls conf/: 

eg of files in conf:
     server.xml          
      tomcat-users.xml, users.xml for those that work in the bank
               contains configuration information about tomcat server, any changes can be done here
 eg; vi conf/server.xml

lib :
        contain all the jar files

    logs :   contains log files
      catalina.out
      host-manager.log
eg; vi logs/catalina.out

webapps: The default deployment Directory in Tomcat 
       its where deployment is taking place 
       therfore all the war files
      like maven-web-app.war created from # mvn package 
       we have to copy to the webapps dir because thats where deployment takes places 
        cp *.war /webapps
        cp *war   /




 HOW TO IMPROVE TOMCAT SERVER PERFORMNACE 

1) multiple request on a single tomcat server will affect performance
2)  Multiple deployments will reduce tomcat server performance.
  therefore its recommended  tohave multiple tomcat server 
3) The resource level or computing capacity OF your tomcat server   
     8GB RAM,   480GB Hard drive HDD  is better than 64GB RAM,  4000GB Hard drive SSD   

  2:39:10
4) HDD hard drive  is/are of less performnace than SSD

5) HEAPSIZE 
  We can increase the heapsize of the server 
Normally, tomcat by default allocates 64mb but we can increase to 128mb/256mb
  heapsize = 64mb -- 128mb/256mb    









 














c
