Dynamic Inventory:
=================
Dynamic Inventory uses scripts and Plugins to classify hosts from a cloud provider.
  appservers  
  dbservers  
  webservers  
  devServers   
The default ansible static host file  = /etc/ansible/hosts   
The custom ansible  static host file  = anywhere in the server 
                                       /home/ansible/hosts 
                                       /tmp/hosts  
                                        /home/ansible/myhosts
 scripts:
    ec2.py  and 
    ec2.ini 
 
 Plugins:
  ec2       
sudo yum -y install python3-pip                               ********** first install python p
sudo apt -y install python3-pip
pip3 install boto3 botocore --user                           ****** if you are installing for a particular user
pip3 install --upgrade requests --user                        ******* then upgrade



we hv an aws account so
Ansible will fetch and group servers/hosts/ec2                *********   and in ansible servers are called ec2

vi dynamic-inventory-aws_ec2.yml  
vi dynamic-inventory.yml


                                 ******** this is infrastructure as a code

10:30:00             using dynamic inventory
                    dynamic files end with .yml


vi di-aws_ec2.yml                             ***** file name , vi and paste the file 
plugin: aws_ec2
aws_access_key: 
aws_secret_key: 
regions:                                    ****** to list specific regions
  - us-east-1                     
  - us-east-2
  - us-west-1
filters:
  instance-state-name : running
keyed_groups:
  - key: tags.Name
    prefix: ""
    separator: ""
hostnames:
  - private-ip-address
compose:
  ansible_host: private_ip_address



5:10
    ******** if you dont want to do IAC,  then 
you will assign an IAM role to your ANsible control server with REQ permissions to grup servers
and when we use roles, confidential details are not displayed (the key info)




ansible all -i di-aws_ec2.yml -m ping -u ec2-user
ansible-inventory --graph -i di -aws_ec2.yml                ******** dynamically listing the resources/servers in aws
ansible-inventory --graph -i dynamic-inventory-aws_ec2.yml
ansible all -i dynamic-inventory-aws_ec2.yml -m ping -u ubuntu --private-key=/tmp/key.pem
ansible-playbook ping.yml -i dynamic-inventory-aws_ec2.yml  --private-key=/tmp/key.pem -l app
ansible-playbook ping.yml -i dynamic-inventory-aws_ec2.yml -u ubuntu --private-key=/tmp/key.pem -l kops
ansible-playbook test.yml -i di-aws_ec2.yml -u ec2-user --private-key=/tmp/key.pem --limit app 


19:00                                                       STATIC INVENTORY
*****************
/etc/ansible/hosts  
[web]
54.175.72.219 ansible_user=ec2-user ansible_ssh_private_key_file=/tmp/class35.pem                   ******** but with dynamic we dont have this file 
54.175.72.219 ansible_user=ec2-user ansible_password=admin123
[db] 
172.31.36.121 ansible_user=ec2-user ansible_ssh_private_key_file=/tmp/class35.pem
[k8s]
34.233.124.124 ansible_user=ubuntu ansible_ssh_private_key_file=/tmp/kkk.pem
[docker]
10.0.4.60 ansible_user=ubuntu ansible_ssh_private_key_file=/tmp/kkk.pem


19:41  
when we create a server in aws it comes with an ssh private key 
and when connecting to your ubuntu server for the first time you:
ssh -i demo.pem ubuntu@172.31.80.9
when we create a server for the first time, it doesnt come with an ansible user , 
cos when you pass smt like this it means you wnat to use a default user, but thers no default user 
so it is presummed that this servers hv just been created so if we want to ping the server, we can only ping the server with the default user that the server came with
so we run the command like user , w ewant to ping the server with user ubuntu 


                             "  the inventory file"               
ansible-playbook test.yml -i di-aws_ec2.yml -m ping -u ubuntu --private-key=/tmp/key.pem           ** playbk called test.yml, whterver we wnt to do is defined in the playbk 
                                                                                                              the key is found in /tmp









automation ticket001247:
  continuous provisioning      - Jenkins-Terraform integration []    
  continuous configuration MGT - Jenkins-Ansible integration   
  continuous integration       - Build and Release [Jenkins/maven/Sonarqube/nexus]   
  continuous deployment        - Jenkins and docker/Kubernetes integration
  continuous Monitoring        - Jenkins and Kubernetes/P-G integration
  continuous Monitoring        - Jenkins and Kubernetes/EFK integration

Triggers:
  pollSCM / github-webhook
  Build other projects  
  Build after other projects are built  

Infrastructure Engineering:
  console / 
  commands = aws s3 mb s3://test31   
             aws eks create-cluster --name eks31 --region us-west-1  
             eksctl create-cluster --name eks31 --region us-west-1  
  scripts: infrastructure as a code 
           Terraform scripts  
           CloudFormation scripts 
           version controlled using git/github  
           easy to reused  
  servers/vm/ec2:
    maven / Sonarqube / nexus / tomcat / docker / eks  
  network: vpc / route53 / vpn / aws direct connect  
  security: iam / sg / nacl / waf /  
  elb / asg /  
  storage: ebs / efs / s3 

Rancher Installations in a docker server:
$ Install docker
$ sudo docker run --privileged -d --restart=unless-stopped -p 80:80 -p 443:443 rancher/rancher

  52.87.183.168  

  docker logs  container-id  2>&1 | grep "Bootstrap Password:"  

  docker logs  container-id  2>&1 | grep "Bootstrap Password:"

  docker logs ea57f674cdce  2>&1 | grep "Bootstrap Password:"
  Bootstrap Password: twgf8l75hnmvdnl6vdlph77hg9vbslvxnr25wmnczbvx2sfw54kgs6  
    new password = admin1234....



student encounters 
1. DR. Henry Tatangang 
     Inspector General of Employment
     16years as University Professor 
     Counsellor - Retired in 2009
     75years 
2.  Prince Chefah Forchu  
    BSc. in Political Sciences   
3. Isaac  = Manufacturing 
4. Michelle koundou -  BA  
5. Obianuju Nnoli - BSc maths 
6. Emilie -
7. Ayomitunde Sogbesan
8. Mercy N nsoh = BSc Banking   
9. Johnpaul Emenogu = food safety
